{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"Documentaci%C3%B3/","text":"\u200b CES (Control d'estoc en sensors) ASIX Institut de l'Ebre Realitzat per: Oriol Morera Pau Mestres Ferran Bertomeu 1. Descripci\u00f3 Aquest projecte consisteix amb la instal\u00b7laci\u00f3 de sensors a les m\u00e0quines de vending per a controlar en tot moment l'estoc de productes del qual disposa aquesta. El treballador encarregat de la m\u00e0quina, podr\u00e0 consultar en tot moment, mitjan\u00e7ant una p\u00e0gina web, l'estoc disponible. Aix\u00f2 permet agilitzar la feina d'aquest ja que realment sabr\u00e0 si es necessari o no anar a reomplir una m\u00e0quina en concret. La p\u00e0gina web mitjan\u00e7ant la qual el treballador podr\u00e0 consultar l'estoc, tamb\u00e9 inclour\u00e0 altra informaci\u00f3 com ara la temperatura i humitat, i la ubicaci\u00f3 d'aquesta. L'estoc a la p\u00e0gina web es representar\u00e0 amb colors: verd (ple), groc (taronja), groc (poc) i vermell (buit). Tamb\u00e9 s'ha pensat amb el consumidor, aix\u00ed que hem decidit crear tamb\u00e9 una aplicaci\u00f3 m\u00f2bil. Aquesta aplicaci\u00f3 permet a l'usuari consultar la localitzaci\u00f3 de les m\u00e0quines i els productes que aquestes tenen. Pensant amb la gent que pateix algun tipus d'intoler\u00e0ncia hem afegit una descripci\u00f3 dels productes llistant els seus ingredients per a evitar algun accident inesperat. 2. Motivaci\u00f3 En aquest projecte podem crear un avan\u00e7 per a empreses que distribueixen els productes en aquestes m\u00e0quines, ja que permetr\u00e0 als treballadors tindre un control m\u00e9s prec\u00eds sobre les m\u00e0quies. Aix\u00f2 \u00e9s tradueix en facilitar el treball i un estalvi en temps i recursos a l'empresa. Actualment, amb la situaci\u00f3 que ens trobem, creiem que es una bona inversi\u00f3 (econ\u00f2micament parlant) de cara al futur. En l\u2019\u00e0mbit acad\u00e8mic, la implementaci\u00f3 de la Raspberry Pi \u00e9s una novetat per a nosaltres i creiem que podrem treure-li profit al dispositiu, ja que ens obre moltes portes, tant com per provar els sensors, instal\u00b7lar serveis, etc. 3. Objectius \u00c0mbit professional: Millora en la rapidesa del treball Facilitats per saber quin o quins productes s'estan esgotant i cal reposar. Gran efectivitat a l'hora de fer les comandes, ja que en el moment saps el que has d'omplir. Reducci\u00f3 de costs, degut a que el treballador nom\u00e9s es despla\u00e7ar\u00e0 quan sigui necessari reposar algun producte. \u00c0mbit acad\u00e8mic: Administraci\u00f3 i gesti\u00f3 de bases de dades, desenvolupament de serveis, seguretat, fonaments de maquinari i implantaci\u00f3 d'aplicacions web. 4. Material utilitzat Per dur a terme el projecte, hem utilitzat els seg\u00fcents elements: Raspberry Pi 2 Model B: Aquest \u00e9s el \"cor\" del projecte. Sota aquest petit ordenador ser\u00e0 on funcionar\u00e0 tot el programari necessari. Aquest model en concret t\u00e9 unes caracter\u00edstiques bastant limitades, nom\u00e9s disposa de 1GB de mem\u00f2ria RAM, la qual cosa fa que sigui una mica lenta en algunes situacions, per\u00f2, per al que nosaltres la farem servir no es cap inconvenient. Apart del programari, en aquest dispositiu tamb\u00e9 connectarem els sensors que ens brindaran la informaci\u00f3 necess\u00e0ria per dur a cap la idea principal del projecte. Sensor de temperatura i humitat DHT11: Aquest sensor de mida petita, ens permetr\u00e0 saber en tot moment la temperatura i humitat de la m\u00e0quina en la qual el col\u00b7loquem. Funciona amb una connexi\u00f3 de 5V i porta una resist\u00e8ncia interna, la qual cosa ens permet connectar el sensor a la Raspberry sense cap tipus de problema. Sensor d'ultrasons HC-SR04: Aquest sensor funciona emetent senyals de s\u00f3. S'utilitza normalment per a la detecci\u00f3 d'obstacles en petits robots per\u00f2, hem adaptat el programari per a que, modificant una serie de camps, ens retorni exactament l'estoc que queda a la m\u00e0quina en la qual s'incorpora. Tamb\u00e9 el connectem a la Raspberry mitjan\u00e7ant una connexi\u00f3 de 5V. Si el comparem amb el de temperatura, aquest no porta cap resist\u00e8ncia interna, per aquest motiu hem tingut que afegir dues resist\u00e8ncies per poder fer-lo funcionar, una de 1k ohm i l'altra de 2k ohms. Breadboard Kit: Aquest kit ens facilita molt la feina a l'hora de connectar els sensors i treballar amb aquests. El kit ens ofereix diversos accessoris, els m\u00e9s rellevants s\u00f3n: Panell de pl\u00e0stic: el qual ens permet falcar la Raspberry per tindre un lloc de treball m\u00e9s accessible. Breadboard: ens permet realitzar les connexions dels sensors i les resist\u00e8ncies cap a la Raspberry tenint una millor organitzaci\u00f3 amb els cables. Resist\u00e8ncies: utilitzades amb els sensors per a que no es trenquin. Cables: per realitzar les connexions entre els sensors, resist\u00e8ncies i la Raspberry. Targeta SD de 16GB: Aqu\u00ed ser\u00e0 on instal\u00b7larem el sistema operatiu de la Raspberry i on tindr\u00e0 lloc el funcionament de tot el programari necessari. La capacitat m\u00ednima que recomanem nosaltres \u00e9s de 16GB ja que menys seria molt poc contant tot el que s'anir\u00e0 afegint. 5. Sistema Operatiu Si busquem sistemes operatius per a una Raspberry trobarem moltes opcions en el mercat. Nosaltres ens hem decantat espec\u00edficament per \"Raspberry Pi OS\". Aquest \u00e9s el sistema operatiu oficial de Raspberry, el qual est\u00e0 basat en Linux i \u00e9s molt f\u00e0cil d'instal\u00b7lar i fer servir. Dins d'aquest sistema operatiu podem escollir entre la versi\u00f3 \"Desktop\", la qual t\u00e9 apartat gr\u00e0fic, i la versi\u00f3 \"Lite\", la qual funciona mitjan\u00e7ant una terminal com si fos un \"Ubuntu Server\". Nosaltres ens hem decantat per la \"Desktop\" ja que \u00e9s m\u00e9s intu\u00eftiva i ens permet treballar de manera m\u00e9s c\u00f2moda. 5.1. Descarregar i cremar la imatge Cremar la imatge Primer entrarem a la web oficial i ens descarregarem l\u2019instal\u00b7lador. Un cop descarregat ens descarregarem el paquet rpi-imager des del terminal i ja podrem gravar la imatge de la Raspberry a la SD. Ara que ja el tenim instal\u00b7lat executarem el programa i escollirem el sistema operatiu que volem instal\u00b7lar. En el nostre cas hem escollit la versi\u00f3 de Raspberry de 32 bits. Un cop escollit el sistema operatiu, el seg\u00fcent pas ser\u00e0 dir-li al programa a quin dispositiu volem gravar la imatge. L'\u00faltim pas ser\u00e0 gravar la imatge al dispositiu. Ens demana si volem esborrar les dades de la SD. Li diem que si. I comen\u00e7a a escriure dintre de la SD 5.2. Instal\u00b7laci\u00f3 del sistema operatiu Per comen\u00e7ar amb la instal\u00b7laci\u00f3 introduirem, el dispositiu que hem cremat anteriorment amb la imatge. A l\u2019arrancar ens preguntar\u00e0 el que volem fer, en aquest cas, li direm que volem una instal\u00b7laci\u00f3 gr\u00e0fica escollint la opci\u00f3 \"Graphical Install\". Despr\u00e9s d\u2019escollir el par\u00e0metre anterior ja podrem comen\u00e7ar amb la instal\u00b7laci\u00f3, on primer escollirem l\u2019idioma. El seg\u00fcent pas ser\u00e0 triar el tipus d\u2019instal\u00b7laci\u00f3, en aquest cas, escollirem la guiada amb l\u2019opci\u00f3 \"Guided \u2013 use entire disk\" i els discs que t\u00e9 la m\u00e0quina amb les particions corresponents. Confirmarem les opcions que hem escollit anteriorment. Un cop escollides totes les opcions comen\u00e7ar\u00e0 amb el proc\u00e9s d\u2019instal\u00b7laci\u00f3, on en uns passos m\u00e9s endavant ens preguntar\u00e0 on volem instal\u00b7lar el grub. Ara ja podrem accedir al sistema, a l\u2019hora d\u2019entrar, ens preguntar\u00e0 si volem realitzar una actualitzaci\u00f3 del sistema, podem ignorar-ho o acceptar-ho. Fet aix\u00f2, ja podrem passar amb la configuraci\u00f3. 5.3. Configuraci\u00f3 del sistema operatiu SSH Per poder treballar c\u00f2mode, utilitzarem el SSH connectat al Raspberry (recordant que \u00e9s un m\u00e8tode opcional (i recomanable), al qual podem tenir-lo obert i poder treballar amb el PC amfitri\u00f3). Entrarem a la configuraci\u00f3 de la xarxa de la Raspberry i afegirem una IP del mateix rang de la xarxa que estem connectats per a tenir comunicaci\u00f3 entre l'ordinador amfitri\u00f3 i la Raspberry: Un cop afegit la xarxa, reiniciarem la Raspberry. Entrem dintre del terminal, i escrivim aquesta comanda, la qual serveix per configurar els serveis, i on nosaltres habilitarem el SSH: Per una part es sap que t\u00e9 un risc elevat al ser vulnerat aquest protocol, per\u00f2 canviarem la contrasenya. Direm que si: I ja habilitem el servei: Revisem si la configuraci\u00f3 de la xarxa \u00e9s correcta amb la comanda ifconfig : 6. Seguretat al dispositiu 6.1. Que demani contrasenya a l'usuari pi Per defecte, quan col\u00b7loquem \"sudo\" davant d\u2019una comanda amb l\u2019usuari \"pi\", el sistema no ens deman\u00e0 contrasenya i executa la comanda com a super usuari. Per solucionar aix\u00f2 i que ens demani una contrasenya per tindre els permisos de super usuari, editarem el fitxer \"010_pi-nopasswd\" . Dins d\u2019aquest fitxer, modificarem el par\u00e0metre \"pi ALL=(ALL) NOPASSWD: ALL\" i el deixarem de la seg\u00fcent manera: \"pi ALL=(ALL) PASSWD: ALL\" . Ara quan posem el \"sudo\" davant la comanda, ja ens demana contrasenya abans de realitzar l\u2019acci\u00f3 de la comanda. 6.2. SSH Quan estem treballant amb una raspberry, el servei \"ssh\" \u00e9s un dels m\u00e9s freq\u00fcentats a l\u2019hora de realitzar configuracions en remot o poder treballar amb el dispositiu sense connectar-li cap perif\u00e8ric. Per fer d\u2019aquest un servei m\u00e9s segur, es recomanable realitzar un m\u00ednim de canvis en la configuraci\u00f3. La modificaci\u00f3 que realitzarem ser\u00e0 que no es pugui iniciar sessi\u00f3 amb l\u2019usuari \"root\" . Si no el desactivem, aix\u00f2 ja dona una pista a l\u2019atacant de que aquest usuari est\u00e0 habilitat per accedir i si aconsegueix trencar la contrasenya tindr\u00e0 un acc\u00e9s total al dispositiu. Per deshabilitar l\u2019usuari root, ens dirigirem al fitxer de configuraci\u00f3 \"sshd_config\" i li donarem el valor \"no\" al par\u00e0metre \"PermitRootLogin\" . Com podem veure si ara intentem accedir amb aquest usuari, el servei ens denega la connexi\u00f3. 6.3. Fail2Ban Aquest programa ens permet protegir-nos de manera efica\u00e7 contra atacs de for\u00e7a bruta o atacs de denegaci\u00f3 de servei (DoS). Podem escollir configurar un servei en concret o aplicar una configuraci\u00f3 per defecte per a tots els serveis. Per instal\u00b7lar el programa, nom\u00e9s tindrem que executar l\u2019ordre \"sudo apt-get install fail2ban\" . Un cop instal\u00b7lat, ens dirigirem al directori \"/etc/fail2ban\" i comen\u00e7arem a realitzar la configuraci\u00f3 dels serveis al fitxer \"jail.conf\" . El que farem nosaltres ser\u00e0 aplicar una configuraci\u00f3 per a tots els serveis. La qual nom\u00e9s donar\u00e0 dos intents per realitzar l\u2019autenticaci\u00f3 i si aquests fallen, es banejar\u00e0 la IP durant 30 minuts. Pot semblar que dos intents s\u00f3n poc, per\u00f2 en realitat en seran m\u00e9s. Aix\u00f2 \u00e9s perqu\u00e8 els intents es poden definir tant en la configuraci\u00f3 del servei en concret o al \"fail2ban\" . Per exemple el servei \"ssh\" per defecte t\u00e9 3 intents. Si al \"fail2ban\" en definim 2, tindrem 6 intents per accedir al \"ssh\" . 7. Bases de dades 7.1. Recopilaci\u00f3 i an\u00e0lisi de requisits Aquesta primera fase consisteix en un pas previ obligatori, per assegurar-nos que la nostra base de dades complir\u00e0 amb els nostres objectius. Per a aix\u00f2, haurem d'analitzar diferents factors: Les dades que necessitem emmagatzemar i d'on provenen. La informaci\u00f3 que les dades descriuen. Els usuaris de la base de dades i les seves necessitats a l'hora d'accedir a les dades. 7.2. Disseny conceptual En aquesta fase es representa una descripci\u00f3 a alt nivell del contingut de la base de dades, sense importar el sistema de gesti\u00f3 de base de dades que s'utilitzar\u00e0 a continuaci\u00f3. Es defineixen en un dibuix les entitats, els seus atributs i les relacions entre elles. 7.3. Elecci\u00f3 d'un sistema de gesti\u00f3 de base de dades \u00c9s en aquesta fase on triarem el sistema de gesti\u00f3 de bases de dades (SGBD) concret que millor s'adapta al nostre projecte, com, per exemple, Oracle, MySQL, Microsoft SQL Server i PostgreSQL. 7.4. Disseny l\u00f2gic En aquesta fase, es tradueix el model conceptual obtingut anteriorment a un esquema l\u00f2gic, que descriu l'estructura de la base de dades. Es tracta de la fase en la qual es dissenyen les taules pr\u00f2piament dites, amb les seves files, columnes i relacions. El model l\u00f2gic dep\u00e8n de l'SGBD que s'utilitzar\u00e0. 7.5. Disseny f\u00edsic En aquesta fase es defineixen les estructures d'emmagatzematge de la base de dades de forma f\u00edsica. \u00c9s quan s'escriu el codi (per exemple, SQL) per concretar el disseny en el motor de base de dades que hem escollit. 7.6. Implementaci\u00f3 Finalment, es crea i es compila l'esquema de la base de dades, es generen els fitxers i les aplicacions que implementen les transaccions. Seleccionem la base de dades Insertem el fitxer on tenim les estructures d'emmagatzematge de la base de dades I per acabar mostrem el contingut de les taules 8. Sensors Els sensors juguen un paper molt important en aquest projecte, ja que sense ells no podr\u00edem fer res del que proposem. Per aix\u00f2 hem elegit acuradament aquests per garantir un bon funcionament i durabilitat. Tamb\u00e9 ha sigut necessari generar els scripts per a poder representar les dades d'aquests, la qual cosa ens ha portat algun mal de cap per\u00f2 al final tot ha sortit com s'esperava. 8.1. Sensor de temperatura 8.1.1. Connexi\u00f3 La connexi\u00f3 d'aquest sensor a la Raspberry \u00e9s realitza mitjan\u00e7ant tres connexions. Una de corrent de 5V, una de dades i la de terra. 8.1.1. Configuraci\u00f3 La configuraci\u00f3 dels sensors es realitza mitjan\u00e7ant un script programat amb \"Python\". Aquest script fa servir la llibreria \"Adafruit_DHT\" per poder recollir les dades del sensor. Un cop ja recollim les dades que ens envia el sensor, definim una connexi\u00f3 amb la nostra base de dades MySQL i una consulta amb aquesta per enviar les dades recollides pel sensor a la base de dades. Llibreries utilitzades: import Adafruit_DHT import time import RPi.GPIO as GPIO import datetime import MySQLdb Recollida de la informaci\u00f3 del sensor: #Port al qual est\u00e0 connectat el sensor dht_sensor_port = 4 #Model del sensor dht_sensor_type = Adafruit_DHT.DHT11 #Recollida d'informacio dels GPIO GPIO.setmode(GPIO.BCM) GPIO.setup(dht_sensor_port, GPIO.IN) Connexi\u00f3 amb la base de dades: #Variables per realitzar la connexio amb la base de dades hostname = '127.0.0.1' username = 'laravel' password = 'alumne' database = 'projectedb' #Connexi\u00f3 a la base de dades conn = MySQLdb.connect( host=hostname, user=username, passwd=password, db=database ) Enviament de dades a la base de dades: #Bucle per afegir les dades recollides pel sensor a la base de dades corresponent try: while True: hum, temp = Adafruit_DHT.read_retry(dht_sensor_type, dht_sensor_port) now = datetime.datetime.now() date = now.strftime('%d-%m-%Y %H:%M:%S') insert_record(format(temp,'.2f'),format(hum,'.2f'),str(date)) time.sleep(3) 8.2. Sensor d'ultra sons 8.2.1. Connexi\u00f3 La connexi\u00f3 d'aquest sensor a la Raspberry \u00e9s realitza mitjan\u00e7ant quatre connexions. Una de corrent de 5V, dues de dades i una de terra. 8.2.2. Configuraci\u00f3 La configuraci\u00f3 dels sensors es realitza mitjan\u00e7ant un script programat amb \"Python\". Aquest script fa servir la llibreria \"RPi.GPIO\" per poder recollir les dades del sensor. Un cop ja recollim les dades que ens envia el sensor, definim una connexi\u00f3 amb la nostra base de dades MySQL i una consulta amb aquesta per enviar les dades recollides pel sensor a la base de dades. Llibreries utilitzades: import RPi.GPIO as GPIO import time import mysql.connector Configuraci\u00f3 dels GPIO: #Configurac\u00f3 GPIO GPIO.setmode(GPIO.BCM) GPIO_TRIGGER = 23 GPIO_ECHO = 24 GPIO.setup(GPIO_TRIGGER, GPIO.OUT) GPIO.setup(GPIO_ECHO, GPIO.IN) Formula per calcular la dist\u00e0ncia: #Funcio distancia def distance(): GPIO.output(GPIO_TRIGGER, True) time.sleep(0.00001) GPIO.output(GPIO_TRIGGER, False) StartTime = time.time() StopTime = time.time() while GPIO.input(GPIO_ECHO) == 0: StartTime = time.time() while GPIO.input(GPIO_ECHO) == 1: StopTime = time.time() TimeElapsed = StopTime - StartTime distance = (TimeElapsed * 34300) / 2 return distance Connexi\u00f3 amb la base de dades: #Connexio a la base de dades mydb = mysql.connector.connect ( host = \"127.0.0.1\", user = \"laravel\", password = \"alumne\", database = \"projectedb\" ) mycursor = mydb.cursor() Enviament de dades a la base de dades: try: while True: dist = distance() #Comparem les distancies i executem el codi segons el resultat if 0 <= dist <= 8.8: #Definim el estoc stock = 3 #Definim l'estat que mostrara status = \"Stock ple\" print(str(status)+ \" Productes: \" + str(stock)) #Definim la consulta sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" #Executem la consulta definida mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif 9 <= dist <= 13.9: stock = 2 status = \"Stock per la mitat\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif 14.2 <= dist <= 18.6: stock = 1 status = \"Stock s'esta esgotant\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif dist >= 18.9: stock = 0 status = \"Stock esgotat\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") #Esperem 1 segon abans de repetir el bucle time.sleep(1) 8.3. Esquema de connexi\u00f3 conjunta Aix\u00ed \u00e9s com quedar\u00e0 amb els dos sensors connectats a la vegada i la manera que hem cregut m\u00e9s adequada de realitzar les connexions. 9. P\u00e0gina web 9.1. Instal\u00b7laci\u00f3 PHP Per a poder treballar amb el \"Laravel\" , ser\u00e0 necessari disposar del \"php\" al nostre dispositiu. Per instal\u00b7lar-lo, necessitarem fer-ho mitjan\u00e7ant els seg\u00fcents paquets: sudo apt install php7.0 php7.0-curl php7.0-gd php7.0-imap php7.0-json php7.0-mcrypt php7.0-mysql php7.0-opcache php7.0-xmlrpc php7.0-xml php7.0-fpm php7.0-zip -y Un cop instal\u00b7lats els paquets, comprovarem la versi\u00f3 per veure que s\u2019ha instal\u00b7lat correctament. 9.2. Instal\u00b7laci\u00f3 Composer Ara que ja tenim instal\u00b7lat el \"php\" , \u00e9s l\u2019hora instal\u00b7lar el \"composer\" . Quan aquest estigui instal\u00b7lat, mourem fitxer \"composer.phar\" al directori \"/usr/local/bin/composer\" i comprovarem si la instal\u00b7laci\u00f3 ha anat b\u00e9 verificant la versi\u00f3 d\u2019aquest amb l\u2019ordre \"composer \u2013version\" . 9.3. Creaci\u00f3 projecte Laravel Quan tinguem el \"composer\" instal\u00b7lat, ja podem crear el nostre projecte amb \"Laravel\". Abans de crear-lo, haurem de preparar un directori en el qual crearem aquest projecte. El que haurem de fer \u00e9s donar permisos i assignar a l\u2019usuari \"pi\" (en el nostre cas) com a propietari i grup de la carpeta en la que crearem el projecte. Amb els permisos corresponents al directori, ens dirigirem dins d\u2019aquest i ja podrem comen\u00e7ar amb la creaci\u00f3 del \"Laravel\" . Per crear-lo farem servir l\u2019ordre \"composer create-project\" definint la versi\u00f3 del \"Laravel\" que volem fer servir i donant-li un nom. 9.4. Autenticaci\u00f3 i registre d'usuaris Per poder iniciar sessi\u00f3 o registrar nous usuaris, ser\u00e0 necessari fer us del modul \"auth\" del \"Laravel\" . 9.5. Instal\u00b7laci\u00f3 NodeJS Per a poder fer servir la plantilla de \"Bootstrap\" que porta per defecte el \"Laravel\" , haurem d\u2019instal\u00b7lar tamb\u00e9 el \"node.js\" . Aix\u00f2 \u00e9s opcional, per\u00f2 \u00e9s un bon recurs per donar una aparen\u00e7a b\u00e0sica al nostre projecte. Ens descarregarem el paquet de la p\u00e0gina oficial amb l\u2019ajuda de la comanda \"curl\" . Un cop tinguem el paquet descarregat, realitzarem la instal\u00b7laci\u00f3 d\u2019aquest amb les seg\u00fcents dos comandes: 9.6. Comprovaci\u00f3 funcionament Un cop creat el projecte, l\u2019iniciarem entrant a la carpeta que s\u2019ha generat al crear-lo i executant l\u2019ordre \"php artisan serve\" . Si ara ens dirigim al nostre navegador i escrivim \"localhost:8000\" , podrem visualitzar el projecte amb el seu estat inicial. 9.7. Disseny i programaci\u00f3 Visualitzaci\u00f3 de les p\u00e0gines Encara no tenim cap p\u00e0gina creada, per\u00f2 anirem preparant la visualitzaci\u00f3 d'aquestes. Per fer-ho, ens dirigirem al fitxer \"web.php\" i definirem les rutes cap a les vistes corresponents. Route::get('/', function () { return view('inici'); }); Route::get('/home', 'HomeController@index')->name('home'); Route::get('/dashboard', function () { return view('maquina1'); }); P\u00e0gina d\u2019inici Per a la p\u00e0gina d\u2019inici, hem fet servir la plantilla \"grayscale\" . Aquesta \u00e9s una plantilla gratu\u00efta, modificable i sense drets d\u2019autor. Hem escollit aquesta ja que \u00e9s minimalista, molt visual i s\u2019adapta perfectament a les nostres necessitats. L\u2019hem adequat al nostre gust per a que representi m\u00e9s al projecte. La p\u00e0gina es divideix amb cinc apartats principals Inici En aquest punt veiem la vista principal de la p\u00e0gina i la qual ens introdueix una mica amb la idea principal del projecte. <header class=\"masthead\"> <div class=\"container d-flex h-100 align-items-center\"> <div class=\"mx-auto text-center\"> <h1 class=\"mx-auto my-0\">CES - Control d'estoc amb sensors</h1><br><br> <h2 class=\"text-white-50 mx-auto mt-2 mb-5\">Una idea pensada per a facilitar la feina als treballadors del m\u00f3n del vending.</h2> <a class=\"btn btn-primary js-scroll-trigger\" href=\"#projects\">Informat</a> </div> </div> </header> Qui som? Aqu\u00ed mostrem una breu descripci\u00f3 sobre el grup de treball i una petita introducci\u00f3 a la idea del projecte. <section class=\"about-section text-center\" id=\"about\"> <div class=\"container\"> <div class=\"row\"> <div class=\"col-lg-8 mx-auto\"> <h2 class=\"text-white mb-4\">Sobre nosaltres</h2> <p class=\"text-white-50\"> Som un grup format per tres estudiants els quals ens ha motivat dur a cap aquesta idea la comoditat dels treballadors. Tamb\u00e9 ens hem decidit per portar-la a cap pensant amb el medi ambient, ja que si es t\u00e9 un control exacte de l'estoc de les m\u00e0quines, el repartidor sap en tot moment quan s'est\u00e0 esgotant un producte i \u00e9s necessari reposar-lo, aix\u00ed, no li cal estar fent viatges sense saber el que realment ha de reposar. </p> </div> </div> <img class=\"img-fluid\" src=\"grayscale/assets/img/confort.png\" alt=\"\" /> </div> </section> Projecte Podem veure una descripci\u00f3 m\u00e9s detallada sobre el projecte, entrant tamb\u00e9 amb punts com els objectius d\u2019aquest i la motivaci\u00f3 per haver-lo dut a terme. <section class=\"projects-section bg-light\" id=\"projects\"> <div class=\"container\"> <!-- Featured Project Row--> <div class=\"row align-items-center no-gutters mb-4 mb-lg-5\"> <div class=\"col-xl-8 col-lg-7\"><img class=\"img-fluid mb-3 mb-lg-0\" src=\"grayscale/assets/img/vending.png\" alt=\"\" /></div> <div class=\"col-xl-4 col-lg-5\"> <div class=\"featured-text text-center text-lg-left\"> <h4>De que va el nostre projecte?</h4> <p class=\"text-black-50 mb-0\"> Consisteix amb la instal\u00b7laci\u00f3 d'uns sensors a les m\u00e0quines de vending per a controlar en tot moment l'estoc de productes del qual disposa aquesta. El treballador podr\u00e0 consultar en tot moment l'estoc disponible. Sempre que s'estigui a punt d'esgotar algun producte, el treballador rebr\u00e0 un av\u00eds per anar a reposar-lo. </p> </div> </div> </div> <!-- Project One Row--> <div class=\"row justify-content-center no-gutters mb-5 mb-lg-0\"> <div class=\"col-lg-6\"><img class=\"img-fluid\" width=\"350\" height=\"350\" margin-left=\"10\" src=\"grayscale/assets/img/objectiu.png\" alt=\"\" /></div> <div class=\"col-lg-6\"> <div class=\"bg-black text-center h-100 project\"> <div class=\"d-flex h-100\"> <div class=\"project-text w-100 my-auto text-center text-lg-left\"> <h4 class=\"text-white\">Objectius</h4> <ul class=\"mb-0 text-white-50\"> <li>Millora en la rapidesa del treball.</li> <li>Facilitat per saber quins productes cal reposar.</li> <li>Reducci\u00f3 de costos, ja que el treballador nom\u00e9s \u00e9s despla\u00e7ar\u00e0 quan s'hagi de reposar algun producte.</li> </ul> <hr class=\"d-none d-lg-block mb-0 ml-0\" /> </div> </div> </div> </div> </div> <!-- Project Two Row--> <div class=\"row justify-content-center no-gutters\"> <div class=\"col-lg-6\"><img class=\"img-fluid\" width=\"350\" height=\"350\" src=\"grayscale/assets/img/motivacio.png\" alt=\"\" /></div> <div class=\"col-lg-6 order-lg-first\"> <div class=\"bg-black text-center h-100 project\"> <div class=\"d-flex h-100\"> <div class=\"project-text w-100 my-auto text-center text-lg-right\"> <h4 class=\"text-white\">Motivaci\u00f3</h4> <p class=\"mb-0 text-white-50\"> En aquest projecte pretenem crear un avan\u00e7 per a les empreses que es dediquen a reposar els productes de les m\u00e0quines de vending, facilitant-los aix\u00ed la feina, ja que saben en tot moment quin \u00e9s l'estoc de cada m\u00e0quina i quins productes cal reposar. </p> <hr class=\"d-none d-lg-block mb-0 mr-0\" /> </div> </div> </div> </div> </div> </div> </section> Contacta\u2019ns Petit apartat orientat a contactes per part de clients o usuaris que visitin el lloc i estiguin interessats amb la idea. <section class=\"contact-section bg-black\" id=\"contacte\"> <div class=\"container\"> <div class=\"row\"> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-map-marked-alt text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">On estem?</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\">Av. de Crist\u00f2fol Colom, 34, 42, 43500 Tortosa, Tarragona</div> </div> </div> </div> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-envelope text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">Pregunta'ns sense cap comprom\u00eds</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\"><a href=\"#!\">info@ces.com</a></div> </div> </div> </div> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-mobile-alt text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">Truca'ns</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\">977000000</div> </div> </div> </div> </div> <div class=\"social d-flex justify-content-center\"> <a class=\"mx-2\" href=\"#!\"><i class=\"fab fa-twitter\"></i></a> <a class=\"mx-2\" href=\"#!\"><i class=\"fab fa-facebook-f\"></i></a> <a class=\"mx-2\" href=\"#!\" target=\"_blank\"><i class=\"fab fa-instagram\"></i></a> </div> </div> </section> Login Aquest apartat est\u00e0 dirigit \u00fanicament a clients o administradors del propi projecte. Nom\u00e9s pot iniciar sessi\u00f3 alg\u00fa que tingui un compte. No donem la opci\u00f3 de registrar ja que el registre el realitzarem nosaltres directament per cada client. Panell de control El panell de control, nom\u00e9s estar\u00e0 habilitat als clients que ja disposin del nostre projecte instal\u00b7lat a les seves m\u00e0quines. Com en la p\u00e0gina d\u2019inici, tamb\u00e9 hem fet servir una plantilla, en aquest cas \"adminlte\" . Aquesta \u00e9s una plantilla gratu\u00efta, modificable i sense drets d\u2019autor. Hem escollit aquesta ja que el disseny s\u2019adapta correctament al que est\u00e0vem buscant i nom\u00e9s ha calgut modificar alguns punts per donar-li el toc de personalitat del nostre projecte. El primer que veurem a l\u2019accedir-hi, ser\u00e0 un men\u00fa lateral a la banda esquerra on veurem les m\u00e0quines disponibles. A la part de dalt, tenim una barra de navegaci\u00f3, la qual actualment nom\u00e9s ens permet tancar sessi\u00f3 amb l\u2019usuari el qual estem connectats o tornar a la p\u00e0gina de la primera m\u00e0quina. <aside class=\"main-sidebar sidebar-dark-primary elevation-4\"> <!-- Brand Logo --> <a href=\"/dashboard\" class=\"brand-link\"> <span class=\"brand-text font-weight-light\">M\u00e0quines</span> </a> <!-- Sidebar --> <div class=\"sidebar\"> <!-- Sidebar Menu --> <nav class=\"mt-2\"> <ul class=\"nav nav-pills nav-sidebar flex-column\" data-widget=\"treeview\" role=\"menu\" data-accordion=\"false\"> <li class=\"nav-item\"> <a href=\"/dashboard\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #1</p> </a> </li> <li class=\"nav-item\"> <a href=\"#\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #2</p> </a> </li> <li class=\"nav-item\"> <a href=\"#\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #3</p> </a> </li> </ul> </nav> </div> </aside> <!-- Content Wrapper. Contains page content --> <div class=\"content-wrapper\"> <!-- Content Header (Page header) --> <div class=\"content-header\"> <div class=\"container-fluid\"> <div class=\"row mb-2\"> <div class=\"col-sm-6\"> <h1 class=\"m-0 text-dark\">M\u00e0quina #1</h1> </div><!-- /.col --> </div><!-- /.row --> </div><!-- /.container-fluid --> </div> <!-- /.content-header --> Apartats Si accedim a una de les m\u00e0quines del men\u00fa, trobem tres apartats, els quals s\u00f3n: Temperatura i Humitat, Estoc i Ubicaci\u00f3. Temperatura i Humitat Aqu\u00ed podem veure les temperatures i humitats de les \u00faltimes 24 hores ordenades de m\u00e9s recents a m\u00e9s antigues. Aquestes dades estan ficades dins d\u2019una taula que a l\u2019hora est\u00e0 dins d\u2019una targeta. La informaci\u00f3 que ens mostra est\u00e0 extreta directament de la nostra base de dades. <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-body\"> <table class=\"table\"> <thead> <tr> <th scope=\"col\">#</th> <th scope=\"col\">Temperatura</th> <th scope=\"col\">Humitat</th> <th scope=\"col\">Data i hora</th> </tr> </thead> <tbody> <!--Connexi\u00f3 i consultes a la base de dades--> <?php $cont = 0; $con = mysqli_connect('127.0.0.1', 'laravel', 'alumne', 'projectedb'); $sql = \"SELECT * FROM dht11 ORDER BY date desc LIMIT 24\"; $result = mysqli_query($con, $sql); foreach ($result as $value) { $cont += 1; echo (\"<tr>\"); echo (\"<td>\" . $cont . \"</td>\"); echo (\"<td>\" . $value[\"temp\"] . \"</td>\"); echo (\"<td>\" . $value[\"hum\"] . \"</td>\"); echo (\"<td>\" . $value[\"date\"] . \"</td>\"); echo (\"</tr>\"); } ?> </tbody> </table> </div> </div> </div> </div> </div> </div> Estoc Accedint a la base de dades, mostrem els productes disponibles de la m\u00e0quina a la qual accedim i veiem la quantitat restant. Amb un missatge tamb\u00e9 ens queda clar si l\u2019estoc est\u00e0 ple o no. <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-header\"> <h5 class=\"m-0\">Estoc</h5> </div> <div class=\"card-body\"> <table class=\"table\"> <thead> <tr> <th scope=\"col\">#</th> <th scope=\"col\">Producte</th> <th scope=\"col\">Estoc</th> <th scope=\"col\">Estat</th> </tr> </thead> <tbody> <!--Connexi\u00f3 i consultes a la base de dades--> <?php $cont = 0; $con = mysqli_connect('127.0.0.1', 'laravel', 'alumne', 'projectedb'); $sql = \"SELECT nom,stock FROM productes\"; $result = mysqli_query($con, $sql); foreach ($result as $value) { $to = \"ferranbertomeu@iesebre.com\"; $cont += 1; echo (\"<tr>\"); echo (\"<td>\" . $cont . \"</td>\"); echo (\"<td>\" . $value[\"nom\"] . \"</td>\"); echo (\"<td>\" . $value[\"stock\"] . \"</td>\"); #Retorna un missatge depenent de l'estoc canviant el color del mateix if ($value[\"stock\"] == 0) { $subject = \"S'ha esgotat Aigua petita!\"; $message = \"S'ha esgotat Aigua petita, s'ha d'anar a reposar el producte urgentment!\"; echo (\"<td style=\" . \"background-color:#FF4C4C\" . \">\" . \"No queden productes!\" . \"</td>\"); #Funci\u00f3 mail per notificar a l'usuari si s'est\u00e0 esgotant l'estoc mail($to, $subject, $message); } elseif ($value[\"stock\"] == 1) { $subject = \"S'est\u00e0 a punt d'esgotar Aigua petita!\"; $message = \"S'est\u00e0 a punt d'esgotar Aigua petita, s'ha d'anar a reposar el producte!\"; echo (\"<td style=\" . \"background-color:#FFB44E\" . \">\" . \"S'est\u00e0 esgotant!\" . \"</td>\"); mail($to, $subject, $message); } elseif ($value[\"stock\"] == 2) { echo (\"<td style=\" . \"background-color:#F5FF5B\" . \">\" . \"Queden la meitat de productes\" . \"</td>\"); } elseif ($value[\"stock\"] == 3) { echo (\"<td style=\" . \"background-color:#9EFF5B\" . \">\" . \"Estoc ple\" . \"</td>\"); } echo (\"</tr>\"); } ?> </tbody> </table> </div> </div> </div> </div> </div> </div> Ubicaci\u00f3 Aquest punt ens mostr\u00e0 la ubicaci\u00f3 exacta de la m\u00e0quina mitjan\u00e7ant en Google Maps. <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-header\"> <h5 class=\"m-0\">Ubicaci\u00f3</h5> </div> <div class=\"card-body\"> <iframe src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3019.597814021702!2d0.5130780156795304!3d40.81483093925471!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12a0e4bd4079a9d1%3A0x253c0ed9489c50f8!2sInstitut%20de%20L&#39;Ebre!5e0!3m2!1sca!2ses!4v1620804506220!5m2!1sca!2ses\" width=\"600\" height=\"450\" style=\"border:0;\" allowfullscreen=\"\" loading=\"lazy\"></iframe> </div> </div> </div> </div> </div> </div> 10. Aplicaci\u00f3 m\u00f2bil 10.1. Creaci\u00f3 del projecte Hem instal\u00b7lat l'Android Studio des del programari d'Ubuntu. Un cop instal\u00b7lat anem a crear el nostre projecte. Seleccionem l'opci\u00f3 Empty Activity per a comen\u00e7ar des de zero i disenyar-ho al nostre gust. Un cop seleccionat el diseny assignem nom al projecte i definim el llenguatge de programaci\u00f3 que utilitzarem, en aquest cas Java. Tenim l'opci\u00f3 de seleccionar la versi\u00f3 m\u00ednima requerida del sistema Android, hem escollit Android 6.0 (Marshmallow). 10.2. Creaci\u00f3 d'un bot\u00f3 Comen\u00e7em definint el nom del bot\u00f3 anomenat maquines que el crearem al fitxer que se'ns creara cada cop que afegim una Empty Activity amb l'extenci\u00f3 .xml , tot el que definim en aquest fitxer ser\u00e0 el que vitzualitzarem per pantalla. Definim la id, el disseny tant de l'amplada com el de llargada que en aquest cas utilitzarem warp_content . Despr\u00e9s definim la distancia respecte als marges de la dreta i la part superior i finalment el nom que es mostrara al bot\u00f3. <Button android:id=\"@+id/maquines\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"24dp\" android:layout_marginTop=\"544dp\" android:text=\"M\u00e0quines\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> 10.3. Definir una funci\u00f3 a un bot\u00f3 Ja tenim creat el bot\u00f3 i anem a definir la seva funci\u00f3: portar-mos fins una altra Empty Activity . Al bot\u00f3 maquines ho definim, aquest cas, al fitxer .java se'ns crea juntament al .xml al crear un Empty Activity . Indiquem que quan es faigue clic ens porti fins maquines.class , que \u00e9s la nova activitat que hem creat i li hem definit aquest nom. //navegacio a maquines Button maquines = (Button) findViewById(R.id.maquines); maquines.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), maquines.class); startActivityForResult(intent, 0); } }); Tamb\u00e9 podem definir que al fer clic ens obri una url. En aquest cas el bot\u00f3 anomenat tortosa li indiquem que obri la ubicaci\u00f3 que hem extret del Google Maps, en aquest exemple trobem la ubicaci\u00f3 de l'Institut de l'Ebre. protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_maquines); //ubicacio tortosa (INS Ebre) Button tortosa = findViewById(R.id.tortosa); String ubitortosa = \"https://www.google.es/maps/place/Institut+de+L'Ebre/@40.8148269,0.513078,17z/data=!3m1!4b1!4m5!3m4!1s0x12a0e4bd4079a9d1:0x253c0ed9489c50f8!8m2!3d40.8148269!4d0.5152667\"; tortosa.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Uri uri = Uri.parse(ubitortosa); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); } }); 10.4. Mostrar text Per a mostrar text a la pantalla ho escrivim al fitxer .xml , ho indiquem amb l'etiqueta TextView i definim la id, la dist\u00e0ncia sobre els marges, el text que mostrar\u00e0 per pantalla i la mida del text. <TextView android:id=\"@+id/CES\" android:layout_width=\"132dp\" android:layout_height=\"68dp\" android:text=\"C.E.S\" android:textAlignment=\"center\" android:textSize=\"50sp\" app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintHorizontal_bias=\"0.498\" app:layout_constraintLeft_toLeftOf=\"parent\" app:layout_constraintRight_toRightOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:layout_constraintVertical_bias=\"0.057\" /> 10.5. Insertar una imatge Per a mostrar una imatge a la pantalla ho escrivim al fitxer .xml , ho indiquem amb l'etiqueta ImageView i definim la id de la imatge, la seva mida i el nom de la imatge, que ha d'estar situada dintre de la capreta drawable, situada a la carpeta on tenim el nostre projecte. <ImageView android:id=\"@+id/imageView\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginTop=\"68dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/maquina_expenedora\" /> 11. C\u00f2pies de seguretat Les c\u00f2pies de seguretat s\u00f3n un recurs molt important de cara a un futur accident. Si necessitem recuperar alguna dada degut a alguna causa aquesta \u00e9s la manera m\u00e9s apropiada de fer-ho. Si no disposem d'aquestes c\u00f2pies probablement ens sigui impossible recuperar algun contingut perdut o que hagi sofert algun dany. 11.1. C\u00f2pies de seguretat al n\u00favol Si realitzem c\u00f2pies de seguretat i les guardem al mateix dispositiu des d'on \u00e9s creen, aix\u00f2 no ens serveix de gaire, ja que si el dispositiu principal falla, tamb\u00e9 perdrem les c\u00f2pies que tinguem generades en aquest. Aix\u00f2 \u00e9s pot solucionar realitzant les c\u00f2pies de seguretat al n\u00favol. L'avantatja \u00e9s que aquestes c\u00f2pies es guardaran fora del dispositiu on es generen i si aquest falla les podrem recuperar sense cap tipus de problema. 11.1.1. Instal\u00b7laci\u00f3 Rclone Per muntar les c\u00f2pies al n\u00favol i tindre-les a un lloc m\u00e9s segur, el que hem fet ha sigut utilitzar l\u2019eina \"Rclone\" . Aquesta eina ens permet crear un punt de muntatge al nostre compte de \"Drive\" dins la pr\u00f2pia Raspberry. Comen\u00e7ant amb la instal\u00b7laci\u00f3, el que tenim que fer primer \u00e9s situar-nos dins de \"/tmp\" . Ara ens descarregarem l\u2019eina. Tenim dos opcions, fer-ho amb l\u2019ordre \"apt-get install rclone\" o descarregar-nos la versi\u00f3 m\u00e9s recent des de la seva p\u00e0gina web. Hem escollit descarregar la versi\u00f3 de la web ja que \u00e9s la que est\u00e0 m\u00e9s actualitzada. 11.1.2. Configuraci\u00f3 compte de Google Com que realitzarem les copies al \"Drive\" , tindrem que configurar el nostre compte per permetre aquesta acci\u00f3. Per fer-ho, obrirem la consola de desenvolupador de Google i entrarem amb el nostre compte. Tindrem que crear un nou projecte. A nosaltres ja ens apareix creat perqu\u00e8 estem realitzant les captures despr\u00e9s d\u2019haver-lo fet. Li donarem un nom i el crearem. Ara anirem a la pestanya \"Habilitar API y servicios\" . A la barra de cerca buscarem \"Drive\" i seleccionarem el \"Google Drive API\" . Un cop seleccionat l\u2019habilitarem fent clic sobre \"Habilitar\" . A l\u2019habilitar la \"API\" ens portar\u00e0 dins d\u2019aquesta. Ens dirigirem a l\u2019apartat \"Credenciales\" . Ens sortir\u00e0 una alerta que ens demana configurar \"pantalla de consentimiento de Oauth\" . Farem clic a sobre per configurar-la. L\u2019\u00fanic que tindrem que fer ser\u00e0 indicar l\u2019\u00fas que tindr\u00e0, en aquest cas \"Interno\" i donar-li el nom i un correu electr\u00f2nic. Les altres opcions les deixarem per defecte. Ara tornarem a l\u2019apartat \"Credenciales\" i farem clic sobre \"Crear credenciales\" per crear-les. Veurem que ens apareixen diferents opcions, haurem d\u2019escollir \"ID de cliente de OAuth\" . Seleccionarem el tipus d\u2019aplicaci\u00f3, en aquest cas \"App de escritorio\" i li donarem un nom. Un cop creada ens apareixer\u00e0 una finestra en la qual ens mostra un \"ID\" i una contrasenya. 11.1.3. Configuraci\u00f3 Rclone Quan tinguem el client creat, tornarem a la raspberry per realitzar la configuraci\u00f3 pertinent al \"rclone\" . Executarem l\u2019ordre \"rclone config\" per comen\u00e7ar amb la configuraci\u00f3. Se\u2019ns obrir\u00e0 un assistent el qual ens comen\u00e7ar\u00e0 a fer preguntes. Anirem contestant amb la informaci\u00f3 pertinent. Ens apareixer\u00e0 un entorn similar al seg\u00fcent: Al acabar la configuraci\u00f3 tornarem a executar l\u2019ordre \"rclone config\" per veure que s\u2019ha creat correctament. 11.1.4. Muntar directori autom\u00e0ticament Per a muntar el directori fem servir l\u2019ordre \"rclone mount\" , la qual hem posat a un script. Posteriorment aquest script l\u2019hem afegit al crontab per a que el directori es munti autom\u00e0ticament cada vegada que s\u2019engega el dispositiu. Si ens dirigim al punt de muntatge, podem veure com ens apareix el contingut del Drive al qual ho hem vinculat. 11.2. C\u00f2pies de seguretat del sistema operatiu En un principi vam pensar de realitzar c\u00f2pies de seguretat peri\u00f2diques de tot el sistema operatiu, per\u00f2 despr\u00e9s ens en vam donar compte de que aquestes tardaven molt en realitzar-se i mentre s'estaven fent la Raspberry sofria bastant, ja que apart de realitzar la c\u00f2pia tamb\u00e9 est\u00e0 executant altres serveis i scripts. Per solucionar aix\u00f2, vam decidir que la manera m\u00e9s correcta seria realitzar una c\u00f2pia del sistema complet amb tots els serveis instal\u00b7lats per tindre una base i si es necessites instal\u00b7lar de nou, nom\u00e9s caldria afegir a aquesta c\u00f2pia les c\u00f2pies de la base de dades i la p\u00e0gina web que s'expliquen a sota. Igualment, la manera de realitzar la c\u00f2pia de seguretat del sistema ha sigut mitjan\u00e7ant el seg\u00fcent script basat en \"bash\". #!/bin/bash dd if=/dev/sda of=/home/pi/mnt/gdrive/backup Aquest script ens gener\u00e0 una imatge la qual podem cremar en una altra targeta SD per si la volem clonar o recuperar. La imatge s'envia directament a la carpeta de \"backup\" que tenim al \"Drive\" on emmagatzem les c\u00f2pies de seguretat al n\u00favol. 11.3. C\u00f2pies de seguretat de la base de dades Mysqldump \u00e9s una eina imprescindible per fer c\u00f2pies de seguretat a la nostra base de dades, ja que per error, podem esborrar alguna taula, o fins i tot, se'ns pot esborrar la BBDD i no podem recuperar-la. Per poder fer un backup total de la base de dades que estigu\u00e9ssim treballant, el que hem de fer \u00e9s, agafar la base de dades que tingu\u00e9ssim a fer la c\u00f2pia i executar aquesta comanda: -h per posar el host -u l\u2019usuari -p la contrasenya el nom de la BBDD > redirecci\u00f3 el nom del fitxer date +%Y-%m-%d per afegir la data Escrita la comanda i executada, ens crea la c\u00f2pia de la base de dades al directori on es trob\u00e9ssim actualment. Per exemple a l'apartat dels backups Si volgu\u00e9ssim recuperar una c\u00f2pia de seguretat d'una base de dades, nom\u00e9s hem de canviar la redirecci\u00f3 < i deixant les mateixes variables per defecte: 11.4. C\u00f2pies de seguretat de la p\u00e0gina web Mantenir el nostre projecte web, \u00e9s una de les prioritats, i volem assegurar-nos, no perdre cap dada, i si esborrem qualsevol cosa, fer una c\u00f2pia de seguretat. En laravel, hem d'instal\u00b7lar el composer corresponent als backups, utilitzant aquesta comanda: Seguit, crearem un script, que autom\u00e0ticament, executi les comandes per entrar a la carpeta on es troba el projecte, crear el backup i esperar 2 minuts abans d'executar les seg\u00fcents operacions: A continuaci\u00f3 al script, introdu\u00efm, que entri al directori on es troba la copia de seguretat (comprimida amb .zip), que es faci una c\u00f2pia al directori de backups que tenim destinat i esperi dos minuts. I per finalitzar, torna a entrar dintre del directori del projecte (a la ruta d'on es troba la c\u00f2pia de seguretat) i esborri el .zip: Feta les dos copies de seguretat, establirem que cada dia (a les 3:00 de la matinada i a les 3:05) es facin les copies de seguretat. Utilitzarem el crontab per fer-ho: 12. Manuals d'usuari 12.1. P\u00e0gina web P\u00e0gina d'inici Quan ens dirigim a la p\u00e0gina web el primer que veurem ser\u00e0 el seg\u00fcent: Dalt de tot, ens apareix un men\u00fa amb els apartats Inici, Qui som?, Projecte, Contacta'ns i Login. Una mica m\u00e9s a baix veurem el t\u00edtol, una petita descripci\u00f3 i el bot\u00f3 \"Informat\". Aquest bot\u00f3 ens dirigeix a l'apartat Projecte, en el qual s'explica m\u00e9s en detall la idea d'aquest. Tornant al men\u00fa de dalt, cada una de les opcions ens portar\u00e0 a un lloc diferent. El contingut de cadascuna d'aquestes \u00e9s el seg\u00fcent: Inici Ens portar\u00e0 dalt de tot, es a dir, a la p\u00e0gina que veiem quan entrem a la web. Qui som? Aquesta opci\u00f3 ens mostra un apartat dedicat a una breu descripci\u00f3 dels integrants del projecte i una breu introducci\u00f3 d'aquest. Projecte Aqu\u00ed podrem veure una descripci\u00f3 del projecte m\u00e9s detallada. Contacta'ns Ens mour\u00e0 al peu de la p\u00e0gina on hi ha diferents formes de contactar amb nosaltres. Ja sigui per contractar la idea o per algun dubte. Login Si ja disposem del producte a les nostres mans, llavors tindrem un compte per visualitzar les dades de les nostres m\u00e0quines. En aquest cas nom\u00e9s caldr\u00e0 iniciar sessi\u00f3 amb aquest compte i ja tindrem acc\u00e9s al panell de control. Panell de control Des d'aqu\u00ed podrem visualitzar la temperatura i humitat de la m\u00e0quina, l'estoc dels productes i la ubicaci\u00f3 de la mateixa. El primer que veurem a l'accedir, ser\u00e0 un men\u00fa a l'esquerra amb les m\u00e0quines disponibles per a nosaltres. Dalt veurem un men\u00fa en el qual sabrem amb quin usuari estem logats i fent clic a sobre ens permet tancar la sessi\u00f3 d'aquest. Si entrem dins d'una de les m\u00e0quines, hi trobarem tres apartats: Temperatura i humitat: On mostrar\u00e0 les \u00faltimes 24 dades sobre la temperatura i humitat ordenades de m\u00e9s recents a m\u00e9s antigues. Estoc: Veurem els productes que hi ha a la m\u00e0quina amb l'estoc restant d'aquest i un missatge amb un fons de color que ens indica si est\u00e0 ple o buit passant per mitat d'estoc i poc estoc. Ubicaci\u00f3: Sabrem la localitzaci\u00f3 exacta de la m\u00e0quina mitjan\u00e7ant un mapa del Google Maps. 12.2. Aplicaci\u00f3 m\u00f2bil Un cop instal\u00b7lada l\u2019app trobarem una pantalla on tenim tres botons, un on \u00e9s mostrara la ubicaci\u00f3 de les nostres m\u00e0quines, un on podem veure els productes disponibles i finalment un \u00faltim que tenim una breu descripci\u00f3 de qui som. Si accedim a les m\u00e0quines ens mostrara la seg\u00fcent pantalla, on trobarem les ubicacions de les nostres m\u00e0quines. A la part superior esquerra trobem un bot\u00f3 per a tornar a la pantalla inicial. Per arribar-hi a elles hem de pr\u00e9mer sobre el bot\u00f3 de la ubicaci\u00f3 desitjada. En aquest cas hem decidit anar a la ubicaci\u00f3 de Tortosa i ens obrir\u00e0 el google maps on podrem seleccionar l\u2019opci\u00f3 que ens indique fins el dest\u00ed, compartir la ubicaci\u00f3 i guardar-la per a pr\u00f2ximes la propera vegada. En aquesta pantalla trobem una breu descripci\u00f3 sobre qui som, on expliquem breument en que consisteix el nostre projecte. En l\u2019apartat de productes podem veure de tots els que disposem lliscant cap avall. En el cas de voler consultar informaci\u00f3 del producte hem de fer clic a al bot\u00f3 de sota la imatge. Baix de tot disposem d\u2019un bot\u00f3 per tornar enrere, a la primera pantalla de l\u2019app. En aquest cas hem volgut consultar informaci\u00f3 sobre un refresc i ens mostra el que es una beguda, els ingredients que la componen per si alg\u00fa te alguna al\u00b7l\u00e8rgia pugui saber si ho pot consumir o no. Tamb\u00e9 trobem una breu descripci\u00f3 i finalment el preu. Disposem un bot\u00f3 per a tornar enrere a la pantalla dels productes. 13. Webgrafia Team, M. (n.d.). MkDocs . Mkdocs. https://www.mkdocs.org/ Primeros pasos con MkDocs - Creando este sitio . (n.d.). cuadernosdenotas.github. https://cuadernosdenotas.github.io/creandoestesitio/007MkDocs.html The Raspberry Pi Foundation. (n.d.). Raspberry Pi 2 Model B . Raspberry Pi. https://www.raspberrypi.org/products/raspberry-pi-2-model-b/ Zorrilla, V. A. P. B. J. (n.d.). Raspberry Pi \u2013 Conectando un sensor de temperatura y humedad DHT11 \u2013 Internet de las Cosas . internetdelascosas. https://www.internetdelascosas.cl/2017/05/19/raspberry-pi-conectando-un-sensor-de-temperatura-y-humedad-dht11/ Campbell, S. (2020, July 15). How to Set Up the DHT11 Humidity Sensor on the Raspberry Pi . Circuit Basics. https://www.circuitbasics.com/how-to-set-up-the-dht11-humidity-sensor-on-the-raspberry-pi/ F. (2020, December 25). Raspberry Pi: Measure Humidity and Temperature with DHT11/DHT22 . Raspberry Pi Tutorials. https://tutorials-raspberrypi.com/raspberry-pi-measure-humidity-temperature-dht11-dht22/ C. (2015, July 16). Sensores de humedad y temperatura DHT11 y DTH22 en la Raspberry Pi | Carlini\u2019s Blog . carlini. http://carlini.es/sensores-de-humedad-y-temperatura-dht11-y-dth22-en-la-raspberry-pi/ R. (2019, September 26). C\u00f3mo usar un sensor de distancia HC-SR04 con tu Raspberry Pi . Descubrearduino.com. https://descubrearduino.com/hc-sr04-con-tu-raspberry-pi/ Garc\u00eda, S. (2021, February 24). C\u00f3mo conectar un sensor ultras\u00f3nico HC-SR04 a Raspberry Pi . 330ohms. https://blog.330ohms.com/2020/06/17/como-conectar-un-sensor-ultrasonico-a-raspberry-pi/ F. (2015, November 11). Using a Raspberry Pi distance sensor (ultrasonic sensor HC-SR04) . Raspberry Pi Tutorials. https://tutorials-raspberrypi.com/raspberry-pi-ultrasonic-sensor-hc-sr04/ Hut, T. P. (2013, October 22). HC-SR04 Ultrasonic Range Sensor on the Raspberry Pi . The Pi Hut. https://thepihut.com/blogs/raspberry-pi-tutorials/hc-sr04-ultrasonic-range-sensor-on-the-raspberry-pi Instructables. (2019, November 14). Distance Sensing With Raspberry Pi and HC-SR04 . https://www.instructables.com/Distance-Sensing-With-Raspberry-Pi-and-HC-SR04/ G. (2019a, December 7). Raspberry Pi Distance Sensor using the HC-SR04 . Pi My Life Up. https://pimylifeup.com/raspberry-pi-distance-sensor/ The Raspberry Pi Foundation. (n.d.). Operating system images \u2013 . Raspberry Pi. https://www.raspberrypi.org/software/operating-systems/ Seguridad en la Raspberry Pi . (n.d.). nacholoop.github. https://nacholoop.github.io/enigma/seguridad.html#consejos L. (2020, January 21). C\u00f3mo instalar MySQL en Raspberry Pi . Luis Llamas. https://www.luisllamas.es/como-instalar-mysql-en-raspberry-pi/ Meque, R. (2018, June 14). Using Raspberry Pi for Laravel developing - Ronie Meque . Medium. https://medium.com/@roniemeque/using-raspberry-pi-for-laravel-developing-30dabcdeba43 Installation - Laravel - The PHP Framework For Web Artisans . (n.d.). Laravel. https://laravel.com/docs/7.x/ lesson-4-save-raspberry-pi-sensor-data-to-mysql-database | jupyter notebooks gallery . (n.d.). Notebook. https://notebook.community/richjimenez/mysql-data-raspberry-pi/deliver/lesson-4-save-raspberry-pi-sensor-data-to-mysql-database E. (2021, February 9). Setup a Raspberry Pi MYSQL Database . Pi My Life Up. https://pimylifeup.com/raspberry-pi-mysql/ E. (2021b, February 11). How to Install PHPMyAdmin on the Raspberry Pi . Pi My Life Up. https://pimylifeup.com/raspberry-pi-phpmyadmin/ D. (2021a, February 27). C\u00f3mo hacer backups de MySQL/MariaDB con el comando mysqldump . daniloaz.com. https://www.daniloaz.com/es/como-hacer-backups-de-mysql-mariadb-con-el-comando-mysqldump/ Klauser, A. (2020, May 31). Mounting Google Drive on Raspberry Pi - Artur Klauser . Medium. https://medium.com/@artur.klauser/mounting-google-drive-on-raspberry-pi-f5002c7095c2 Team, C. (2019, August 16). Clone Micro SD Card [Raspberry Pi, Linux, dd] . CYBERPUNK. https://www.cyberpunk.rs/clone-micro-sd-card UPC - EETAC - DEEL - Sistemes digitals - digsys.upc.edu - curs de Raspberry Pi . (n.d.). digsys.upc. http://digsys.upc.edu/rpi/index.html UPC - EETAC - DEEL - Sistemes digitals - digsys.upc.edu - curs de Raspberry Pi . (n.d.). digsys.upc. http://digsys.upc.edu/rpi/workshop/workshop.html UPC - EETAC - DEEL - Sistemes digitals - digsys.upc.edu - curs de Raspberry Pi . (n.d.-b). digsys.upc. http://digsys.upc.es/rpi/programari.html Rasberry PI - instalaci\u00f3n y configuraci\u00f3n de red [Bricolabs Wiki] . (n.d.). bricolabs. https://bricolabs.cc/wiki/guias/raspberry_pi_-_instalacion_del_sistema_operativo_y_configuracion_de_red#descarga Santos, E. (2016, August 13). C\u00f3mo configurar y poner en marcha una Raspberry Pi \u201cpara torpes.\u201d Genbeta. https://www.genbeta.com/paso-a-paso/como-configurar-y-poner-en-marcha-una-raspberry-pi-para-torpes L. (2018, April 15). C\u00f3mo configurar Raspberry Pi con GUI o consola de comandos . Luis Llamas. https://www.luisllamas.es/configurar-raspberry-pi/ Download Android Studio and SDK tools | Android Studio . (n.d.). Android Developers. https://developer.android.com/studio?hl=es&gclid=Cj0KCQjwna2FBhDPARIsACAEc_UNJIbzFyxGURa5NIdP7-367iS2C3ion_MJNMcEN0UdiJQhv-jGW-MaAuegEALw_wcB&gclsrc=aw.ds Documentation | Desarrolladores de Android | . (n.d.). Android Developers. https://developer.android.com/docs?hl=es 25. \u00bf Como usar ScrollView en Android ? (2017, April 3). [Video]. YouTube. https://www.youtube.com/watch?v=huxvGwRtt5Q Android ScrollView Vertical - javatpoint . (n.d.). Www.Javatpoint.Com. https://www.javatpoint.com/android-scrollview-vertical Download Android Studio and SDK tools | Android Studio . (n.d.). Android Developers. https://developer.android.com/studio?hl=es-419 G. (n.d.). Failure [INSTALL_FAILED_MISSING_SHARED_LIBRARY] \u00b7 Issue #72 \u00b7 googlearchive/tango-examples-java . GitHub. https://github.com/googlearchive/tango-examples-java/issues/72 Iniciar Sesi\u00f3n | OpenWebinars . (n.d.). OpenWebinars.net. https://openwebinars.net/accounts/login/?next=/academia/aprende/primera-app-android/8891/ MovilZona. (2016, March 3). Curso de Desarrollo Android. Tema 11: Android Studio: Lanzar un segundo Activity desde otro Activity . https://www.movilzona.es/tutoriales/android/desarrollo/curso-de-desarrollo-android-tema-11-android-studio-lanzar-un-segundo-activity-desde-otro-activity/ pasar de una activity a otra con boton android studio . (2015, December 14). [Video]. YouTube. https://www.youtube.com/watch?v=ej8AdPJp6vE 14. Annex 14.1. Taules base de dades CREATE TABLE projectedb.productes ( id INTEGER PRIMARY KEY, nom VARCHAR(20), pes NUMERIC(3,2), data_compra DATE, stock NUMERIC(3,0), ingredients VARCHAR(100), caducitat DATE, descripcio VARCHAR(100) ); CREATE TABLE projectedb.usuaris ( id INTEGER PRIMARY KEY, usuari VARCHAR(20), email VARCHAR(75), contrasenya VARCHAR(244) ); CREATE TABLE projectedb.administradors ( dni INTEGER PRIMARY KEY, nom VARCHAR(20), cognom VARCHAR(20), contrasenya VARCHAR(244), email VARCHAR(75) ); CREATE TABLE projectedb.maquines ( id INTEGER PRIMARY KEY, ubicacio VARCHAR(20), model VARCHAR(15), temperatura NUMERIC(2,2), id_producte INTEGER, id_usuari INTEGER, dni_administrador INTEGER, CONSTRAINT fk_id_producte_maquines FOREIGN KEY (id_producte) REFERENCES productes(id) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT fk_id_usuari_maquines FOREIGN KEY (id_usuari) REFERENCES usuaris(id) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT fk_dni_administradors_maquines FOREIGN KEY (dni_administrador) REFERENCES administradors(dni) ON DELETE CASCADE ON UPDATE CASCADE ); 14.2. Sensors Sensor de temperatura import Adafruit_DHT import time import RPi.GPIO as GPIO import datetime import MySQLdb #Variables per realitzar la connexio amb la base de dades hostname = '127.0.0.1' username = 'laravel' password = 'alumne' database = 'projectedb' #Port al qual est\u00e0 connectat el sensor dht_sensor_port = 4 #Model del sensor dht_sensor_type = Adafruit_DHT.DHT11 #Recollida d'informacio dels GPIO GPIO.setmode(GPIO.BCM) GPIO.setup(dht_sensor_port, GPIO.IN) #Data now = datetime.datetime.now() date = now.strftime('%d-%m-%Y %H:%M:%S') #Query que farem servir per insertar les dades def insert_record( temp, hum, date ): query = \"INSERT INTO dht11 (temp,hum,date) \" \\ \"VALUES (%s,%s,%s)\" args = (temp,hum,date) #Connexi\u00f3 a la base de dades i execussio de la query de dalt per insertar les dades conn = MySQLdb.connect( host=hostname, user=username, passwd=password, db=database ) cursor = conn.cursor() cursor.execute(query, args) conn.commit() #Bucle per afegir les dades recollides pel sensor a la base de dades corresponent try: while True: hum, temp = Adafruit_DHT.read_retry(dht_sensor_type, dht_sensor_port) now = datetime.datetime.now() date = now.strftime('%d-%m-%Y %H:%M:%S') insert_record(format(temp,'.2f'),format(hum,'.2f'),str(date)) time.sleep(3) #Si parem el programa amb CTRL+C except KeyboardInterrupt: print(\"Parant el programa\") Sensor d'ultrasons #Libraries import RPi.GPIO as GPIO import time import mysql.connector #Configurac\u00f3 GPIO GPIO.setmode(GPIO.BCM) GPIO_TRIGGER = 23 GPIO_ECHO = 24 GPIO.setup(GPIO_TRIGGER, GPIO.OUT) GPIO.setup(GPIO_ECHO, GPIO.IN) def distance(): GPIO.output(GPIO_TRIGGER, True) time.sleep(0.00001) GPIO.output(GPIO_TRIGGER, False) StartTime = time.time() StopTime = time.time() while GPIO.input(GPIO_ECHO) == 0: StartTime = time.time() while GPIO.input(GPIO_ECHO) == 1: StopTime = time.time() TimeElapsed = StopTime - StartTime distance = (TimeElapsed * 34300) / 2 return distance #Connexio a la base de dades mydb = mysql.connector.connect ( host = \"127.0.0.1\", user = \"laravel\", password = \"alumne\", database = \"projectedb\" ) mycursor = mydb.cursor() try: while True: dist = distance() if 0 <= dist <= 8.8: stock = 3 status = \"Stock ple\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif 9 <= dist <= 13.9: stock = 2 status = \"Stock per la mitat\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif 14.2 <= dist <= 18.6: stock = 1 status = \"Stock s'esta esgotant\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif dist >= 18.9: stock = 0 status = \"Stock esgotat\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") time.sleep(1) except KeyboardInterrupt: print(\"\") print(\"Parat per l'usuari\") GPIO.cleanup() 14.3. P\u00e0gina web Vistes Laravel <?php use Illuminate\\Support\\Facades\\Route; use Illuminate\\Support\\Facades\\Auth; use Illuminate\\Support\\Facades\\DB; /* |-------------------------------------------------------------------------- | Web Routes |-------------------------------------------------------------------------- | | Here is where you can register web routes for your application. These | routes are loaded by the RouteServiceProvider within a group which | contains the \"web\" middleware group. Now create something great! | */ Auth::routes(); Route::get('/', function () { return view('inici'); }); Route::get('/home', 'HomeController@index')->name('home'); Route::get('/dashboard', function () { return view('maquina1'); }); P\u00e0gina d'inici <!doctype html> <html lang=\"{{ str_replace('_', '-', app()->getLocale()) }}\"> <head> <meta charset=\"utf-8\" /> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\" /> <meta name=\"description\" content=\"\" /> <meta name=\"author\" content=\"\" /> <title>CES</title> <link rel=\"icon\" type=\"image/x-icon\" href=\"grayscale/assets/img/favicon.ico\" /> <!-- Font Awesome icons (free version)--> <script src=\"https://use.fontawesome.com/releases/v5.15.1/js/all.js\" crossorigin=\"anonymous\"></script> <!-- Google fonts--> <link href=\"https://fonts.googleapis.com/css?family=Varela+Round\" rel=\"stylesheet\" /> <link href=\"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i\" rel=\"stylesheet\" /> <!-- Core theme CSS (includes Bootstrap)--> <link href=\"grayscale/css/styles.css\" rel=\"stylesheet\" /> </head> <body id=\"page-top\"> <!-- Navigation--> <nav class=\"navbar navbar-expand-lg navbar-light fixed-top\" id=\"mainNav\"> <div class=\"container\"> <a class=\"navbar-brand js-scroll-trigger\" href=\"#page-top\">Inici</a> <button class=\"navbar-toggler navbar-toggler-right\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"> Menu <i class=\"fas fa-bars\"></i> </button> <div class=\"collapse navbar-collapse\" id=\"navbarResponsive\"> <ul class=\"navbar-nav ml-auto\"> @guest <li class=\"nav-item\"><a class=\"nav-link js-scroll-trigger\" href=\"#about\">Qui som?</a></li> <li class=\"nav-item\"><a class=\"nav-link js-scroll-trigger\" href=\"#projects\">Projecte</a></li> <li class=\"nav-item\"><a class=\"nav-link js-scroll-trigger\" href=\"#contacte\">Contacta'ns</a></li> <li class=\"nav-item\"><a class=\"nav-link js-scroll-trigger\" href=\"{{ route('login') }}\">{{ __('Login') }}</a></li> @else <li class=\"nav-item dropdown\"> <a id=\"navbarDropdown\" class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" v-pre> {{ Auth::user()->name }} </a> <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\"> <a class=\"dropdown-item\" href=\"{{ route('logout') }}\" onclick=\"event.preventDefault(); document.getElementById('logout-form').submit();\"> {{ __('Logout') }} </a> <form id=\"logout-form\" action=\"{{ route('logout') }}\" method=\"POST\" class=\"d-none\"> @csrf </form> </div> </li> @endguest </ul> </div> </div> </nav> <!-- Masthead--> <header class=\"masthead\"> <div class=\"container d-flex h-100 align-items-center\"> <div class=\"mx-auto text-center\"> <h1 class=\"mx-auto my-0\">CES - Control d'estoc amb sensors</h1><br><br> <h2 class=\"text-white-50 mx-auto mt-2 mb-5\">Una idea pensada per a facilitar la feina als treballadors del m\u00f3n del vending.</h2> <a class=\"btn btn-primary js-scroll-trigger\" href=\"#projects\">Informat</a> </div> </div> </header> <!-- About--> <section class=\"about-section text-center\" id=\"about\"> <div class=\"container\"> <div class=\"row\"> <div class=\"col-lg-8 mx-auto\"> <h2 class=\"text-white mb-4\">Sobre nosaltres</h2> <p class=\"text-white-50\"> Som un grup format per tres estudiants els quals ens ha motivat dur a cap aquesta idea la comoditat dels treballadors. Tamb\u00e9 ens hem decidit per portar-la a cap pensant amb el medi ambient, ja que si es t\u00e9 un control exacte de l'estoc de les m\u00e0quines, el repartidor sap en tot moment quan s'est\u00e0 esgotant un producte i \u00e9s necessari reposar-lo, aix\u00ed, no li cal estar fent viatges sense saber el que realment ha de reposar. </p> </div> </div> <img class=\"img-fluid\" src=\"grayscale/assets/img/confort.png\" alt=\"\" /> </div> </section> <!-- Projects--> <section class=\"projects-section bg-light\" id=\"projects\"> <div class=\"container\"> <!-- Featured Project Row--> <div class=\"row align-items-center no-gutters mb-4 mb-lg-5\"> <div class=\"col-xl-8 col-lg-7\"><img class=\"img-fluid mb-3 mb-lg-0\" src=\"grayscale/assets/img/vending.png\" alt=\"\" /></div> <div class=\"col-xl-4 col-lg-5\"> <div class=\"featured-text text-center text-lg-left\"> <h4>De que va el nostre projecte?</h4> <p class=\"text-black-50 mb-0\"> Consisteix amb la instal\u00b7laci\u00f3 d'uns sensors a les m\u00e0quines de vending per a controlar en tot moment l'estoc de productes del qual disposa aquesta. El treballador podr\u00e0 consultar en tot moment l'estoc disponible. </p> </div> </div> </div> <!-- Project One Row--> <div class=\"row justify-content-center no-gutters mb-5 mb-lg-0\"> <div class=\"col-lg-6\"><img class=\"img-fluid\" width=\"350\" height=\"350\" margin-left=\"10\" src=\"grayscale/assets/img/objectiu.png\" alt=\"\" /></div> <div class=\"col-lg-6\"> <div class=\"bg-black text-center h-100 project\"> <div class=\"d-flex h-100\"> <div class=\"project-text w-100 my-auto text-center text-lg-left\"> <h4 class=\"text-white\">Objectius</h4> <ul class=\"mb-0 text-white-50\"> <li>Millora en la rapidesa del treball.</li> <li>Facilitat per saber quins productes cal reposar.</li> <li>Reducci\u00f3 de costos, ja que el treballador nom\u00e9s \u00e9s despla\u00e7ar\u00e0 quan s'hagi de reposar algun producte.</li> </ul> <hr class=\"d-none d-lg-block mb-0 ml-0\" /> </div> </div> </div> </div> </div> <!-- Project Two Row--> <div class=\"row justify-content-center no-gutters\"> <div class=\"col-lg-6\"><img class=\"img-fluid\" width=\"350\" height=\"350\" src=\"grayscale/assets/img/motivacio.png\" alt=\"\" /></div> <div class=\"col-lg-6 order-lg-first\"> <div class=\"bg-black text-center h-100 project\"> <div class=\"d-flex h-100\"> <div class=\"project-text w-100 my-auto text-center text-lg-right\"> <h4 class=\"text-white\">Motivaci\u00f3</h4> <p class=\"mb-0 text-white-50\"> En aquest projecte pretenem crear un avan\u00e7 per a les empreses que es dediquen a reposar els productes de les m\u00e0quines de vending, facilitant-los aix\u00ed la feina, ja que saben en tot moment quin \u00e9s l'estoc de cada m\u00e0quina i quins productes cal reposar. </p> <hr class=\"d-none d-lg-block mb-0 mr-0\" /> </div> </div> </div> </div> </div> </div> </section> <!--Contacte--> <section class=\"contact-section bg-black\" id=\"contacte\"> <div class=\"container\"> <div class=\"row\"> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-map-marked-alt text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">On estem?</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\">Av. de Crist\u00f2fol Colom, 34, 42, 43500 Tortosa, Tarragona</div> </div> </div> </div> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-envelope text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">Pregunta'ns sense cap comprom\u00eds</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\"><a href=\"#!\">info@ces.com</a></div> </div> </div> </div> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-mobile-alt text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">Truca'ns</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\">977000000</div> </div> </div> </div> </div> <div class=\"social d-flex justify-content-center\"> <a class=\"mx-2\" href=\"#!\"><i class=\"fab fa-twitter\"></i></a> <a class=\"mx-2\" href=\"#!\"><i class=\"fab fa-facebook-f\"></i></a> <a class=\"mx-2\" href=\"#!\" target=\"_blank\"><i class=\"fab fa-instagram\"></i></a> </div> </div> </section> <!-- Footer--> <footer class=\"footer bg-black small text-center text-white-50\"> <div class=\"container\">Copyright \u00a9 CES 2021</div> </footer> <!-- Bootstrap core JS--> <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js\"></script> <!-- Third party plugin JS--> <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js\"></script> <!-- Core theme JS--> <script src=\"grayscale/js/scripts.js\"></script> </body> </html> Panell de control <!DOCTYPE html> <html lang=\"es\"> <head> <meta charset=\"utf-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"> <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\"> <script src=\"{{ asset('js/app.js') }}\" defer></script> <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js\"></script> <script> $(document).ready(function() { setInterval(function() { cache_clear() }, 10000); }); function cache_clear() { window.location.reload(true); } </script> <title>CES Dashboard</title> <!-- Font Awesome Icons --> <link rel=\"stylesheet\" href=\"plugins/fontawesome-free/css/all.min.css\"> <!-- Theme style --> <link rel=\"stylesheet\" href=\"adminlte/css/adminlte.min.css\"> <!-- Google Font: Source Sans Pro --> <link href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700\" rel=\"stylesheet\"> </head> <body class=\"hold-transition sidebar-mini\"> <div class=\"wrapper\"> <!-- Navbar --> <nav class=\"main-header navbar navbar-expand navbar-white navbar-light\"> <!-- Left navbar links --> <ul class=\"navbar-nav\"> <li class=\"nav-item d-none d-sm-inline-block\"> <a href=\"#\" class=\"nav-link\">Inici</a> </li> </ul> <!-- Right navbar links --> <ul class=\"navbar-nav ml-auto\"> <li class=\"nav-item dropdown\"> <a id=\"navbarDropdown\" class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" v-pre> {{ Auth::user()->name }} </a> <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\"> <a class=\"dropdown-item\" href=\"{{ route('logout') }}\" onclick=\"event.preventDefault(); document.getElementById('logout-form').submit();\"> {{ __('Logout') }} </a> <form id=\"logout-form\" action=\"{{ route('logout') }}\" method=\"POST\" class=\"d-none\"> @csrf </form> </div> </li> </ul> </nav> <!-- Main Sidebar Container --> <aside class=\"main-sidebar sidebar-dark-primary elevation-4\"> <!-- Brand Logo --> <a href=\"/dashboard\" class=\"brand-link\"> <span class=\"brand-text font-weight-light\">M\u00e0quines</span> </a> <!-- Sidebar --> <div class=\"sidebar\"> <!-- Sidebar Menu --> <nav class=\"mt-2\"> <ul class=\"nav nav-pills nav-sidebar flex-column\" data-widget=\"treeview\" role=\"menu\" data-accordion=\"false\"> <li class=\"nav-item\"> <a href=\"/dashboard\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #1</p> </a> </li> <li class=\"nav-item\"> <a href=\"#\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #2</p> </a> </li> <li class=\"nav-item\"> <a href=\"#\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #3</p> </a> </li> </ul> </nav> </div> </aside> <!-- Content Wrapper. Contains page content --> <div class=\"content-wrapper\"> <!-- Content Header (Page header) --> <div class=\"content-header\"> <div class=\"container-fluid\"> <div class=\"row mb-2\"> <div class=\"col-sm-6\"> <h1 class=\"m-0 text-dark\">M\u00e0quina #1</h1> </div> </div> </div> </div> <!-- Main content --> <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-body\"> <table class=\"table\"> <thead> <tr> <th scope=\"col\">#</th> <th scope=\"col\">Temperatura</th> <th scope=\"col\">Humitat</th> <th scope=\"col\">Data i hora</th> </tr> </thead> <tbody> <?php $cont = 0; $con = mysqli_connect('127.0.0.1', 'laravel', 'alumne', 'projectedb'); $sql = \"SELECT * FROM dht11 ORDER BY date desc LIMIT 24\"; $result = mysqli_query($con, $sql); foreach ($result as $value) { $cont += 1; echo (\"<tr>\"); echo (\"<td>\" . $cont . \"</td>\"); echo (\"<td>\" . $value[\"temp\"] . \"</td>\"); echo (\"<td>\" . $value[\"hum\"] . \"</td>\"); echo (\"<td>\" . $value[\"date\"] . \"</td>\"); echo (\"</tr>\"); } ?> </tbody> </table> </div> </div> </div> </div> </div> </div> <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-header\"> <h5 class=\"m-0\">Estoc</h5> </div> <div class=\"card-body\"> <!--Fer un foreach per cada producte amb el seu stock--> <table class=\"table\"> <thead> <tr> <th scope=\"col\">#</th> <th scope=\"col\">Producte</th> <th scope=\"col\">Estoc</th> <th scope=\"col\">Estat</th> </tr> </thead> <tbody> <?php $cont = 0; $con = mysqli_connect('127.0.0.1', 'laravel', 'alumne', 'projectedb'); $sql = \"SELECT nom,stock FROM productes\"; $result = mysqli_query($con, $sql); foreach ($result as $value) { $to = \"ferranbertomeu@iesebre.com\"; $cont += 1; echo (\"<tr>\"); echo (\"<td>\" . $cont . \"</td>\"); echo (\"<td>\" . $value[\"nom\"] . \"</td>\"); echo (\"<td>\" . $value[\"stock\"] . \"</td>\"); if ($value[\"stock\"] == 0) { $subject = \"S'ha esgotat Aigua petita!\"; $message = \"S'ha esgotat Aigua petita, s'ha d'anar a reposar el producte urgentment!\"; echo (\"<td style=\" . \"background-color:#FF4C4C\" . \">\" . \"No queden productes!\" . \"</td>\"); mail($to, $subject, $message); } elseif ($value[\"stock\"] == 1) { $subject = \"S'est\u00e0 a punt d'esgotar Aigua petita!\"; $message = \"S'est\u00e0 a punt d'esgotar Aigua petita, s'ha d'anar a reposar el producte!\"; echo (\"<td style=\" . \"background-color:#FFB44E\" . \">\" . \"S'est\u00e0 esgotant!\" . \"</td>\"); mail($to, $subject, $message); } elseif ($value[\"stock\"] == 2) { echo (\"<td style=\" . \"background-color:#F5FF5B\" . \">\" . \"Queden la meitat de productes\" . \"</td>\"); } elseif ($value[\"stock\"] == 3) { echo (\"<td style=\" . \"background-color:#9EFF5B\" . \">\" . \"Estoc ple\" . \"</td>\"); } echo (\"</tr>\"); } ?> </tbody> </table> </div> </div> </div> </div> </div> </div> <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-header\"> <h5 class=\"m-0\">Ubicaci\u00f3</h5> </div> <div class=\"card-body\"> <iframe src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3019.597814021702!2d0.5130780156795304!3d40.81483093925471!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12a0e4bd4079a9d1%3A0x253c0ed9489c50f8!2sInstitut%20de%20L&#39;Ebre!5e0!3m2!1sca!2ses!4v1620804506220!5m2!1sca!2ses\" width=\"600\" height=\"450\" style=\"border:0;\" allowfullscreen=\"\" loading=\"lazy\"></iframe> </div> </div> </div> </div> </div> </div> </div> <!-- Control Sidebar --> <aside class=\"control-sidebar control-sidebar-dark\"> <!-- Control sidebar content goes here --> <div class=\"p-3\"> <h5>Title</h5> <p>Sidebar content</p> </div> </aside> <!-- Main Footer --> <footer class=\"main-footer\"> <!-- Default to the left --> <strong>Copyright &copy; 2021</strong> </footer> </div> <!-- REQUIRED SCRIPTS --> <!-- jQuery --> <script src=\"plugins/jquery/jquery.min.js\"></script> <!-- Bootstrap 4 --> <script src=\"plugins/bootstrap/js/bootstrap.bundle.min.js\"></script> <!-- AdminLTE App --> <script src=\"adminlte/js/adminlte.min.js\"></script> </body> </html> 14.4. Aplicaci\u00f3 web Main Activity <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".MainActivity\"> <TextView android:id=\"@+id/CES\" android:layout_width=\"132dp\" android:layout_height=\"68dp\" android:text=\"C.E.S\" android:textAlignment=\"center\" android:textSize=\"50sp\" app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintHorizontal_bias=\"0.498\" app:layout_constraintLeft_toLeftOf=\"parent\" app:layout_constraintRight_toRightOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:layout_constraintVertical_bias=\"0.057\" /> <TextView android:id=\"@+id/ces2\" android:layout_width=\"366dp\" android:layout_height=\"111dp\" android:layout_marginStart=\"20dp\" android:layout_marginTop=\"104dp\" android:text=\"Control d'Estoc amb Sensors\" android:textAlignment=\"center\" android:textSize=\"30sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/maquines\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"24dp\" android:layout_marginTop=\"544dp\" android:text=\"M\u00e0quines\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/productes\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"252dp\" android:layout_marginTop=\"544dp\" android:text=\"Productes\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/quisom\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"148dp\" android:layout_marginTop=\"604dp\" android:text=\"Qui som?\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginTop=\"68dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/maquina_expenedora\" /> </androidx.constraintlayout.widget.ConstraintLayout> package com.example.appces; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.os.Bundle; import android.view.View; import android.widget.Button; public class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); //navegacio a maquines Button maquines = (Button) findViewById(R.id.maquines); maquines.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), maquines.class); startActivityForResult(intent, 0); } }); //navegacio a qui som Button quisom = (Button) findViewById(R.id.quisom); quisom.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), quisom.class); startActivityForResult(intent, 0); } }); //navegacio a productes Button productes = (Button) findViewById(R.id.productes); productes.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View p) { Intent intent = new Intent (p.getContext(), productes.class); startActivityForResult(intent, 0); } }); } } Qui som? <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".quisom\"> <TextView android:id=\"@+id/titol\" android:layout_width=\"179dp\" android:layout_height=\"53dp\" android:layout_marginStart=\"116dp\" android:layout_marginTop=\"63dp\" android:text=\"QUI SOM?\" android:textAlignment=\"center\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/text_quisom\" android:layout_width=\"305dp\" android:layout_height=\"65dp\" android:layout_marginStart=\"52dp\" android:layout_marginTop=\"176dp\" android:gravity=\"center\" android:text=\"Som tres alumnes de 2n d'ASIX, Pau Emili Mestres, Ferran Bertomeu i Oriol Morera, que hem desenvolupat el projecte C.E.S\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/text2_quisom\" android:layout_width=\"304dp\" android:layout_height=\"181dp\" android:layout_marginStart=\"52dp\" android:layout_marginTop=\"284dp\" android:gravity=\"center\" android:text=\"Aquest projecte consisteix en la instal\u00b7laci\u00f3 de sensors a les m\u00e0quines expenedores i quan quedin pocs productes enviar\u00e0 un av\u00eds al responsable per a reposar l\u2019estoc. Tota aquesta informaci\u00f3 quedar\u00e0 registrada en un base de dades. Es podr\u00e0 consultar l\u2019estoc disponible a la nostra p\u00e0gina web\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/atras\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"155dp\" android:layout_marginTop=\"531dp\" android:text=\"Enrere\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> </androidx.constraintlayout.widget.ConstraintLayout> package com.example.appces; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.os.Bundle; import android.view.View; import android.widget.Button; public class quisom extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_quisom); //navegacio atras Button atras = (Button) findViewById(R.id.atras); atras.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), MainActivity.class); startActivityForResult(intent, 0); } }); } } Maquines <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".maquines\"> <TextView android:id=\"@+id/titolmaquines\" android:layout_width=\"375dp\" android:layout_height=\"87dp\" android:layout_marginStart=\"16dp\" android:layout_marginTop=\"80dp\" android:text=\"On estan les nostres m\u00e0quines?\" android:textAlignment=\"center\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/tortosa\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"44dp\" android:layout_marginTop=\"360dp\" android:text=\"Tortosa\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/roquetes\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"140dp\" android:layout_marginTop=\"572dp\" android:text=\"Roquetes\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/jesus\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"252dp\" android:layout_marginTop=\"360dp\" android:text=\"Jes\u00fas\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imgTortosa\" android:layout_width=\"157dp\" android:layout_height=\"138dp\" android:layout_marginStart=\"24dp\" android:layout_marginTop=\"208dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/tortosa\" /> <ImageView android:id=\"@+id/imgRoquetes\" android:layout_width=\"174dp\" android:layout_height=\"135dp\" android:layout_marginStart=\"104dp\" android:layout_marginTop=\"440dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/roquetes\" /> <ImageView android:id=\"@+id/imgJesus\" android:layout_width=\"164dp\" android:layout_height=\"135dp\" android:layout_marginStart=\"212dp\" android:layout_marginTop=\"208dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/jesus\" /> <Button android:id=\"@+id/atrasmaquines\" android:layout_width=\"99dp\" android:layout_height=\"40dp\" android:layout_marginStart=\"16dp\" android:layout_marginTop=\"16dp\" android:text=\"Enrere\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> </androidx.constraintlayout.widget.ConstraintLayout> package com.example.appces; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.net.Uri; import android.os.Bundle; import android.view.View; import android.widget.Button; public class maquines extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_maquines); //ubicacio tortosa (INS Ebre) Button tortosa = findViewById(R.id.tortosa); String ubitortosa = \"https://www.google.es/maps/place/Institut+de+L'Ebre/@40.8148269,0.513078,17z/data=!3m1!4b1!4m5!3m4!1s0x12a0e4bd4079a9d1:0x253c0ed9489c50f8!8m2!3d40.8148269!4d0.5152667\"; tortosa.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Uri uri = Uri.parse(ubitortosa); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); } }); //ubicacio roquetes Button roquetes = findViewById(R.id.roquetes); String ubiroquetes = \"https://www.google.com/maps/place/Roquetes,+Tarragona/@40.8216415,0.4975453,16z/data=!3m1!4b1!4m5!3m4!1s0x12a0e4eea8dc9235:0xd9fd9c286a33d8c6!8m2!3d40.8198735!4d0.5009781\"; roquetes.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Uri uri = Uri.parse(ubiroquetes); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); } }); //ubicacio jesus Button jesus = findViewById(R.id.jesus); String ubijesus = \"https://www.google.com/maps/place/43590+Jes%C3%BAs,+Tarragona/@40.8275406,0.4982545,15z/data=!3m1!4b1!4m5!3m4!1s0x12a0e48d350eb805:0xed6e5390564f796e!8m2!3d40.8270019!4d0.5079905\"; jesus.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Uri uri = Uri.parse(ubijesus); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); } }); //navegacio atras Button atrasmaquines = (Button) findViewById(R.id.atrasmaquines); atrasmaquines.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), MainActivity.class); startActivityForResult(intent, 0); } }); } } <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".quisom\"> <TextView android:id=\"@+id/titol\" android:layout_width=\"179dp\" android:layout_height=\"53dp\" android:layout_marginStart=\"116dp\" android:layout_marginTop=\"63dp\" android:text=\"QUI SOM?\" android:textAlignment=\"center\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/text_quisom\" android:layout_width=\"305dp\" android:layout_height=\"65dp\" android:layout_marginStart=\"52dp\" android:layout_marginTop=\"176dp\" android:gravity=\"center\" android:text=\"Som tres alumnes de 2n d'ASIX, Pau Emili Mestres, Ferran Bertomeu i Oriol Morera, que hem desenvolupat el projecte C.E.S\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/text2_quisom\" android:layout_width=\"304dp\" android:layout_height=\"181dp\" android:layout_marginStart=\"52dp\" android:layout_marginTop=\"284dp\" android:gravity=\"center\" android:text=\"Aquest projecte consisteix en la instal\u00b7laci\u00f3 de sensors a les m\u00e0quines expenedores i quan quedin pocs productes enviar\u00e0 un av\u00eds al responsable per a reposar l\u2019estoc. Tota aquesta informaci\u00f3 quedar\u00e0 registrada en un base de dades. Es podr\u00e0 consultar l\u2019estoc disponible a la nostra p\u00e0gina web\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/atras\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"155dp\" android:layout_marginTop=\"531dp\" android:text=\"Enrere\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> </androidx.constraintlayout.widget.ConstraintLayout> package com.example.appces; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.os.Bundle; import android.view.View; import android.widget.Button; public class quisom extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_quisom); //navegacio atras Button atras = (Button) findViewById(R.id.atras); atras.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), MainActivity.class); startActivityForResult(intent, 0); } }); } } Productes <?xml version=\"1.0\" encoding=\"utf-8\"?><RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"> <ScrollView android:layout_marginTop=\"30dp\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:id=\"@+id/scrollView\"> <LinearLayout android:layout_width=\"fill_parent\" android:layout_height=\"fill_parent\" android:orientation=\"vertical\"> <TextView android:id=\"@+id/titol_productes\" android:layout_width=\"360dp\" android:layout_height=\"80dp\" android:layout_gravity=\"center_horizontal\" android:text=\"Els nostres productes\" android:textAppearance=\"?android:attr/textAppearanceMedium\" android:textSize=\"36sp\" /> <ImageView android:id=\"@+id/img_aigua_petita\" android:layout_width=\"wrap_content\" android:layout_height=\"192dp\" android:src=\"@drawable/aigua_petita\" android:textAlignment=\"center\" /> <Button android:id=\"@+id/aigua_petita1\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"aigua petita\" /> <ImageView android:id=\"@+id/imageView8\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:src=\"@drawable/aigua_gran\" /> <Button android:id=\"@+id/aigua_gran\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"aigua gran\" /> <ImageView android:id=\"@+id/imageView7\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:src=\"@drawable/cocacola\" /> <Button android:id=\"@+id/cocacola\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"Coca-cola\" /> <ImageView android:id=\"@+id/imageView4\" android:layout_width=\"match_parent\" android:layout_height=\"166dp\" app:srcCompat=\"@drawable/fanta_taronja\" /> <Button android:id=\"@+id/fantataronja\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"Fanta de Taronja\" /> <ImageView android:id=\"@+id/imageView5\" android:layout_width=\"match_parent\" android:layout_height=\"188dp\" app:srcCompat=\"@drawable/fanta_llima\" /> <Button android:id=\"@+id/fantallima\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"Fanta de Llima\" /> <ImageView android:id=\"@+id/imageView13\" android:layout_width=\"match_parent\" android:layout_height=\"75dp\" app:srcCompat=\"@drawable/filipinos_blancs\" /> <Button android:id=\"@+id/filipinosblancs\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"filipinos blancs\" /> <ImageView android:id=\"@+id/imageView14\" android:layout_width=\"match_parent\" android:layout_height=\"76dp\" app:srcCompat=\"@drawable/filipinos_negres\" /> <Button android:id=\"@+id/filipinosnegres\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"Filipinos negres\" /> <ImageView android:id=\"@+id/imageView9\" android:layout_width=\"match_parent\" android:layout_height=\"176dp\" app:srcCompat=\"@drawable/ruffles_jamon\" /> <Button android:id=\"@+id/ruffles\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"ruffles jam\u00f3n\" /> <ImageView android:id=\"@+id/imageView15\" android:layout_width=\"match_parent\" android:layout_height=\"53dp\" app:srcCompat=\"@drawable/back\" /> <Button android:id=\"@+id/enrere\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:text=\"enrere\" /> </LinearLayout> </ScrollView></RelativeLayout> package com.example.appces;import androidx.appcompat.app.AppCompatActivity;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.widget.Button;public class productes extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_productes); //navegacio a aigua petita Button aigua_petita1 = (Button) findViewById(R.id.aigua_petita1); aigua_petita1.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), botella.class); startActivityForResult(intent, 0); } }); //navegacio a aigua gran Button aigua_gran = (Button) findViewById(R.id.aigua_gran); aigua_gran.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), aiguagran.class); startActivityForResult(intent, 0); } }); //navegacio a cocacola Button cocacola = (Button) findViewById(R.id.cocacola); cocacola.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), cocacola.class); startActivityForResult(intent, 0); } }); //navegacio a fanta de taronja Button fantataronja = (Button) findViewById(R.id.fantataronja); fantataronja.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), fantataronja.class); startActivityForResult(intent, 0); } }); //navegacio a fanta de llima Button fantallima = (Button) findViewById(R.id.fantallima); fantallima.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), fantallima.class); startActivityForResult(intent, 0); } }); //navegacio a filipinos blancs Button filipinosblancs = (Button) findViewById(R.id.filipinosblancs); filipinosblancs.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), filipinosblancs.class); startActivityForResult(intent, 0); } }); //navegacio a filipinos negres Button filipinosnegres = (Button) findViewById(R.id.filipinosnegres); filipinosnegres.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), filipinosnegres.class); startActivityForResult(intent, 0); } }); //navegacio a ruffles Button ruffles = (Button) findViewById(R.id.ruffles); ruffles.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), ruffles.class); startActivityForResult(intent, 0); } }); //navegacio atras Button enrere = (Button) findViewById(R.id.enrere); enrere.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), MainActivity.class); startActivityForResult(intent, 0); } }); }} Aigua petita <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".botella\"> <TextView android:id=\"@+id/aiguapetita\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"88dp\" android:layout_marginTop=\"60dp\" android:text=\"AIGUA PETITA\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusAP\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingAP\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"211dp\" android:text=\"Ingredients: Aigua\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descAP\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"268dp\" android:text=\"Descripci\u00f3: Ampolla d'aigua de 0,5L fresca\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/preuAP\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"320dp\" android:text=\"Preu: 0,6\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView2\" android:layout_width=\"223dp\" android:layout_height=\"262dp\" android:layout_marginStart=\"94dp\" android:layout_marginTop=\"359dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/aigua_petita\" /> <Button android:id=\"@+id/atrasbotella\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"160dp\" android:layout_marginTop=\"629dp\" android:text=\"enrere\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /></androidx.constraintlayout.widget.ConstraintLayout> Aigua gran <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".aiguagran\"> <TextView android:id=\"@+id/preuAP2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"320dp\" android:text=\"Preu: 1\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descAG\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"268dp\" android:text=\"Descripci\u00f3: Ampolla d'aigua de 1,5L fresca\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingAG2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"211dp\" android:text=\"Ingredients: Aigua\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusAG\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/titolAG\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"100dp\" android:layout_marginTop=\"60dp\" android:text=\"AIGUA GRAN\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView3\" android:layout_width=\"227dp\" android:layout_height=\"205dp\" android:layout_marginStart=\"92dp\" android:layout_marginTop=\"388dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/aigua_gran\" /></androidx.constraintlayout.widget.ConstraintLayout> Fanta de llima <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".fantallima\"> <TextView android:id=\"@+id/preuFLL\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"412dp\" android:text=\"Preu: 1,6\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descFLL\" android:layout_width=\"332dp\" android:layout_height=\"48dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"340dp\" android:text=\"Descripci\u00f3: Beguda refrescant de suc de llima, amb sucres i edulcorants.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFLL\" android:layout_width=\"331dp\" android:layout_height=\"112dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"211dp\" android:text=\"Ingredients: Aigua carbonatada, sucres, 6% de suc de llimona, aromes, acidulant E330, conservant E211, antioxidant E300, estabilitzant E414, estabilitzant E445 i colorant E104.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusFLL\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/textView4\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"64dp\" android:layout_marginTop=\"60dp\" android:text=\"FANTA DE LLIMA\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView10\" android:layout_width=\"240dp\" android:layout_height=\"213dp\" android:layout_marginStart=\"85dp\" android:layout_marginTop=\"436dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/fanta_llima\" /></androidx.constraintlayout.widget.ConstraintLayout> Fanta de taronja <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".fantataronja\"> <TextView android:id=\"@+id/preuAP3\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"472dp\" android:text=\"Preu: 1,6\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descAP2\" android:layout_width=\"341dp\" android:layout_height=\"47dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"404dp\" android:text=\"Descripci\u00f3: Beguda refrescant de suc de taronja, amb sucres i edulcorants.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFT\" android:layout_width=\"336dp\" android:layout_height=\"200dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"192dp\" android:text=\"Ingredients: Aigua carbonatada, 8% de suc de taronja a partir de concentrat, sucre, acidulants: \u00e0cid c\u00edtric i \u00e0cid m\u00e0lic, estabilitzants: E-414, E-444 i E-445, conservador: E-202, edulcorants: E-950 i aspartam, antioxidant: \u00e0cid asc\u00f2rbic, aromes naturals de taronja i altres aromes naturals i colorant: E-160a. Cont\u00e9 una font de fenilalanina.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusAP2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/fantat\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"60dp\" android:text=\"FANTA DE TARONJA\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView11\" android:layout_width=\"212dp\" android:layout_height=\"196dp\" android:layout_marginStart=\"99dp\" android:layout_marginTop=\"505dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/fanta_taronja\" /></androidx.constraintlayout.widget.ConstraintLayout> Fanta de taronja <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".fantataronja\"> <TextView android:id=\"@+id/preuAP3\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"472dp\" android:text=\"Preu: 1,6\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descAP2\" android:layout_width=\"341dp\" android:layout_height=\"47dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"404dp\" android:text=\"Descripci\u00f3: Beguda refrescant de suc de taronja, amb sucres i edulcorants.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFT\" android:layout_width=\"336dp\" android:layout_height=\"200dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"192dp\" android:text=\"Ingredients: Aigua carbonatada, 8% de suc de taronja a partir de concentrat, sucre, acidulants: \u00e0cid c\u00edtric i \u00e0cid m\u00e0lic, estabilitzants: E-414, E-444 i E-445, conservador: E-202, edulcorants: E-950 i aspartam, antioxidant: \u00e0cid asc\u00f2rbic, aromes naturals de taronja i altres aromes naturals i colorant: E-160a. Cont\u00e9 una font de fenilalanina.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusAP2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/fantat\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"60dp\" android:text=\"FANTA DE TARONJA\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView11\" android:layout_width=\"212dp\" android:layout_height=\"196dp\" android:layout_marginStart=\"99dp\" android:layout_marginTop=\"505dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/fanta_taronja\" /></androidx.constraintlayout.widget.ConstraintLayout> Filipinos blancs <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".filipinosblancs\"> <TextView android:id=\"@+id/preuFB\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"532dp\" android:text=\"Preu: 1\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descFB\" android:layout_width=\"327dp\" android:layout_height=\"84dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"432dp\" android:text=\"Descripci\u00f3: Galetes en forma d'aro, recobertes de xocolata blanca, d'aproximadament uns 4 cm de di\u00e0metre.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/fb\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"48dp\" android:layout_marginTop=\"56dp\" android:text=\"FILIPINOS BLANCS\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFB\" android:layout_width=\"332dp\" android:layout_height=\"215dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"196dp\" android:text=\"Ingredients: Xocolata blanca 45% (sucre, mantega de cacau, llet desnatada en pols, lactosa, s\u00e8rum de llet en pols, greix lacti, emulgent: lecitina de gira-sol, aroma), farina de blat, sucre, oli de palma, cacau desgreixat en pols 3%, xarop de glucosa i fructosa, gasificants (bicarbonats am\u00f2nic i s\u00f2dic), sal, s\u00e8rum de llet en pols, emulgent (lecitina de soja), antioxidants (e 304, e 306), aroma.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusFB\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Galletes\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView12\" android:layout_width=\"316dp\" android:layout_height=\"147dp\" android:layout_marginStart=\"48dp\" android:layout_marginTop=\"556dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/filipinos_blancs\" /></androidx.constraintlayout.widget.ConstraintLayout> Filipinos negres <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".filipinosnegres\"> <TextView android:id=\"@+id/preuFN\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"508dp\" android:text=\"Preu: 1\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descFN\" android:layout_width=\"337dp\" android:layout_height=\"67dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"412dp\" android:text=\"Descripci\u00f3: Galetes en forma d'aro, recobertes de xocolata negra, d'aproximadament uns 4 cm de di\u00e0metre.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFN\" android:layout_width=\"335dp\" android:layout_height=\"192dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"196dp\" android:text=\"Ingredients: Farina de BLAT, xocolata el 39% (sucre, pasta de cacau, mantega de cacau, LACTOSA, greix L\u00c0CTIA, emulgent: lecitina de gira-sol, aroma), oli de palma, sucre, mid\u00f3 de BLAT, LLET en pols, gasificants (carbonats de amoni i sodi, tartrat monopot\u00e0ssic), xarop de glucosa i fructosa, sal, antioxidants (e 304, e 306), aromes. Pot contenir SOJA, OUS.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusFN\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Galletes\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/FN\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"48dp\" android:layout_marginTop=\"60dp\" android:text=\"FILIPINOS NEGRES\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView16\" android:layout_width=\"267dp\" android:layout_height=\"89dp\" android:layout_marginStart=\"72dp\" android:layout_marginTop=\"555dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/filipinos_negres\" /></androidx.constraintlayout.widget.ConstraintLayout> Ruffles jam\u00f3n <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".ruffles\"> <TextView android:id=\"@+id/preuAP4\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"436dp\" android:text=\"Preu: 1,2\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descRF\" android:layout_width=\"337dp\" android:layout_height=\"46dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"368dp\" android:text=\"Descripci\u00f3: Patates fregides ondulades amb un sabor intens a pernil\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingRF\" android:layout_width=\"338dp\" android:layout_height=\"139dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"211dp\" android:text=\"Ingredients: Patates, greix vegetal, aroma de pernil (lactosa, potenciadors de sabor (glutamat monos\u00f2dic, inosinato i guanilat dis\u00f3dicos), subst\u00e0ncies aromatitzants, prote\u00efna de soja hidrolitzada, formatge en pols, aroma de fum), sal. Sense gluten.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusRF\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Patates fregides\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/RF\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"64dp\" android:layout_marginTop=\"60dp\" android:text=\"RUFFLES JAM\u00d3N\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView17\" android:layout_width=\"196dp\" android:layout_height=\"204dp\" android:layout_marginStart=\"104dp\" android:layout_marginTop=\"472dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/ruffles_jamon\" /></androidx.constraintlayout.widget.ConstraintLayout> 14.5. C\u00f2pies de seguretat Script muntar directori autom\u00e0ticament #!/bin/bash #Munta la carpeta del drive per a poder afegir o descarregar fitxers rclone mount gdrive: $HOME/mnt/gdrive Script c\u00f2pia de seguretat sistema operatiu #!/bin/bash cd /home/mnt/gdrive/backup dd if=/dev/sda of=/home/pi/mnt/gdrive/backup Script c\u00f2pia de seguretat MySQL #!/bin/bash cd /home/pi/mnt/gdrive/backup mysqldump -hlocalhost -ularavel -palumne projectedb > backup_projecte_`date +%Y-%m-%d`.sql Script c\u00f2pia de seguretat Laravel #!/bin/bash cd /var/www/paginalaravel/webprojecte php artisan backup:run sleep 2m cd /var/www/paginalaravel/webprojecte/storage/app/Laravel cp *.zip /home/pi/mnt/gdrive/backup cd /var/www/paginalaravel/webprojecte/storage/app/Laravel rm *.zip","title":"Documentaci\u00f3"},{"location":"Documentaci%C3%B3/#ces-control-destoc-en-sensors","text":"ASIX Institut de l'Ebre Realitzat per: Oriol Morera Pau Mestres Ferran Bertomeu","title":"CES (Control d'estoc en sensors)"},{"location":"Documentaci%C3%B3/#1-descripcio","text":"Aquest projecte consisteix amb la instal\u00b7laci\u00f3 de sensors a les m\u00e0quines de vending per a controlar en tot moment l'estoc de productes del qual disposa aquesta. El treballador encarregat de la m\u00e0quina, podr\u00e0 consultar en tot moment, mitjan\u00e7ant una p\u00e0gina web, l'estoc disponible. Aix\u00f2 permet agilitzar la feina d'aquest ja que realment sabr\u00e0 si es necessari o no anar a reomplir una m\u00e0quina en concret. La p\u00e0gina web mitjan\u00e7ant la qual el treballador podr\u00e0 consultar l'estoc, tamb\u00e9 inclour\u00e0 altra informaci\u00f3 com ara la temperatura i humitat, i la ubicaci\u00f3 d'aquesta. L'estoc a la p\u00e0gina web es representar\u00e0 amb colors: verd (ple), groc (taronja), groc (poc) i vermell (buit). Tamb\u00e9 s'ha pensat amb el consumidor, aix\u00ed que hem decidit crear tamb\u00e9 una aplicaci\u00f3 m\u00f2bil. Aquesta aplicaci\u00f3 permet a l'usuari consultar la localitzaci\u00f3 de les m\u00e0quines i els productes que aquestes tenen. Pensant amb la gent que pateix algun tipus d'intoler\u00e0ncia hem afegit una descripci\u00f3 dels productes llistant els seus ingredients per a evitar algun accident inesperat.","title":"1. Descripci\u00f3"},{"location":"Documentaci%C3%B3/#2-motivacio","text":"En aquest projecte podem crear un avan\u00e7 per a empreses que distribueixen els productes en aquestes m\u00e0quines, ja que permetr\u00e0 als treballadors tindre un control m\u00e9s prec\u00eds sobre les m\u00e0quies. Aix\u00f2 \u00e9s tradueix en facilitar el treball i un estalvi en temps i recursos a l'empresa. Actualment, amb la situaci\u00f3 que ens trobem, creiem que es una bona inversi\u00f3 (econ\u00f2micament parlant) de cara al futur. En l\u2019\u00e0mbit acad\u00e8mic, la implementaci\u00f3 de la Raspberry Pi \u00e9s una novetat per a nosaltres i creiem que podrem treure-li profit al dispositiu, ja que ens obre moltes portes, tant com per provar els sensors, instal\u00b7lar serveis, etc.","title":"2. Motivaci\u00f3"},{"location":"Documentaci%C3%B3/#3-objectius","text":"\u00c0mbit professional: Millora en la rapidesa del treball Facilitats per saber quin o quins productes s'estan esgotant i cal reposar. Gran efectivitat a l'hora de fer les comandes, ja que en el moment saps el que has d'omplir. Reducci\u00f3 de costs, degut a que el treballador nom\u00e9s es despla\u00e7ar\u00e0 quan sigui necessari reposar algun producte. \u00c0mbit acad\u00e8mic: Administraci\u00f3 i gesti\u00f3 de bases de dades, desenvolupament de serveis, seguretat, fonaments de maquinari i implantaci\u00f3 d'aplicacions web.","title":"3. Objectius"},{"location":"Documentaci%C3%B3/#4-material-utilitzat","text":"Per dur a terme el projecte, hem utilitzat els seg\u00fcents elements: Raspberry Pi 2 Model B: Aquest \u00e9s el \"cor\" del projecte. Sota aquest petit ordenador ser\u00e0 on funcionar\u00e0 tot el programari necessari. Aquest model en concret t\u00e9 unes caracter\u00edstiques bastant limitades, nom\u00e9s disposa de 1GB de mem\u00f2ria RAM, la qual cosa fa que sigui una mica lenta en algunes situacions, per\u00f2, per al que nosaltres la farem servir no es cap inconvenient. Apart del programari, en aquest dispositiu tamb\u00e9 connectarem els sensors que ens brindaran la informaci\u00f3 necess\u00e0ria per dur a cap la idea principal del projecte. Sensor de temperatura i humitat DHT11: Aquest sensor de mida petita, ens permetr\u00e0 saber en tot moment la temperatura i humitat de la m\u00e0quina en la qual el col\u00b7loquem. Funciona amb una connexi\u00f3 de 5V i porta una resist\u00e8ncia interna, la qual cosa ens permet connectar el sensor a la Raspberry sense cap tipus de problema. Sensor d'ultrasons HC-SR04: Aquest sensor funciona emetent senyals de s\u00f3. S'utilitza normalment per a la detecci\u00f3 d'obstacles en petits robots per\u00f2, hem adaptat el programari per a que, modificant una serie de camps, ens retorni exactament l'estoc que queda a la m\u00e0quina en la qual s'incorpora. Tamb\u00e9 el connectem a la Raspberry mitjan\u00e7ant una connexi\u00f3 de 5V. Si el comparem amb el de temperatura, aquest no porta cap resist\u00e8ncia interna, per aquest motiu hem tingut que afegir dues resist\u00e8ncies per poder fer-lo funcionar, una de 1k ohm i l'altra de 2k ohms. Breadboard Kit: Aquest kit ens facilita molt la feina a l'hora de connectar els sensors i treballar amb aquests. El kit ens ofereix diversos accessoris, els m\u00e9s rellevants s\u00f3n: Panell de pl\u00e0stic: el qual ens permet falcar la Raspberry per tindre un lloc de treball m\u00e9s accessible. Breadboard: ens permet realitzar les connexions dels sensors i les resist\u00e8ncies cap a la Raspberry tenint una millor organitzaci\u00f3 amb els cables. Resist\u00e8ncies: utilitzades amb els sensors per a que no es trenquin. Cables: per realitzar les connexions entre els sensors, resist\u00e8ncies i la Raspberry. Targeta SD de 16GB: Aqu\u00ed ser\u00e0 on instal\u00b7larem el sistema operatiu de la Raspberry i on tindr\u00e0 lloc el funcionament de tot el programari necessari. La capacitat m\u00ednima que recomanem nosaltres \u00e9s de 16GB ja que menys seria molt poc contant tot el que s'anir\u00e0 afegint.","title":"4. Material utilitzat"},{"location":"Documentaci%C3%B3/#5-sistema-operatiu","text":"Si busquem sistemes operatius per a una Raspberry trobarem moltes opcions en el mercat. Nosaltres ens hem decantat espec\u00edficament per \"Raspberry Pi OS\". Aquest \u00e9s el sistema operatiu oficial de Raspberry, el qual est\u00e0 basat en Linux i \u00e9s molt f\u00e0cil d'instal\u00b7lar i fer servir. Dins d'aquest sistema operatiu podem escollir entre la versi\u00f3 \"Desktop\", la qual t\u00e9 apartat gr\u00e0fic, i la versi\u00f3 \"Lite\", la qual funciona mitjan\u00e7ant una terminal com si fos un \"Ubuntu Server\". Nosaltres ens hem decantat per la \"Desktop\" ja que \u00e9s m\u00e9s intu\u00eftiva i ens permet treballar de manera m\u00e9s c\u00f2moda.","title":"5. Sistema Operatiu"},{"location":"Documentaci%C3%B3/#51-descarregar-i-cremar-la-imatge","text":"Cremar la imatge Primer entrarem a la web oficial i ens descarregarem l\u2019instal\u00b7lador. Un cop descarregat ens descarregarem el paquet rpi-imager des del terminal i ja podrem gravar la imatge de la Raspberry a la SD. Ara que ja el tenim instal\u00b7lat executarem el programa i escollirem el sistema operatiu que volem instal\u00b7lar. En el nostre cas hem escollit la versi\u00f3 de Raspberry de 32 bits. Un cop escollit el sistema operatiu, el seg\u00fcent pas ser\u00e0 dir-li al programa a quin dispositiu volem gravar la imatge. L'\u00faltim pas ser\u00e0 gravar la imatge al dispositiu. Ens demana si volem esborrar les dades de la SD. Li diem que si. I comen\u00e7a a escriure dintre de la SD","title":"5.1. Descarregar i cremar la imatge"},{"location":"Documentaci%C3%B3/#52-installacio-del-sistema-operatiu","text":"Per comen\u00e7ar amb la instal\u00b7laci\u00f3 introduirem, el dispositiu que hem cremat anteriorment amb la imatge. A l\u2019arrancar ens preguntar\u00e0 el que volem fer, en aquest cas, li direm que volem una instal\u00b7laci\u00f3 gr\u00e0fica escollint la opci\u00f3 \"Graphical Install\". Despr\u00e9s d\u2019escollir el par\u00e0metre anterior ja podrem comen\u00e7ar amb la instal\u00b7laci\u00f3, on primer escollirem l\u2019idioma. El seg\u00fcent pas ser\u00e0 triar el tipus d\u2019instal\u00b7laci\u00f3, en aquest cas, escollirem la guiada amb l\u2019opci\u00f3 \"Guided \u2013 use entire disk\" i els discs que t\u00e9 la m\u00e0quina amb les particions corresponents. Confirmarem les opcions que hem escollit anteriorment. Un cop escollides totes les opcions comen\u00e7ar\u00e0 amb el proc\u00e9s d\u2019instal\u00b7laci\u00f3, on en uns passos m\u00e9s endavant ens preguntar\u00e0 on volem instal\u00b7lar el grub. Ara ja podrem accedir al sistema, a l\u2019hora d\u2019entrar, ens preguntar\u00e0 si volem realitzar una actualitzaci\u00f3 del sistema, podem ignorar-ho o acceptar-ho. Fet aix\u00f2, ja podrem passar amb la configuraci\u00f3.","title":"5.2. Instal\u00b7laci\u00f3 del sistema operatiu"},{"location":"Documentaci%C3%B3/#53-configuracio-del-sistema-operatiu","text":"SSH Per poder treballar c\u00f2mode, utilitzarem el SSH connectat al Raspberry (recordant que \u00e9s un m\u00e8tode opcional (i recomanable), al qual podem tenir-lo obert i poder treballar amb el PC amfitri\u00f3). Entrarem a la configuraci\u00f3 de la xarxa de la Raspberry i afegirem una IP del mateix rang de la xarxa que estem connectats per a tenir comunicaci\u00f3 entre l'ordinador amfitri\u00f3 i la Raspberry: Un cop afegit la xarxa, reiniciarem la Raspberry. Entrem dintre del terminal, i escrivim aquesta comanda, la qual serveix per configurar els serveis, i on nosaltres habilitarem el SSH: Per una part es sap que t\u00e9 un risc elevat al ser vulnerat aquest protocol, per\u00f2 canviarem la contrasenya. Direm que si: I ja habilitem el servei: Revisem si la configuraci\u00f3 de la xarxa \u00e9s correcta amb la comanda ifconfig :","title":"5.3. Configuraci\u00f3 del sistema operatiu"},{"location":"Documentaci%C3%B3/#6-seguretat-al-dispositiu","text":"","title":"6. Seguretat al dispositiu"},{"location":"Documentaci%C3%B3/#61-que-demani-contrasenya-a-lusuari-pi","text":"Per defecte, quan col\u00b7loquem \"sudo\" davant d\u2019una comanda amb l\u2019usuari \"pi\", el sistema no ens deman\u00e0 contrasenya i executa la comanda com a super usuari. Per solucionar aix\u00f2 i que ens demani una contrasenya per tindre els permisos de super usuari, editarem el fitxer \"010_pi-nopasswd\" . Dins d\u2019aquest fitxer, modificarem el par\u00e0metre \"pi ALL=(ALL) NOPASSWD: ALL\" i el deixarem de la seg\u00fcent manera: \"pi ALL=(ALL) PASSWD: ALL\" . Ara quan posem el \"sudo\" davant la comanda, ja ens demana contrasenya abans de realitzar l\u2019acci\u00f3 de la comanda.","title":"6.1. Que demani contrasenya a l'usuari pi"},{"location":"Documentaci%C3%B3/#62-ssh","text":"Quan estem treballant amb una raspberry, el servei \"ssh\" \u00e9s un dels m\u00e9s freq\u00fcentats a l\u2019hora de realitzar configuracions en remot o poder treballar amb el dispositiu sense connectar-li cap perif\u00e8ric. Per fer d\u2019aquest un servei m\u00e9s segur, es recomanable realitzar un m\u00ednim de canvis en la configuraci\u00f3. La modificaci\u00f3 que realitzarem ser\u00e0 que no es pugui iniciar sessi\u00f3 amb l\u2019usuari \"root\" . Si no el desactivem, aix\u00f2 ja dona una pista a l\u2019atacant de que aquest usuari est\u00e0 habilitat per accedir i si aconsegueix trencar la contrasenya tindr\u00e0 un acc\u00e9s total al dispositiu. Per deshabilitar l\u2019usuari root, ens dirigirem al fitxer de configuraci\u00f3 \"sshd_config\" i li donarem el valor \"no\" al par\u00e0metre \"PermitRootLogin\" . Com podem veure si ara intentem accedir amb aquest usuari, el servei ens denega la connexi\u00f3.","title":"6.2. SSH"},{"location":"Documentaci%C3%B3/#63-fail2ban","text":"Aquest programa ens permet protegir-nos de manera efica\u00e7 contra atacs de for\u00e7a bruta o atacs de denegaci\u00f3 de servei (DoS). Podem escollir configurar un servei en concret o aplicar una configuraci\u00f3 per defecte per a tots els serveis. Per instal\u00b7lar el programa, nom\u00e9s tindrem que executar l\u2019ordre \"sudo apt-get install fail2ban\" . Un cop instal\u00b7lat, ens dirigirem al directori \"/etc/fail2ban\" i comen\u00e7arem a realitzar la configuraci\u00f3 dels serveis al fitxer \"jail.conf\" . El que farem nosaltres ser\u00e0 aplicar una configuraci\u00f3 per a tots els serveis. La qual nom\u00e9s donar\u00e0 dos intents per realitzar l\u2019autenticaci\u00f3 i si aquests fallen, es banejar\u00e0 la IP durant 30 minuts. Pot semblar que dos intents s\u00f3n poc, per\u00f2 en realitat en seran m\u00e9s. Aix\u00f2 \u00e9s perqu\u00e8 els intents es poden definir tant en la configuraci\u00f3 del servei en concret o al \"fail2ban\" . Per exemple el servei \"ssh\" per defecte t\u00e9 3 intents. Si al \"fail2ban\" en definim 2, tindrem 6 intents per accedir al \"ssh\" .","title":"6.3. Fail2Ban"},{"location":"Documentaci%C3%B3/#7-bases-de-dades","text":"","title":"7. Bases de dades"},{"location":"Documentaci%C3%B3/#71-recopilacio-i-analisi-de-requisits","text":"Aquesta primera fase consisteix en un pas previ obligatori, per assegurar-nos que la nostra base de dades complir\u00e0 amb els nostres objectius. Per a aix\u00f2, haurem d'analitzar diferents factors: Les dades que necessitem emmagatzemar i d'on provenen. La informaci\u00f3 que les dades descriuen. Els usuaris de la base de dades i les seves necessitats a l'hora d'accedir a les dades.","title":"7.1. Recopilaci\u00f3 i an\u00e0lisi de requisits"},{"location":"Documentaci%C3%B3/#72-disseny-conceptual","text":"En aquesta fase es representa una descripci\u00f3 a alt nivell del contingut de la base de dades, sense importar el sistema de gesti\u00f3 de base de dades que s'utilitzar\u00e0 a continuaci\u00f3. Es defineixen en un dibuix les entitats, els seus atributs i les relacions entre elles.","title":"7.2. Disseny conceptual"},{"location":"Documentaci%C3%B3/#73-eleccio-dun-sistema-de-gestio-de-base-de-dades","text":"\u00c9s en aquesta fase on triarem el sistema de gesti\u00f3 de bases de dades (SGBD) concret que millor s'adapta al nostre projecte, com, per exemple, Oracle, MySQL, Microsoft SQL Server i PostgreSQL.","title":"7.3. Elecci\u00f3 d'un sistema de gesti\u00f3 de base de dades"},{"location":"Documentaci%C3%B3/#74-disseny-logic","text":"En aquesta fase, es tradueix el model conceptual obtingut anteriorment a un esquema l\u00f2gic, que descriu l'estructura de la base de dades. Es tracta de la fase en la qual es dissenyen les taules pr\u00f2piament dites, amb les seves files, columnes i relacions. El model l\u00f2gic dep\u00e8n de l'SGBD que s'utilitzar\u00e0.","title":"7.4. Disseny l\u00f2gic"},{"location":"Documentaci%C3%B3/#75-disseny-fisic","text":"En aquesta fase es defineixen les estructures d'emmagatzematge de la base de dades de forma f\u00edsica. \u00c9s quan s'escriu el codi (per exemple, SQL) per concretar el disseny en el motor de base de dades que hem escollit.","title":"7.5. Disseny f\u00edsic"},{"location":"Documentaci%C3%B3/#76-implementacio","text":"Finalment, es crea i es compila l'esquema de la base de dades, es generen els fitxers i les aplicacions que implementen les transaccions. Seleccionem la base de dades Insertem el fitxer on tenim les estructures d'emmagatzematge de la base de dades I per acabar mostrem el contingut de les taules","title":"7.6. Implementaci\u00f3"},{"location":"Documentaci%C3%B3/#8-sensors","text":"Els sensors juguen un paper molt important en aquest projecte, ja que sense ells no podr\u00edem fer res del que proposem. Per aix\u00f2 hem elegit acuradament aquests per garantir un bon funcionament i durabilitat. Tamb\u00e9 ha sigut necessari generar els scripts per a poder representar les dades d'aquests, la qual cosa ens ha portat algun mal de cap per\u00f2 al final tot ha sortit com s'esperava.","title":"8. Sensors"},{"location":"Documentaci%C3%B3/#81-sensor-de-temperatura","text":"","title":"8.1. Sensor de temperatura"},{"location":"Documentaci%C3%B3/#811-connexio","text":"La connexi\u00f3 d'aquest sensor a la Raspberry \u00e9s realitza mitjan\u00e7ant tres connexions. Una de corrent de 5V, una de dades i la de terra.","title":"8.1.1. Connexi\u00f3"},{"location":"Documentaci%C3%B3/#811-configuracio","text":"La configuraci\u00f3 dels sensors es realitza mitjan\u00e7ant un script programat amb \"Python\". Aquest script fa servir la llibreria \"Adafruit_DHT\" per poder recollir les dades del sensor. Un cop ja recollim les dades que ens envia el sensor, definim una connexi\u00f3 amb la nostra base de dades MySQL i una consulta amb aquesta per enviar les dades recollides pel sensor a la base de dades. Llibreries utilitzades: import Adafruit_DHT import time import RPi.GPIO as GPIO import datetime import MySQLdb Recollida de la informaci\u00f3 del sensor: #Port al qual est\u00e0 connectat el sensor dht_sensor_port = 4 #Model del sensor dht_sensor_type = Adafruit_DHT.DHT11 #Recollida d'informacio dels GPIO GPIO.setmode(GPIO.BCM) GPIO.setup(dht_sensor_port, GPIO.IN) Connexi\u00f3 amb la base de dades: #Variables per realitzar la connexio amb la base de dades hostname = '127.0.0.1' username = 'laravel' password = 'alumne' database = 'projectedb' #Connexi\u00f3 a la base de dades conn = MySQLdb.connect( host=hostname, user=username, passwd=password, db=database ) Enviament de dades a la base de dades: #Bucle per afegir les dades recollides pel sensor a la base de dades corresponent try: while True: hum, temp = Adafruit_DHT.read_retry(dht_sensor_type, dht_sensor_port) now = datetime.datetime.now() date = now.strftime('%d-%m-%Y %H:%M:%S') insert_record(format(temp,'.2f'),format(hum,'.2f'),str(date)) time.sleep(3)","title":"8.1.1. Configuraci\u00f3"},{"location":"Documentaci%C3%B3/#82-sensor-dultra-sons","text":"","title":"8.2. Sensor d'ultra sons"},{"location":"Documentaci%C3%B3/#821-connexio","text":"La connexi\u00f3 d'aquest sensor a la Raspberry \u00e9s realitza mitjan\u00e7ant quatre connexions. Una de corrent de 5V, dues de dades i una de terra.","title":"8.2.1. Connexi\u00f3"},{"location":"Documentaci%C3%B3/#822-configuracio","text":"La configuraci\u00f3 dels sensors es realitza mitjan\u00e7ant un script programat amb \"Python\". Aquest script fa servir la llibreria \"RPi.GPIO\" per poder recollir les dades del sensor. Un cop ja recollim les dades que ens envia el sensor, definim una connexi\u00f3 amb la nostra base de dades MySQL i una consulta amb aquesta per enviar les dades recollides pel sensor a la base de dades. Llibreries utilitzades: import RPi.GPIO as GPIO import time import mysql.connector Configuraci\u00f3 dels GPIO: #Configurac\u00f3 GPIO GPIO.setmode(GPIO.BCM) GPIO_TRIGGER = 23 GPIO_ECHO = 24 GPIO.setup(GPIO_TRIGGER, GPIO.OUT) GPIO.setup(GPIO_ECHO, GPIO.IN) Formula per calcular la dist\u00e0ncia: #Funcio distancia def distance(): GPIO.output(GPIO_TRIGGER, True) time.sleep(0.00001) GPIO.output(GPIO_TRIGGER, False) StartTime = time.time() StopTime = time.time() while GPIO.input(GPIO_ECHO) == 0: StartTime = time.time() while GPIO.input(GPIO_ECHO) == 1: StopTime = time.time() TimeElapsed = StopTime - StartTime distance = (TimeElapsed * 34300) / 2 return distance Connexi\u00f3 amb la base de dades: #Connexio a la base de dades mydb = mysql.connector.connect ( host = \"127.0.0.1\", user = \"laravel\", password = \"alumne\", database = \"projectedb\" ) mycursor = mydb.cursor() Enviament de dades a la base de dades: try: while True: dist = distance() #Comparem les distancies i executem el codi segons el resultat if 0 <= dist <= 8.8: #Definim el estoc stock = 3 #Definim l'estat que mostrara status = \"Stock ple\" print(str(status)+ \" Productes: \" + str(stock)) #Definim la consulta sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" #Executem la consulta definida mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif 9 <= dist <= 13.9: stock = 2 status = \"Stock per la mitat\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif 14.2 <= dist <= 18.6: stock = 1 status = \"Stock s'esta esgotant\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif dist >= 18.9: stock = 0 status = \"Stock esgotat\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") #Esperem 1 segon abans de repetir el bucle time.sleep(1)","title":"8.2.2. Configuraci\u00f3"},{"location":"Documentaci%C3%B3/#83-esquema-de-connexio-conjunta","text":"Aix\u00ed \u00e9s com quedar\u00e0 amb els dos sensors connectats a la vegada i la manera que hem cregut m\u00e9s adequada de realitzar les connexions.","title":"8.3. Esquema de connexi\u00f3 conjunta"},{"location":"Documentaci%C3%B3/#9-pagina-web","text":"","title":"9. P\u00e0gina web"},{"location":"Documentaci%C3%B3/#91-installacio-php","text":"Per a poder treballar amb el \"Laravel\" , ser\u00e0 necessari disposar del \"php\" al nostre dispositiu. Per instal\u00b7lar-lo, necessitarem fer-ho mitjan\u00e7ant els seg\u00fcents paquets: sudo apt install php7.0 php7.0-curl php7.0-gd php7.0-imap php7.0-json php7.0-mcrypt php7.0-mysql php7.0-opcache php7.0-xmlrpc php7.0-xml php7.0-fpm php7.0-zip -y Un cop instal\u00b7lats els paquets, comprovarem la versi\u00f3 per veure que s\u2019ha instal\u00b7lat correctament.","title":"9.1. Instal\u00b7laci\u00f3 PHP"},{"location":"Documentaci%C3%B3/#92-installacio-composer","text":"Ara que ja tenim instal\u00b7lat el \"php\" , \u00e9s l\u2019hora instal\u00b7lar el \"composer\" . Quan aquest estigui instal\u00b7lat, mourem fitxer \"composer.phar\" al directori \"/usr/local/bin/composer\" i comprovarem si la instal\u00b7laci\u00f3 ha anat b\u00e9 verificant la versi\u00f3 d\u2019aquest amb l\u2019ordre \"composer \u2013version\" .","title":"9.2. Instal\u00b7laci\u00f3 Composer"},{"location":"Documentaci%C3%B3/#93-creacio-projecte-laravel","text":"Quan tinguem el \"composer\" instal\u00b7lat, ja podem crear el nostre projecte amb \"Laravel\". Abans de crear-lo, haurem de preparar un directori en el qual crearem aquest projecte. El que haurem de fer \u00e9s donar permisos i assignar a l\u2019usuari \"pi\" (en el nostre cas) com a propietari i grup de la carpeta en la que crearem el projecte. Amb els permisos corresponents al directori, ens dirigirem dins d\u2019aquest i ja podrem comen\u00e7ar amb la creaci\u00f3 del \"Laravel\" . Per crear-lo farem servir l\u2019ordre \"composer create-project\" definint la versi\u00f3 del \"Laravel\" que volem fer servir i donant-li un nom.","title":"9.3. Creaci\u00f3 projecte Laravel"},{"location":"Documentaci%C3%B3/#94-autenticacio-i-registre-dusuaris","text":"Per poder iniciar sessi\u00f3 o registrar nous usuaris, ser\u00e0 necessari fer us del modul \"auth\" del \"Laravel\" .","title":"9.4. Autenticaci\u00f3 i registre d'usuaris"},{"location":"Documentaci%C3%B3/#95-installacio-nodejs","text":"Per a poder fer servir la plantilla de \"Bootstrap\" que porta per defecte el \"Laravel\" , haurem d\u2019instal\u00b7lar tamb\u00e9 el \"node.js\" . Aix\u00f2 \u00e9s opcional, per\u00f2 \u00e9s un bon recurs per donar una aparen\u00e7a b\u00e0sica al nostre projecte. Ens descarregarem el paquet de la p\u00e0gina oficial amb l\u2019ajuda de la comanda \"curl\" . Un cop tinguem el paquet descarregat, realitzarem la instal\u00b7laci\u00f3 d\u2019aquest amb les seg\u00fcents dos comandes:","title":"9.5. Instal\u00b7laci\u00f3 NodeJS"},{"location":"Documentaci%C3%B3/#96-comprovacio-funcionament","text":"Un cop creat el projecte, l\u2019iniciarem entrant a la carpeta que s\u2019ha generat al crear-lo i executant l\u2019ordre \"php artisan serve\" . Si ara ens dirigim al nostre navegador i escrivim \"localhost:8000\" , podrem visualitzar el projecte amb el seu estat inicial.","title":"9.6. Comprovaci\u00f3 funcionament"},{"location":"Documentaci%C3%B3/#97-disseny-i-programacio","text":"Visualitzaci\u00f3 de les p\u00e0gines Encara no tenim cap p\u00e0gina creada, per\u00f2 anirem preparant la visualitzaci\u00f3 d'aquestes. Per fer-ho, ens dirigirem al fitxer \"web.php\" i definirem les rutes cap a les vistes corresponents. Route::get('/', function () { return view('inici'); }); Route::get('/home', 'HomeController@index')->name('home'); Route::get('/dashboard', function () { return view('maquina1'); }); P\u00e0gina d\u2019inici Per a la p\u00e0gina d\u2019inici, hem fet servir la plantilla \"grayscale\" . Aquesta \u00e9s una plantilla gratu\u00efta, modificable i sense drets d\u2019autor. Hem escollit aquesta ja que \u00e9s minimalista, molt visual i s\u2019adapta perfectament a les nostres necessitats. L\u2019hem adequat al nostre gust per a que representi m\u00e9s al projecte. La p\u00e0gina es divideix amb cinc apartats principals Inici En aquest punt veiem la vista principal de la p\u00e0gina i la qual ens introdueix una mica amb la idea principal del projecte. <header class=\"masthead\"> <div class=\"container d-flex h-100 align-items-center\"> <div class=\"mx-auto text-center\"> <h1 class=\"mx-auto my-0\">CES - Control d'estoc amb sensors</h1><br><br> <h2 class=\"text-white-50 mx-auto mt-2 mb-5\">Una idea pensada per a facilitar la feina als treballadors del m\u00f3n del vending.</h2> <a class=\"btn btn-primary js-scroll-trigger\" href=\"#projects\">Informat</a> </div> </div> </header> Qui som? Aqu\u00ed mostrem una breu descripci\u00f3 sobre el grup de treball i una petita introducci\u00f3 a la idea del projecte. <section class=\"about-section text-center\" id=\"about\"> <div class=\"container\"> <div class=\"row\"> <div class=\"col-lg-8 mx-auto\"> <h2 class=\"text-white mb-4\">Sobre nosaltres</h2> <p class=\"text-white-50\"> Som un grup format per tres estudiants els quals ens ha motivat dur a cap aquesta idea la comoditat dels treballadors. Tamb\u00e9 ens hem decidit per portar-la a cap pensant amb el medi ambient, ja que si es t\u00e9 un control exacte de l'estoc de les m\u00e0quines, el repartidor sap en tot moment quan s'est\u00e0 esgotant un producte i \u00e9s necessari reposar-lo, aix\u00ed, no li cal estar fent viatges sense saber el que realment ha de reposar. </p> </div> </div> <img class=\"img-fluid\" src=\"grayscale/assets/img/confort.png\" alt=\"\" /> </div> </section> Projecte Podem veure una descripci\u00f3 m\u00e9s detallada sobre el projecte, entrant tamb\u00e9 amb punts com els objectius d\u2019aquest i la motivaci\u00f3 per haver-lo dut a terme. <section class=\"projects-section bg-light\" id=\"projects\"> <div class=\"container\"> <!-- Featured Project Row--> <div class=\"row align-items-center no-gutters mb-4 mb-lg-5\"> <div class=\"col-xl-8 col-lg-7\"><img class=\"img-fluid mb-3 mb-lg-0\" src=\"grayscale/assets/img/vending.png\" alt=\"\" /></div> <div class=\"col-xl-4 col-lg-5\"> <div class=\"featured-text text-center text-lg-left\"> <h4>De que va el nostre projecte?</h4> <p class=\"text-black-50 mb-0\"> Consisteix amb la instal\u00b7laci\u00f3 d'uns sensors a les m\u00e0quines de vending per a controlar en tot moment l'estoc de productes del qual disposa aquesta. El treballador podr\u00e0 consultar en tot moment l'estoc disponible. Sempre que s'estigui a punt d'esgotar algun producte, el treballador rebr\u00e0 un av\u00eds per anar a reposar-lo. </p> </div> </div> </div> <!-- Project One Row--> <div class=\"row justify-content-center no-gutters mb-5 mb-lg-0\"> <div class=\"col-lg-6\"><img class=\"img-fluid\" width=\"350\" height=\"350\" margin-left=\"10\" src=\"grayscale/assets/img/objectiu.png\" alt=\"\" /></div> <div class=\"col-lg-6\"> <div class=\"bg-black text-center h-100 project\"> <div class=\"d-flex h-100\"> <div class=\"project-text w-100 my-auto text-center text-lg-left\"> <h4 class=\"text-white\">Objectius</h4> <ul class=\"mb-0 text-white-50\"> <li>Millora en la rapidesa del treball.</li> <li>Facilitat per saber quins productes cal reposar.</li> <li>Reducci\u00f3 de costos, ja que el treballador nom\u00e9s \u00e9s despla\u00e7ar\u00e0 quan s'hagi de reposar algun producte.</li> </ul> <hr class=\"d-none d-lg-block mb-0 ml-0\" /> </div> </div> </div> </div> </div> <!-- Project Two Row--> <div class=\"row justify-content-center no-gutters\"> <div class=\"col-lg-6\"><img class=\"img-fluid\" width=\"350\" height=\"350\" src=\"grayscale/assets/img/motivacio.png\" alt=\"\" /></div> <div class=\"col-lg-6 order-lg-first\"> <div class=\"bg-black text-center h-100 project\"> <div class=\"d-flex h-100\"> <div class=\"project-text w-100 my-auto text-center text-lg-right\"> <h4 class=\"text-white\">Motivaci\u00f3</h4> <p class=\"mb-0 text-white-50\"> En aquest projecte pretenem crear un avan\u00e7 per a les empreses que es dediquen a reposar els productes de les m\u00e0quines de vending, facilitant-los aix\u00ed la feina, ja que saben en tot moment quin \u00e9s l'estoc de cada m\u00e0quina i quins productes cal reposar. </p> <hr class=\"d-none d-lg-block mb-0 mr-0\" /> </div> </div> </div> </div> </div> </div> </section> Contacta\u2019ns Petit apartat orientat a contactes per part de clients o usuaris que visitin el lloc i estiguin interessats amb la idea. <section class=\"contact-section bg-black\" id=\"contacte\"> <div class=\"container\"> <div class=\"row\"> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-map-marked-alt text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">On estem?</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\">Av. de Crist\u00f2fol Colom, 34, 42, 43500 Tortosa, Tarragona</div> </div> </div> </div> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-envelope text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">Pregunta'ns sense cap comprom\u00eds</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\"><a href=\"#!\">info@ces.com</a></div> </div> </div> </div> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-mobile-alt text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">Truca'ns</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\">977000000</div> </div> </div> </div> </div> <div class=\"social d-flex justify-content-center\"> <a class=\"mx-2\" href=\"#!\"><i class=\"fab fa-twitter\"></i></a> <a class=\"mx-2\" href=\"#!\"><i class=\"fab fa-facebook-f\"></i></a> <a class=\"mx-2\" href=\"#!\" target=\"_blank\"><i class=\"fab fa-instagram\"></i></a> </div> </div> </section> Login Aquest apartat est\u00e0 dirigit \u00fanicament a clients o administradors del propi projecte. Nom\u00e9s pot iniciar sessi\u00f3 alg\u00fa que tingui un compte. No donem la opci\u00f3 de registrar ja que el registre el realitzarem nosaltres directament per cada client. Panell de control El panell de control, nom\u00e9s estar\u00e0 habilitat als clients que ja disposin del nostre projecte instal\u00b7lat a les seves m\u00e0quines. Com en la p\u00e0gina d\u2019inici, tamb\u00e9 hem fet servir una plantilla, en aquest cas \"adminlte\" . Aquesta \u00e9s una plantilla gratu\u00efta, modificable i sense drets d\u2019autor. Hem escollit aquesta ja que el disseny s\u2019adapta correctament al que est\u00e0vem buscant i nom\u00e9s ha calgut modificar alguns punts per donar-li el toc de personalitat del nostre projecte. El primer que veurem a l\u2019accedir-hi, ser\u00e0 un men\u00fa lateral a la banda esquerra on veurem les m\u00e0quines disponibles. A la part de dalt, tenim una barra de navegaci\u00f3, la qual actualment nom\u00e9s ens permet tancar sessi\u00f3 amb l\u2019usuari el qual estem connectats o tornar a la p\u00e0gina de la primera m\u00e0quina. <aside class=\"main-sidebar sidebar-dark-primary elevation-4\"> <!-- Brand Logo --> <a href=\"/dashboard\" class=\"brand-link\"> <span class=\"brand-text font-weight-light\">M\u00e0quines</span> </a> <!-- Sidebar --> <div class=\"sidebar\"> <!-- Sidebar Menu --> <nav class=\"mt-2\"> <ul class=\"nav nav-pills nav-sidebar flex-column\" data-widget=\"treeview\" role=\"menu\" data-accordion=\"false\"> <li class=\"nav-item\"> <a href=\"/dashboard\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #1</p> </a> </li> <li class=\"nav-item\"> <a href=\"#\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #2</p> </a> </li> <li class=\"nav-item\"> <a href=\"#\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #3</p> </a> </li> </ul> </nav> </div> </aside> <!-- Content Wrapper. Contains page content --> <div class=\"content-wrapper\"> <!-- Content Header (Page header) --> <div class=\"content-header\"> <div class=\"container-fluid\"> <div class=\"row mb-2\"> <div class=\"col-sm-6\"> <h1 class=\"m-0 text-dark\">M\u00e0quina #1</h1> </div><!-- /.col --> </div><!-- /.row --> </div><!-- /.container-fluid --> </div> <!-- /.content-header --> Apartats Si accedim a una de les m\u00e0quines del men\u00fa, trobem tres apartats, els quals s\u00f3n: Temperatura i Humitat, Estoc i Ubicaci\u00f3. Temperatura i Humitat Aqu\u00ed podem veure les temperatures i humitats de les \u00faltimes 24 hores ordenades de m\u00e9s recents a m\u00e9s antigues. Aquestes dades estan ficades dins d\u2019una taula que a l\u2019hora est\u00e0 dins d\u2019una targeta. La informaci\u00f3 que ens mostra est\u00e0 extreta directament de la nostra base de dades. <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-body\"> <table class=\"table\"> <thead> <tr> <th scope=\"col\">#</th> <th scope=\"col\">Temperatura</th> <th scope=\"col\">Humitat</th> <th scope=\"col\">Data i hora</th> </tr> </thead> <tbody> <!--Connexi\u00f3 i consultes a la base de dades--> <?php $cont = 0; $con = mysqli_connect('127.0.0.1', 'laravel', 'alumne', 'projectedb'); $sql = \"SELECT * FROM dht11 ORDER BY date desc LIMIT 24\"; $result = mysqli_query($con, $sql); foreach ($result as $value) { $cont += 1; echo (\"<tr>\"); echo (\"<td>\" . $cont . \"</td>\"); echo (\"<td>\" . $value[\"temp\"] . \"</td>\"); echo (\"<td>\" . $value[\"hum\"] . \"</td>\"); echo (\"<td>\" . $value[\"date\"] . \"</td>\"); echo (\"</tr>\"); } ?> </tbody> </table> </div> </div> </div> </div> </div> </div> Estoc Accedint a la base de dades, mostrem els productes disponibles de la m\u00e0quina a la qual accedim i veiem la quantitat restant. Amb un missatge tamb\u00e9 ens queda clar si l\u2019estoc est\u00e0 ple o no. <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-header\"> <h5 class=\"m-0\">Estoc</h5> </div> <div class=\"card-body\"> <table class=\"table\"> <thead> <tr> <th scope=\"col\">#</th> <th scope=\"col\">Producte</th> <th scope=\"col\">Estoc</th> <th scope=\"col\">Estat</th> </tr> </thead> <tbody> <!--Connexi\u00f3 i consultes a la base de dades--> <?php $cont = 0; $con = mysqli_connect('127.0.0.1', 'laravel', 'alumne', 'projectedb'); $sql = \"SELECT nom,stock FROM productes\"; $result = mysqli_query($con, $sql); foreach ($result as $value) { $to = \"ferranbertomeu@iesebre.com\"; $cont += 1; echo (\"<tr>\"); echo (\"<td>\" . $cont . \"</td>\"); echo (\"<td>\" . $value[\"nom\"] . \"</td>\"); echo (\"<td>\" . $value[\"stock\"] . \"</td>\"); #Retorna un missatge depenent de l'estoc canviant el color del mateix if ($value[\"stock\"] == 0) { $subject = \"S'ha esgotat Aigua petita!\"; $message = \"S'ha esgotat Aigua petita, s'ha d'anar a reposar el producte urgentment!\"; echo (\"<td style=\" . \"background-color:#FF4C4C\" . \">\" . \"No queden productes!\" . \"</td>\"); #Funci\u00f3 mail per notificar a l'usuari si s'est\u00e0 esgotant l'estoc mail($to, $subject, $message); } elseif ($value[\"stock\"] == 1) { $subject = \"S'est\u00e0 a punt d'esgotar Aigua petita!\"; $message = \"S'est\u00e0 a punt d'esgotar Aigua petita, s'ha d'anar a reposar el producte!\"; echo (\"<td style=\" . \"background-color:#FFB44E\" . \">\" . \"S'est\u00e0 esgotant!\" . \"</td>\"); mail($to, $subject, $message); } elseif ($value[\"stock\"] == 2) { echo (\"<td style=\" . \"background-color:#F5FF5B\" . \">\" . \"Queden la meitat de productes\" . \"</td>\"); } elseif ($value[\"stock\"] == 3) { echo (\"<td style=\" . \"background-color:#9EFF5B\" . \">\" . \"Estoc ple\" . \"</td>\"); } echo (\"</tr>\"); } ?> </tbody> </table> </div> </div> </div> </div> </div> </div> Ubicaci\u00f3 Aquest punt ens mostr\u00e0 la ubicaci\u00f3 exacta de la m\u00e0quina mitjan\u00e7ant en Google Maps. <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-header\"> <h5 class=\"m-0\">Ubicaci\u00f3</h5> </div> <div class=\"card-body\"> <iframe src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3019.597814021702!2d0.5130780156795304!3d40.81483093925471!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12a0e4bd4079a9d1%3A0x253c0ed9489c50f8!2sInstitut%20de%20L&#39;Ebre!5e0!3m2!1sca!2ses!4v1620804506220!5m2!1sca!2ses\" width=\"600\" height=\"450\" style=\"border:0;\" allowfullscreen=\"\" loading=\"lazy\"></iframe> </div> </div> </div> </div> </div> </div>","title":"9.7. Disseny i programaci\u00f3"},{"location":"Documentaci%C3%B3/#10-aplicacio-mobil","text":"","title":"10. Aplicaci\u00f3 m\u00f2bil"},{"location":"Documentaci%C3%B3/#101-creacio-del-projecte","text":"Hem instal\u00b7lat l'Android Studio des del programari d'Ubuntu. Un cop instal\u00b7lat anem a crear el nostre projecte. Seleccionem l'opci\u00f3 Empty Activity per a comen\u00e7ar des de zero i disenyar-ho al nostre gust. Un cop seleccionat el diseny assignem nom al projecte i definim el llenguatge de programaci\u00f3 que utilitzarem, en aquest cas Java. Tenim l'opci\u00f3 de seleccionar la versi\u00f3 m\u00ednima requerida del sistema Android, hem escollit Android 6.0 (Marshmallow).","title":"10.1. Creaci\u00f3 del projecte"},{"location":"Documentaci%C3%B3/#102-creacio-dun-boto","text":"Comen\u00e7em definint el nom del bot\u00f3 anomenat maquines que el crearem al fitxer que se'ns creara cada cop que afegim una Empty Activity amb l'extenci\u00f3 .xml , tot el que definim en aquest fitxer ser\u00e0 el que vitzualitzarem per pantalla. Definim la id, el disseny tant de l'amplada com el de llargada que en aquest cas utilitzarem warp_content . Despr\u00e9s definim la distancia respecte als marges de la dreta i la part superior i finalment el nom que es mostrara al bot\u00f3. <Button android:id=\"@+id/maquines\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"24dp\" android:layout_marginTop=\"544dp\" android:text=\"M\u00e0quines\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" />","title":"10.2. Creaci\u00f3 d'un bot\u00f3"},{"location":"Documentaci%C3%B3/#103-definir-una-funcio-a-un-boto","text":"Ja tenim creat el bot\u00f3 i anem a definir la seva funci\u00f3: portar-mos fins una altra Empty Activity . Al bot\u00f3 maquines ho definim, aquest cas, al fitxer .java se'ns crea juntament al .xml al crear un Empty Activity . Indiquem que quan es faigue clic ens porti fins maquines.class , que \u00e9s la nova activitat que hem creat i li hem definit aquest nom. //navegacio a maquines Button maquines = (Button) findViewById(R.id.maquines); maquines.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), maquines.class); startActivityForResult(intent, 0); } }); Tamb\u00e9 podem definir que al fer clic ens obri una url. En aquest cas el bot\u00f3 anomenat tortosa li indiquem que obri la ubicaci\u00f3 que hem extret del Google Maps, en aquest exemple trobem la ubicaci\u00f3 de l'Institut de l'Ebre. protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_maquines); //ubicacio tortosa (INS Ebre) Button tortosa = findViewById(R.id.tortosa); String ubitortosa = \"https://www.google.es/maps/place/Institut+de+L'Ebre/@40.8148269,0.513078,17z/data=!3m1!4b1!4m5!3m4!1s0x12a0e4bd4079a9d1:0x253c0ed9489c50f8!8m2!3d40.8148269!4d0.5152667\"; tortosa.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Uri uri = Uri.parse(ubitortosa); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); } });","title":"10.3. Definir una funci\u00f3 a un bot\u00f3"},{"location":"Documentaci%C3%B3/#104-mostrar-text","text":"Per a mostrar text a la pantalla ho escrivim al fitxer .xml , ho indiquem amb l'etiqueta TextView i definim la id, la dist\u00e0ncia sobre els marges, el text que mostrar\u00e0 per pantalla i la mida del text. <TextView android:id=\"@+id/CES\" android:layout_width=\"132dp\" android:layout_height=\"68dp\" android:text=\"C.E.S\" android:textAlignment=\"center\" android:textSize=\"50sp\" app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintHorizontal_bias=\"0.498\" app:layout_constraintLeft_toLeftOf=\"parent\" app:layout_constraintRight_toRightOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:layout_constraintVertical_bias=\"0.057\" />","title":"10.4. Mostrar text"},{"location":"Documentaci%C3%B3/#105-insertar-una-imatge","text":"Per a mostrar una imatge a la pantalla ho escrivim al fitxer .xml , ho indiquem amb l'etiqueta ImageView i definim la id de la imatge, la seva mida i el nom de la imatge, que ha d'estar situada dintre de la capreta drawable, situada a la carpeta on tenim el nostre projecte. <ImageView android:id=\"@+id/imageView\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginTop=\"68dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/maquina_expenedora\" />","title":"10.5. Insertar una imatge"},{"location":"Documentaci%C3%B3/#11-copies-de-seguretat","text":"Les c\u00f2pies de seguretat s\u00f3n un recurs molt important de cara a un futur accident. Si necessitem recuperar alguna dada degut a alguna causa aquesta \u00e9s la manera m\u00e9s apropiada de fer-ho. Si no disposem d'aquestes c\u00f2pies probablement ens sigui impossible recuperar algun contingut perdut o que hagi sofert algun dany.","title":"11. C\u00f2pies de seguretat"},{"location":"Documentaci%C3%B3/#111-copies-de-seguretat-al-nuvol","text":"Si realitzem c\u00f2pies de seguretat i les guardem al mateix dispositiu des d'on \u00e9s creen, aix\u00f2 no ens serveix de gaire, ja que si el dispositiu principal falla, tamb\u00e9 perdrem les c\u00f2pies que tinguem generades en aquest. Aix\u00f2 \u00e9s pot solucionar realitzant les c\u00f2pies de seguretat al n\u00favol. L'avantatja \u00e9s que aquestes c\u00f2pies es guardaran fora del dispositiu on es generen i si aquest falla les podrem recuperar sense cap tipus de problema.","title":"11.1. C\u00f2pies de seguretat al n\u00favol"},{"location":"Documentaci%C3%B3/#1111-installacio-rclone","text":"Per muntar les c\u00f2pies al n\u00favol i tindre-les a un lloc m\u00e9s segur, el que hem fet ha sigut utilitzar l\u2019eina \"Rclone\" . Aquesta eina ens permet crear un punt de muntatge al nostre compte de \"Drive\" dins la pr\u00f2pia Raspberry. Comen\u00e7ant amb la instal\u00b7laci\u00f3, el que tenim que fer primer \u00e9s situar-nos dins de \"/tmp\" . Ara ens descarregarem l\u2019eina. Tenim dos opcions, fer-ho amb l\u2019ordre \"apt-get install rclone\" o descarregar-nos la versi\u00f3 m\u00e9s recent des de la seva p\u00e0gina web. Hem escollit descarregar la versi\u00f3 de la web ja que \u00e9s la que est\u00e0 m\u00e9s actualitzada.","title":"11.1.1. Instal\u00b7laci\u00f3 Rclone"},{"location":"Documentaci%C3%B3/#1112-configuracio-compte-de-google","text":"Com que realitzarem les copies al \"Drive\" , tindrem que configurar el nostre compte per permetre aquesta acci\u00f3. Per fer-ho, obrirem la consola de desenvolupador de Google i entrarem amb el nostre compte. Tindrem que crear un nou projecte. A nosaltres ja ens apareix creat perqu\u00e8 estem realitzant les captures despr\u00e9s d\u2019haver-lo fet. Li donarem un nom i el crearem. Ara anirem a la pestanya \"Habilitar API y servicios\" . A la barra de cerca buscarem \"Drive\" i seleccionarem el \"Google Drive API\" . Un cop seleccionat l\u2019habilitarem fent clic sobre \"Habilitar\" . A l\u2019habilitar la \"API\" ens portar\u00e0 dins d\u2019aquesta. Ens dirigirem a l\u2019apartat \"Credenciales\" . Ens sortir\u00e0 una alerta que ens demana configurar \"pantalla de consentimiento de Oauth\" . Farem clic a sobre per configurar-la. L\u2019\u00fanic que tindrem que fer ser\u00e0 indicar l\u2019\u00fas que tindr\u00e0, en aquest cas \"Interno\" i donar-li el nom i un correu electr\u00f2nic. Les altres opcions les deixarem per defecte. Ara tornarem a l\u2019apartat \"Credenciales\" i farem clic sobre \"Crear credenciales\" per crear-les. Veurem que ens apareixen diferents opcions, haurem d\u2019escollir \"ID de cliente de OAuth\" . Seleccionarem el tipus d\u2019aplicaci\u00f3, en aquest cas \"App de escritorio\" i li donarem un nom. Un cop creada ens apareixer\u00e0 una finestra en la qual ens mostra un \"ID\" i una contrasenya.","title":"11.1.2. Configuraci\u00f3 compte de Google"},{"location":"Documentaci%C3%B3/#1113-configuracio-rclone","text":"Quan tinguem el client creat, tornarem a la raspberry per realitzar la configuraci\u00f3 pertinent al \"rclone\" . Executarem l\u2019ordre \"rclone config\" per comen\u00e7ar amb la configuraci\u00f3. Se\u2019ns obrir\u00e0 un assistent el qual ens comen\u00e7ar\u00e0 a fer preguntes. Anirem contestant amb la informaci\u00f3 pertinent. Ens apareixer\u00e0 un entorn similar al seg\u00fcent: Al acabar la configuraci\u00f3 tornarem a executar l\u2019ordre \"rclone config\" per veure que s\u2019ha creat correctament.","title":"11.1.3. Configuraci\u00f3 Rclone"},{"location":"Documentaci%C3%B3/#1114-muntar-directori-automaticament","text":"Per a muntar el directori fem servir l\u2019ordre \"rclone mount\" , la qual hem posat a un script. Posteriorment aquest script l\u2019hem afegit al crontab per a que el directori es munti autom\u00e0ticament cada vegada que s\u2019engega el dispositiu. Si ens dirigim al punt de muntatge, podem veure com ens apareix el contingut del Drive al qual ho hem vinculat.","title":"11.1.4. Muntar directori autom\u00e0ticament"},{"location":"Documentaci%C3%B3/#112-copies-de-seguretat-del-sistema-operatiu","text":"En un principi vam pensar de realitzar c\u00f2pies de seguretat peri\u00f2diques de tot el sistema operatiu, per\u00f2 despr\u00e9s ens en vam donar compte de que aquestes tardaven molt en realitzar-se i mentre s'estaven fent la Raspberry sofria bastant, ja que apart de realitzar la c\u00f2pia tamb\u00e9 est\u00e0 executant altres serveis i scripts. Per solucionar aix\u00f2, vam decidir que la manera m\u00e9s correcta seria realitzar una c\u00f2pia del sistema complet amb tots els serveis instal\u00b7lats per tindre una base i si es necessites instal\u00b7lar de nou, nom\u00e9s caldria afegir a aquesta c\u00f2pia les c\u00f2pies de la base de dades i la p\u00e0gina web que s'expliquen a sota. Igualment, la manera de realitzar la c\u00f2pia de seguretat del sistema ha sigut mitjan\u00e7ant el seg\u00fcent script basat en \"bash\". #!/bin/bash dd if=/dev/sda of=/home/pi/mnt/gdrive/backup Aquest script ens gener\u00e0 una imatge la qual podem cremar en una altra targeta SD per si la volem clonar o recuperar. La imatge s'envia directament a la carpeta de \"backup\" que tenim al \"Drive\" on emmagatzem les c\u00f2pies de seguretat al n\u00favol.","title":"11.2. C\u00f2pies de seguretat del sistema operatiu"},{"location":"Documentaci%C3%B3/#113-copies-de-seguretat-de-la-base-de-dades","text":"Mysqldump \u00e9s una eina imprescindible per fer c\u00f2pies de seguretat a la nostra base de dades, ja que per error, podem esborrar alguna taula, o fins i tot, se'ns pot esborrar la BBDD i no podem recuperar-la. Per poder fer un backup total de la base de dades que estigu\u00e9ssim treballant, el que hem de fer \u00e9s, agafar la base de dades que tingu\u00e9ssim a fer la c\u00f2pia i executar aquesta comanda: -h per posar el host -u l\u2019usuari -p la contrasenya el nom de la BBDD > redirecci\u00f3 el nom del fitxer date +%Y-%m-%d per afegir la data Escrita la comanda i executada, ens crea la c\u00f2pia de la base de dades al directori on es trob\u00e9ssim actualment. Per exemple a l'apartat dels backups Si volgu\u00e9ssim recuperar una c\u00f2pia de seguretat d'una base de dades, nom\u00e9s hem de canviar la redirecci\u00f3 < i deixant les mateixes variables per defecte:","title":"11.3. C\u00f2pies de seguretat de la base de dades"},{"location":"Documentaci%C3%B3/#114-copies-de-seguretat-de-la-pagina-web","text":"Mantenir el nostre projecte web, \u00e9s una de les prioritats, i volem assegurar-nos, no perdre cap dada, i si esborrem qualsevol cosa, fer una c\u00f2pia de seguretat. En laravel, hem d'instal\u00b7lar el composer corresponent als backups, utilitzant aquesta comanda: Seguit, crearem un script, que autom\u00e0ticament, executi les comandes per entrar a la carpeta on es troba el projecte, crear el backup i esperar 2 minuts abans d'executar les seg\u00fcents operacions: A continuaci\u00f3 al script, introdu\u00efm, que entri al directori on es troba la copia de seguretat (comprimida amb .zip), que es faci una c\u00f2pia al directori de backups que tenim destinat i esperi dos minuts. I per finalitzar, torna a entrar dintre del directori del projecte (a la ruta d'on es troba la c\u00f2pia de seguretat) i esborri el .zip: Feta les dos copies de seguretat, establirem que cada dia (a les 3:00 de la matinada i a les 3:05) es facin les copies de seguretat. Utilitzarem el crontab per fer-ho:","title":"11.4. C\u00f2pies de seguretat de la p\u00e0gina web"},{"location":"Documentaci%C3%B3/#12-manuals-dusuari","text":"","title":"12. Manuals d'usuari"},{"location":"Documentaci%C3%B3/#121-pagina-web","text":"P\u00e0gina d'inici Quan ens dirigim a la p\u00e0gina web el primer que veurem ser\u00e0 el seg\u00fcent: Dalt de tot, ens apareix un men\u00fa amb els apartats Inici, Qui som?, Projecte, Contacta'ns i Login. Una mica m\u00e9s a baix veurem el t\u00edtol, una petita descripci\u00f3 i el bot\u00f3 \"Informat\". Aquest bot\u00f3 ens dirigeix a l'apartat Projecte, en el qual s'explica m\u00e9s en detall la idea d'aquest. Tornant al men\u00fa de dalt, cada una de les opcions ens portar\u00e0 a un lloc diferent. El contingut de cadascuna d'aquestes \u00e9s el seg\u00fcent: Inici Ens portar\u00e0 dalt de tot, es a dir, a la p\u00e0gina que veiem quan entrem a la web. Qui som? Aquesta opci\u00f3 ens mostra un apartat dedicat a una breu descripci\u00f3 dels integrants del projecte i una breu introducci\u00f3 d'aquest. Projecte Aqu\u00ed podrem veure una descripci\u00f3 del projecte m\u00e9s detallada. Contacta'ns Ens mour\u00e0 al peu de la p\u00e0gina on hi ha diferents formes de contactar amb nosaltres. Ja sigui per contractar la idea o per algun dubte. Login Si ja disposem del producte a les nostres mans, llavors tindrem un compte per visualitzar les dades de les nostres m\u00e0quines. En aquest cas nom\u00e9s caldr\u00e0 iniciar sessi\u00f3 amb aquest compte i ja tindrem acc\u00e9s al panell de control. Panell de control Des d'aqu\u00ed podrem visualitzar la temperatura i humitat de la m\u00e0quina, l'estoc dels productes i la ubicaci\u00f3 de la mateixa. El primer que veurem a l'accedir, ser\u00e0 un men\u00fa a l'esquerra amb les m\u00e0quines disponibles per a nosaltres. Dalt veurem un men\u00fa en el qual sabrem amb quin usuari estem logats i fent clic a sobre ens permet tancar la sessi\u00f3 d'aquest. Si entrem dins d'una de les m\u00e0quines, hi trobarem tres apartats: Temperatura i humitat: On mostrar\u00e0 les \u00faltimes 24 dades sobre la temperatura i humitat ordenades de m\u00e9s recents a m\u00e9s antigues. Estoc: Veurem els productes que hi ha a la m\u00e0quina amb l'estoc restant d'aquest i un missatge amb un fons de color que ens indica si est\u00e0 ple o buit passant per mitat d'estoc i poc estoc. Ubicaci\u00f3: Sabrem la localitzaci\u00f3 exacta de la m\u00e0quina mitjan\u00e7ant un mapa del Google Maps.","title":"12.1. P\u00e0gina web"},{"location":"Documentaci%C3%B3/#122-aplicacio-mobil","text":"Un cop instal\u00b7lada l\u2019app trobarem una pantalla on tenim tres botons, un on \u00e9s mostrara la ubicaci\u00f3 de les nostres m\u00e0quines, un on podem veure els productes disponibles i finalment un \u00faltim que tenim una breu descripci\u00f3 de qui som. Si accedim a les m\u00e0quines ens mostrara la seg\u00fcent pantalla, on trobarem les ubicacions de les nostres m\u00e0quines. A la part superior esquerra trobem un bot\u00f3 per a tornar a la pantalla inicial. Per arribar-hi a elles hem de pr\u00e9mer sobre el bot\u00f3 de la ubicaci\u00f3 desitjada. En aquest cas hem decidit anar a la ubicaci\u00f3 de Tortosa i ens obrir\u00e0 el google maps on podrem seleccionar l\u2019opci\u00f3 que ens indique fins el dest\u00ed, compartir la ubicaci\u00f3 i guardar-la per a pr\u00f2ximes la propera vegada. En aquesta pantalla trobem una breu descripci\u00f3 sobre qui som, on expliquem breument en que consisteix el nostre projecte. En l\u2019apartat de productes podem veure de tots els que disposem lliscant cap avall. En el cas de voler consultar informaci\u00f3 del producte hem de fer clic a al bot\u00f3 de sota la imatge. Baix de tot disposem d\u2019un bot\u00f3 per tornar enrere, a la primera pantalla de l\u2019app. En aquest cas hem volgut consultar informaci\u00f3 sobre un refresc i ens mostra el que es una beguda, els ingredients que la componen per si alg\u00fa te alguna al\u00b7l\u00e8rgia pugui saber si ho pot consumir o no. Tamb\u00e9 trobem una breu descripci\u00f3 i finalment el preu. Disposem un bot\u00f3 per a tornar enrere a la pantalla dels productes.","title":"12.2. Aplicaci\u00f3 m\u00f2bil"},{"location":"Documentaci%C3%B3/#13-webgrafia","text":"Team, M. (n.d.). MkDocs . Mkdocs. https://www.mkdocs.org/ Primeros pasos con MkDocs - Creando este sitio . (n.d.). cuadernosdenotas.github. https://cuadernosdenotas.github.io/creandoestesitio/007MkDocs.html The Raspberry Pi Foundation. (n.d.). Raspberry Pi 2 Model B . Raspberry Pi. https://www.raspberrypi.org/products/raspberry-pi-2-model-b/ Zorrilla, V. A. P. B. J. (n.d.). Raspberry Pi \u2013 Conectando un sensor de temperatura y humedad DHT11 \u2013 Internet de las Cosas . internetdelascosas. https://www.internetdelascosas.cl/2017/05/19/raspberry-pi-conectando-un-sensor-de-temperatura-y-humedad-dht11/ Campbell, S. (2020, July 15). How to Set Up the DHT11 Humidity Sensor on the Raspberry Pi . Circuit Basics. https://www.circuitbasics.com/how-to-set-up-the-dht11-humidity-sensor-on-the-raspberry-pi/ F. (2020, December 25). Raspberry Pi: Measure Humidity and Temperature with DHT11/DHT22 . Raspberry Pi Tutorials. https://tutorials-raspberrypi.com/raspberry-pi-measure-humidity-temperature-dht11-dht22/ C. (2015, July 16). Sensores de humedad y temperatura DHT11 y DTH22 en la Raspberry Pi | Carlini\u2019s Blog . carlini. http://carlini.es/sensores-de-humedad-y-temperatura-dht11-y-dth22-en-la-raspberry-pi/ R. (2019, September 26). C\u00f3mo usar un sensor de distancia HC-SR04 con tu Raspberry Pi . Descubrearduino.com. https://descubrearduino.com/hc-sr04-con-tu-raspberry-pi/ Garc\u00eda, S. (2021, February 24). C\u00f3mo conectar un sensor ultras\u00f3nico HC-SR04 a Raspberry Pi . 330ohms. https://blog.330ohms.com/2020/06/17/como-conectar-un-sensor-ultrasonico-a-raspberry-pi/ F. (2015, November 11). Using a Raspberry Pi distance sensor (ultrasonic sensor HC-SR04) . Raspberry Pi Tutorials. https://tutorials-raspberrypi.com/raspberry-pi-ultrasonic-sensor-hc-sr04/ Hut, T. P. (2013, October 22). HC-SR04 Ultrasonic Range Sensor on the Raspberry Pi . The Pi Hut. https://thepihut.com/blogs/raspberry-pi-tutorials/hc-sr04-ultrasonic-range-sensor-on-the-raspberry-pi Instructables. (2019, November 14). Distance Sensing With Raspberry Pi and HC-SR04 . https://www.instructables.com/Distance-Sensing-With-Raspberry-Pi-and-HC-SR04/ G. (2019a, December 7). Raspberry Pi Distance Sensor using the HC-SR04 . Pi My Life Up. https://pimylifeup.com/raspberry-pi-distance-sensor/ The Raspberry Pi Foundation. (n.d.). Operating system images \u2013 . Raspberry Pi. https://www.raspberrypi.org/software/operating-systems/ Seguridad en la Raspberry Pi . (n.d.). nacholoop.github. https://nacholoop.github.io/enigma/seguridad.html#consejos L. (2020, January 21). C\u00f3mo instalar MySQL en Raspberry Pi . Luis Llamas. https://www.luisllamas.es/como-instalar-mysql-en-raspberry-pi/ Meque, R. (2018, June 14). Using Raspberry Pi for Laravel developing - Ronie Meque . Medium. https://medium.com/@roniemeque/using-raspberry-pi-for-laravel-developing-30dabcdeba43 Installation - Laravel - The PHP Framework For Web Artisans . (n.d.). Laravel. https://laravel.com/docs/7.x/ lesson-4-save-raspberry-pi-sensor-data-to-mysql-database | jupyter notebooks gallery . (n.d.). Notebook. https://notebook.community/richjimenez/mysql-data-raspberry-pi/deliver/lesson-4-save-raspberry-pi-sensor-data-to-mysql-database E. (2021, February 9). Setup a Raspberry Pi MYSQL Database . Pi My Life Up. https://pimylifeup.com/raspberry-pi-mysql/ E. (2021b, February 11). How to Install PHPMyAdmin on the Raspberry Pi . Pi My Life Up. https://pimylifeup.com/raspberry-pi-phpmyadmin/ D. (2021a, February 27). C\u00f3mo hacer backups de MySQL/MariaDB con el comando mysqldump . daniloaz.com. https://www.daniloaz.com/es/como-hacer-backups-de-mysql-mariadb-con-el-comando-mysqldump/ Klauser, A. (2020, May 31). Mounting Google Drive on Raspberry Pi - Artur Klauser . Medium. https://medium.com/@artur.klauser/mounting-google-drive-on-raspberry-pi-f5002c7095c2 Team, C. (2019, August 16). Clone Micro SD Card [Raspberry Pi, Linux, dd] . CYBERPUNK. https://www.cyberpunk.rs/clone-micro-sd-card UPC - EETAC - DEEL - Sistemes digitals - digsys.upc.edu - curs de Raspberry Pi . (n.d.). digsys.upc. http://digsys.upc.edu/rpi/index.html UPC - EETAC - DEEL - Sistemes digitals - digsys.upc.edu - curs de Raspberry Pi . (n.d.). digsys.upc. http://digsys.upc.edu/rpi/workshop/workshop.html UPC - EETAC - DEEL - Sistemes digitals - digsys.upc.edu - curs de Raspberry Pi . (n.d.-b). digsys.upc. http://digsys.upc.es/rpi/programari.html Rasberry PI - instalaci\u00f3n y configuraci\u00f3n de red [Bricolabs Wiki] . (n.d.). bricolabs. https://bricolabs.cc/wiki/guias/raspberry_pi_-_instalacion_del_sistema_operativo_y_configuracion_de_red#descarga Santos, E. (2016, August 13). C\u00f3mo configurar y poner en marcha una Raspberry Pi \u201cpara torpes.\u201d Genbeta. https://www.genbeta.com/paso-a-paso/como-configurar-y-poner-en-marcha-una-raspberry-pi-para-torpes L. (2018, April 15). C\u00f3mo configurar Raspberry Pi con GUI o consola de comandos . Luis Llamas. https://www.luisllamas.es/configurar-raspberry-pi/ Download Android Studio and SDK tools | Android Studio . (n.d.). Android Developers. https://developer.android.com/studio?hl=es&gclid=Cj0KCQjwna2FBhDPARIsACAEc_UNJIbzFyxGURa5NIdP7-367iS2C3ion_MJNMcEN0UdiJQhv-jGW-MaAuegEALw_wcB&gclsrc=aw.ds Documentation | Desarrolladores de Android | . (n.d.). Android Developers. https://developer.android.com/docs?hl=es 25. \u00bf Como usar ScrollView en Android ? (2017, April 3). [Video]. YouTube. https://www.youtube.com/watch?v=huxvGwRtt5Q Android ScrollView Vertical - javatpoint . (n.d.). Www.Javatpoint.Com. https://www.javatpoint.com/android-scrollview-vertical Download Android Studio and SDK tools | Android Studio . (n.d.). Android Developers. https://developer.android.com/studio?hl=es-419 G. (n.d.). Failure [INSTALL_FAILED_MISSING_SHARED_LIBRARY] \u00b7 Issue #72 \u00b7 googlearchive/tango-examples-java . GitHub. https://github.com/googlearchive/tango-examples-java/issues/72 Iniciar Sesi\u00f3n | OpenWebinars . (n.d.). OpenWebinars.net. https://openwebinars.net/accounts/login/?next=/academia/aprende/primera-app-android/8891/ MovilZona. (2016, March 3). Curso de Desarrollo Android. Tema 11: Android Studio: Lanzar un segundo Activity desde otro Activity . https://www.movilzona.es/tutoriales/android/desarrollo/curso-de-desarrollo-android-tema-11-android-studio-lanzar-un-segundo-activity-desde-otro-activity/ pasar de una activity a otra con boton android studio . (2015, December 14). [Video]. YouTube. https://www.youtube.com/watch?v=ej8AdPJp6vE","title":"13. Webgrafia"},{"location":"Documentaci%C3%B3/#14-annex","text":"","title":"14. Annex"},{"location":"Documentaci%C3%B3/#141-taules-base-de-dades","text":"CREATE TABLE projectedb.productes ( id INTEGER PRIMARY KEY, nom VARCHAR(20), pes NUMERIC(3,2), data_compra DATE, stock NUMERIC(3,0), ingredients VARCHAR(100), caducitat DATE, descripcio VARCHAR(100) ); CREATE TABLE projectedb.usuaris ( id INTEGER PRIMARY KEY, usuari VARCHAR(20), email VARCHAR(75), contrasenya VARCHAR(244) ); CREATE TABLE projectedb.administradors ( dni INTEGER PRIMARY KEY, nom VARCHAR(20), cognom VARCHAR(20), contrasenya VARCHAR(244), email VARCHAR(75) ); CREATE TABLE projectedb.maquines ( id INTEGER PRIMARY KEY, ubicacio VARCHAR(20), model VARCHAR(15), temperatura NUMERIC(2,2), id_producte INTEGER, id_usuari INTEGER, dni_administrador INTEGER, CONSTRAINT fk_id_producte_maquines FOREIGN KEY (id_producte) REFERENCES productes(id) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT fk_id_usuari_maquines FOREIGN KEY (id_usuari) REFERENCES usuaris(id) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT fk_dni_administradors_maquines FOREIGN KEY (dni_administrador) REFERENCES administradors(dni) ON DELETE CASCADE ON UPDATE CASCADE );","title":"14.1. Taules base de dades"},{"location":"Documentaci%C3%B3/#142-sensors","text":"Sensor de temperatura import Adafruit_DHT import time import RPi.GPIO as GPIO import datetime import MySQLdb #Variables per realitzar la connexio amb la base de dades hostname = '127.0.0.1' username = 'laravel' password = 'alumne' database = 'projectedb' #Port al qual est\u00e0 connectat el sensor dht_sensor_port = 4 #Model del sensor dht_sensor_type = Adafruit_DHT.DHT11 #Recollida d'informacio dels GPIO GPIO.setmode(GPIO.BCM) GPIO.setup(dht_sensor_port, GPIO.IN) #Data now = datetime.datetime.now() date = now.strftime('%d-%m-%Y %H:%M:%S') #Query que farem servir per insertar les dades def insert_record( temp, hum, date ): query = \"INSERT INTO dht11 (temp,hum,date) \" \\ \"VALUES (%s,%s,%s)\" args = (temp,hum,date) #Connexi\u00f3 a la base de dades i execussio de la query de dalt per insertar les dades conn = MySQLdb.connect( host=hostname, user=username, passwd=password, db=database ) cursor = conn.cursor() cursor.execute(query, args) conn.commit() #Bucle per afegir les dades recollides pel sensor a la base de dades corresponent try: while True: hum, temp = Adafruit_DHT.read_retry(dht_sensor_type, dht_sensor_port) now = datetime.datetime.now() date = now.strftime('%d-%m-%Y %H:%M:%S') insert_record(format(temp,'.2f'),format(hum,'.2f'),str(date)) time.sleep(3) #Si parem el programa amb CTRL+C except KeyboardInterrupt: print(\"Parant el programa\") Sensor d'ultrasons #Libraries import RPi.GPIO as GPIO import time import mysql.connector #Configurac\u00f3 GPIO GPIO.setmode(GPIO.BCM) GPIO_TRIGGER = 23 GPIO_ECHO = 24 GPIO.setup(GPIO_TRIGGER, GPIO.OUT) GPIO.setup(GPIO_ECHO, GPIO.IN) def distance(): GPIO.output(GPIO_TRIGGER, True) time.sleep(0.00001) GPIO.output(GPIO_TRIGGER, False) StartTime = time.time() StopTime = time.time() while GPIO.input(GPIO_ECHO) == 0: StartTime = time.time() while GPIO.input(GPIO_ECHO) == 1: StopTime = time.time() TimeElapsed = StopTime - StartTime distance = (TimeElapsed * 34300) / 2 return distance #Connexio a la base de dades mydb = mysql.connector.connect ( host = \"127.0.0.1\", user = \"laravel\", password = \"alumne\", database = \"projectedb\" ) mycursor = mydb.cursor() try: while True: dist = distance() if 0 <= dist <= 8.8: stock = 3 status = \"Stock ple\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif 9 <= dist <= 13.9: stock = 2 status = \"Stock per la mitat\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif 14.2 <= dist <= 18.6: stock = 1 status = \"Stock s'esta esgotant\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") elif dist >= 18.9: stock = 0 status = \"Stock esgotat\" print(str(status)+ \" Productes: \" + str(stock)) sql = \"UPDATE productes SET stock = '\" + str(stock) + \"' WHERE nom = 'Aigua petita'\" mycursor.execute(sql) mydb.commit() print(mycursor.rowcount, \"record(s) affected\") time.sleep(1) except KeyboardInterrupt: print(\"\") print(\"Parat per l'usuari\") GPIO.cleanup()","title":"14.2. Sensors"},{"location":"Documentaci%C3%B3/#143-pagina-web","text":"Vistes Laravel <?php use Illuminate\\Support\\Facades\\Route; use Illuminate\\Support\\Facades\\Auth; use Illuminate\\Support\\Facades\\DB; /* |-------------------------------------------------------------------------- | Web Routes |-------------------------------------------------------------------------- | | Here is where you can register web routes for your application. These | routes are loaded by the RouteServiceProvider within a group which | contains the \"web\" middleware group. Now create something great! | */ Auth::routes(); Route::get('/', function () { return view('inici'); }); Route::get('/home', 'HomeController@index')->name('home'); Route::get('/dashboard', function () { return view('maquina1'); }); P\u00e0gina d'inici <!doctype html> <html lang=\"{{ str_replace('_', '-', app()->getLocale()) }}\"> <head> <meta charset=\"utf-8\" /> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\" /> <meta name=\"description\" content=\"\" /> <meta name=\"author\" content=\"\" /> <title>CES</title> <link rel=\"icon\" type=\"image/x-icon\" href=\"grayscale/assets/img/favicon.ico\" /> <!-- Font Awesome icons (free version)--> <script src=\"https://use.fontawesome.com/releases/v5.15.1/js/all.js\" crossorigin=\"anonymous\"></script> <!-- Google fonts--> <link href=\"https://fonts.googleapis.com/css?family=Varela+Round\" rel=\"stylesheet\" /> <link href=\"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i\" rel=\"stylesheet\" /> <!-- Core theme CSS (includes Bootstrap)--> <link href=\"grayscale/css/styles.css\" rel=\"stylesheet\" /> </head> <body id=\"page-top\"> <!-- Navigation--> <nav class=\"navbar navbar-expand-lg navbar-light fixed-top\" id=\"mainNav\"> <div class=\"container\"> <a class=\"navbar-brand js-scroll-trigger\" href=\"#page-top\">Inici</a> <button class=\"navbar-toggler navbar-toggler-right\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"> Menu <i class=\"fas fa-bars\"></i> </button> <div class=\"collapse navbar-collapse\" id=\"navbarResponsive\"> <ul class=\"navbar-nav ml-auto\"> @guest <li class=\"nav-item\"><a class=\"nav-link js-scroll-trigger\" href=\"#about\">Qui som?</a></li> <li class=\"nav-item\"><a class=\"nav-link js-scroll-trigger\" href=\"#projects\">Projecte</a></li> <li class=\"nav-item\"><a class=\"nav-link js-scroll-trigger\" href=\"#contacte\">Contacta'ns</a></li> <li class=\"nav-item\"><a class=\"nav-link js-scroll-trigger\" href=\"{{ route('login') }}\">{{ __('Login') }}</a></li> @else <li class=\"nav-item dropdown\"> <a id=\"navbarDropdown\" class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" v-pre> {{ Auth::user()->name }} </a> <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\"> <a class=\"dropdown-item\" href=\"{{ route('logout') }}\" onclick=\"event.preventDefault(); document.getElementById('logout-form').submit();\"> {{ __('Logout') }} </a> <form id=\"logout-form\" action=\"{{ route('logout') }}\" method=\"POST\" class=\"d-none\"> @csrf </form> </div> </li> @endguest </ul> </div> </div> </nav> <!-- Masthead--> <header class=\"masthead\"> <div class=\"container d-flex h-100 align-items-center\"> <div class=\"mx-auto text-center\"> <h1 class=\"mx-auto my-0\">CES - Control d'estoc amb sensors</h1><br><br> <h2 class=\"text-white-50 mx-auto mt-2 mb-5\">Una idea pensada per a facilitar la feina als treballadors del m\u00f3n del vending.</h2> <a class=\"btn btn-primary js-scroll-trigger\" href=\"#projects\">Informat</a> </div> </div> </header> <!-- About--> <section class=\"about-section text-center\" id=\"about\"> <div class=\"container\"> <div class=\"row\"> <div class=\"col-lg-8 mx-auto\"> <h2 class=\"text-white mb-4\">Sobre nosaltres</h2> <p class=\"text-white-50\"> Som un grup format per tres estudiants els quals ens ha motivat dur a cap aquesta idea la comoditat dels treballadors. Tamb\u00e9 ens hem decidit per portar-la a cap pensant amb el medi ambient, ja que si es t\u00e9 un control exacte de l'estoc de les m\u00e0quines, el repartidor sap en tot moment quan s'est\u00e0 esgotant un producte i \u00e9s necessari reposar-lo, aix\u00ed, no li cal estar fent viatges sense saber el que realment ha de reposar. </p> </div> </div> <img class=\"img-fluid\" src=\"grayscale/assets/img/confort.png\" alt=\"\" /> </div> </section> <!-- Projects--> <section class=\"projects-section bg-light\" id=\"projects\"> <div class=\"container\"> <!-- Featured Project Row--> <div class=\"row align-items-center no-gutters mb-4 mb-lg-5\"> <div class=\"col-xl-8 col-lg-7\"><img class=\"img-fluid mb-3 mb-lg-0\" src=\"grayscale/assets/img/vending.png\" alt=\"\" /></div> <div class=\"col-xl-4 col-lg-5\"> <div class=\"featured-text text-center text-lg-left\"> <h4>De que va el nostre projecte?</h4> <p class=\"text-black-50 mb-0\"> Consisteix amb la instal\u00b7laci\u00f3 d'uns sensors a les m\u00e0quines de vending per a controlar en tot moment l'estoc de productes del qual disposa aquesta. El treballador podr\u00e0 consultar en tot moment l'estoc disponible. </p> </div> </div> </div> <!-- Project One Row--> <div class=\"row justify-content-center no-gutters mb-5 mb-lg-0\"> <div class=\"col-lg-6\"><img class=\"img-fluid\" width=\"350\" height=\"350\" margin-left=\"10\" src=\"grayscale/assets/img/objectiu.png\" alt=\"\" /></div> <div class=\"col-lg-6\"> <div class=\"bg-black text-center h-100 project\"> <div class=\"d-flex h-100\"> <div class=\"project-text w-100 my-auto text-center text-lg-left\"> <h4 class=\"text-white\">Objectius</h4> <ul class=\"mb-0 text-white-50\"> <li>Millora en la rapidesa del treball.</li> <li>Facilitat per saber quins productes cal reposar.</li> <li>Reducci\u00f3 de costos, ja que el treballador nom\u00e9s \u00e9s despla\u00e7ar\u00e0 quan s'hagi de reposar algun producte.</li> </ul> <hr class=\"d-none d-lg-block mb-0 ml-0\" /> </div> </div> </div> </div> </div> <!-- Project Two Row--> <div class=\"row justify-content-center no-gutters\"> <div class=\"col-lg-6\"><img class=\"img-fluid\" width=\"350\" height=\"350\" src=\"grayscale/assets/img/motivacio.png\" alt=\"\" /></div> <div class=\"col-lg-6 order-lg-first\"> <div class=\"bg-black text-center h-100 project\"> <div class=\"d-flex h-100\"> <div class=\"project-text w-100 my-auto text-center text-lg-right\"> <h4 class=\"text-white\">Motivaci\u00f3</h4> <p class=\"mb-0 text-white-50\"> En aquest projecte pretenem crear un avan\u00e7 per a les empreses que es dediquen a reposar els productes de les m\u00e0quines de vending, facilitant-los aix\u00ed la feina, ja que saben en tot moment quin \u00e9s l'estoc de cada m\u00e0quina i quins productes cal reposar. </p> <hr class=\"d-none d-lg-block mb-0 mr-0\" /> </div> </div> </div> </div> </div> </div> </section> <!--Contacte--> <section class=\"contact-section bg-black\" id=\"contacte\"> <div class=\"container\"> <div class=\"row\"> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-map-marked-alt text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">On estem?</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\">Av. de Crist\u00f2fol Colom, 34, 42, 43500 Tortosa, Tarragona</div> </div> </div> </div> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-envelope text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">Pregunta'ns sense cap comprom\u00eds</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\"><a href=\"#!\">info@ces.com</a></div> </div> </div> </div> <div class=\"col-md-4 mb-3 mb-md-0\"> <div class=\"card py-4 h-100\"> <div class=\"card-body text-center\"> <i class=\"fas fa-mobile-alt text-primary mb-2\"></i> <h4 class=\"text-uppercase m-0\">Truca'ns</h4> <hr class=\"my-4\" /> <div class=\"small text-black-50\">977000000</div> </div> </div> </div> </div> <div class=\"social d-flex justify-content-center\"> <a class=\"mx-2\" href=\"#!\"><i class=\"fab fa-twitter\"></i></a> <a class=\"mx-2\" href=\"#!\"><i class=\"fab fa-facebook-f\"></i></a> <a class=\"mx-2\" href=\"#!\" target=\"_blank\"><i class=\"fab fa-instagram\"></i></a> </div> </div> </section> <!-- Footer--> <footer class=\"footer bg-black small text-center text-white-50\"> <div class=\"container\">Copyright \u00a9 CES 2021</div> </footer> <!-- Bootstrap core JS--> <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js\"></script> <!-- Third party plugin JS--> <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js\"></script> <!-- Core theme JS--> <script src=\"grayscale/js/scripts.js\"></script> </body> </html> Panell de control <!DOCTYPE html> <html lang=\"es\"> <head> <meta charset=\"utf-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"> <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\"> <script src=\"{{ asset('js/app.js') }}\" defer></script> <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js\"></script> <script> $(document).ready(function() { setInterval(function() { cache_clear() }, 10000); }); function cache_clear() { window.location.reload(true); } </script> <title>CES Dashboard</title> <!-- Font Awesome Icons --> <link rel=\"stylesheet\" href=\"plugins/fontawesome-free/css/all.min.css\"> <!-- Theme style --> <link rel=\"stylesheet\" href=\"adminlte/css/adminlte.min.css\"> <!-- Google Font: Source Sans Pro --> <link href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700\" rel=\"stylesheet\"> </head> <body class=\"hold-transition sidebar-mini\"> <div class=\"wrapper\"> <!-- Navbar --> <nav class=\"main-header navbar navbar-expand navbar-white navbar-light\"> <!-- Left navbar links --> <ul class=\"navbar-nav\"> <li class=\"nav-item d-none d-sm-inline-block\"> <a href=\"#\" class=\"nav-link\">Inici</a> </li> </ul> <!-- Right navbar links --> <ul class=\"navbar-nav ml-auto\"> <li class=\"nav-item dropdown\"> <a id=\"navbarDropdown\" class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" v-pre> {{ Auth::user()->name }} </a> <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\"> <a class=\"dropdown-item\" href=\"{{ route('logout') }}\" onclick=\"event.preventDefault(); document.getElementById('logout-form').submit();\"> {{ __('Logout') }} </a> <form id=\"logout-form\" action=\"{{ route('logout') }}\" method=\"POST\" class=\"d-none\"> @csrf </form> </div> </li> </ul> </nav> <!-- Main Sidebar Container --> <aside class=\"main-sidebar sidebar-dark-primary elevation-4\"> <!-- Brand Logo --> <a href=\"/dashboard\" class=\"brand-link\"> <span class=\"brand-text font-weight-light\">M\u00e0quines</span> </a> <!-- Sidebar --> <div class=\"sidebar\"> <!-- Sidebar Menu --> <nav class=\"mt-2\"> <ul class=\"nav nav-pills nav-sidebar flex-column\" data-widget=\"treeview\" role=\"menu\" data-accordion=\"false\"> <li class=\"nav-item\"> <a href=\"/dashboard\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #1</p> </a> </li> <li class=\"nav-item\"> <a href=\"#\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #2</p> </a> </li> <li class=\"nav-item\"> <a href=\"#\" class=\"nav-link\"> <i class=\"far fa-circle nav-icon\"></i> <p>M\u00e0quina #3</p> </a> </li> </ul> </nav> </div> </aside> <!-- Content Wrapper. Contains page content --> <div class=\"content-wrapper\"> <!-- Content Header (Page header) --> <div class=\"content-header\"> <div class=\"container-fluid\"> <div class=\"row mb-2\"> <div class=\"col-sm-6\"> <h1 class=\"m-0 text-dark\">M\u00e0quina #1</h1> </div> </div> </div> </div> <!-- Main content --> <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-body\"> <table class=\"table\"> <thead> <tr> <th scope=\"col\">#</th> <th scope=\"col\">Temperatura</th> <th scope=\"col\">Humitat</th> <th scope=\"col\">Data i hora</th> </tr> </thead> <tbody> <?php $cont = 0; $con = mysqli_connect('127.0.0.1', 'laravel', 'alumne', 'projectedb'); $sql = \"SELECT * FROM dht11 ORDER BY date desc LIMIT 24\"; $result = mysqli_query($con, $sql); foreach ($result as $value) { $cont += 1; echo (\"<tr>\"); echo (\"<td>\" . $cont . \"</td>\"); echo (\"<td>\" . $value[\"temp\"] . \"</td>\"); echo (\"<td>\" . $value[\"hum\"] . \"</td>\"); echo (\"<td>\" . $value[\"date\"] . \"</td>\"); echo (\"</tr>\"); } ?> </tbody> </table> </div> </div> </div> </div> </div> </div> <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-header\"> <h5 class=\"m-0\">Estoc</h5> </div> <div class=\"card-body\"> <!--Fer un foreach per cada producte amb el seu stock--> <table class=\"table\"> <thead> <tr> <th scope=\"col\">#</th> <th scope=\"col\">Producte</th> <th scope=\"col\">Estoc</th> <th scope=\"col\">Estat</th> </tr> </thead> <tbody> <?php $cont = 0; $con = mysqli_connect('127.0.0.1', 'laravel', 'alumne', 'projectedb'); $sql = \"SELECT nom,stock FROM productes\"; $result = mysqli_query($con, $sql); foreach ($result as $value) { $to = \"ferranbertomeu@iesebre.com\"; $cont += 1; echo (\"<tr>\"); echo (\"<td>\" . $cont . \"</td>\"); echo (\"<td>\" . $value[\"nom\"] . \"</td>\"); echo (\"<td>\" . $value[\"stock\"] . \"</td>\"); if ($value[\"stock\"] == 0) { $subject = \"S'ha esgotat Aigua petita!\"; $message = \"S'ha esgotat Aigua petita, s'ha d'anar a reposar el producte urgentment!\"; echo (\"<td style=\" . \"background-color:#FF4C4C\" . \">\" . \"No queden productes!\" . \"</td>\"); mail($to, $subject, $message); } elseif ($value[\"stock\"] == 1) { $subject = \"S'est\u00e0 a punt d'esgotar Aigua petita!\"; $message = \"S'est\u00e0 a punt d'esgotar Aigua petita, s'ha d'anar a reposar el producte!\"; echo (\"<td style=\" . \"background-color:#FFB44E\" . \">\" . \"S'est\u00e0 esgotant!\" . \"</td>\"); mail($to, $subject, $message); } elseif ($value[\"stock\"] == 2) { echo (\"<td style=\" . \"background-color:#F5FF5B\" . \">\" . \"Queden la meitat de productes\" . \"</td>\"); } elseif ($value[\"stock\"] == 3) { echo (\"<td style=\" . \"background-color:#9EFF5B\" . \">\" . \"Estoc ple\" . \"</td>\"); } echo (\"</tr>\"); } ?> </tbody> </table> </div> </div> </div> </div> </div> </div> <div class=\"content\"> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-lg-6\"> <div class=\"card card-primary card-outline\"> <div class=\"card-header\"> <h5 class=\"m-0\">Ubicaci\u00f3</h5> </div> <div class=\"card-body\"> <iframe src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3019.597814021702!2d0.5130780156795304!3d40.81483093925471!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12a0e4bd4079a9d1%3A0x253c0ed9489c50f8!2sInstitut%20de%20L&#39;Ebre!5e0!3m2!1sca!2ses!4v1620804506220!5m2!1sca!2ses\" width=\"600\" height=\"450\" style=\"border:0;\" allowfullscreen=\"\" loading=\"lazy\"></iframe> </div> </div> </div> </div> </div> </div> </div> <!-- Control Sidebar --> <aside class=\"control-sidebar control-sidebar-dark\"> <!-- Control sidebar content goes here --> <div class=\"p-3\"> <h5>Title</h5> <p>Sidebar content</p> </div> </aside> <!-- Main Footer --> <footer class=\"main-footer\"> <!-- Default to the left --> <strong>Copyright &copy; 2021</strong> </footer> </div> <!-- REQUIRED SCRIPTS --> <!-- jQuery --> <script src=\"plugins/jquery/jquery.min.js\"></script> <!-- Bootstrap 4 --> <script src=\"plugins/bootstrap/js/bootstrap.bundle.min.js\"></script> <!-- AdminLTE App --> <script src=\"adminlte/js/adminlte.min.js\"></script> </body> </html>","title":"14.3. P\u00e0gina web"},{"location":"Documentaci%C3%B3/#144-aplicacio-web","text":"Main Activity <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".MainActivity\"> <TextView android:id=\"@+id/CES\" android:layout_width=\"132dp\" android:layout_height=\"68dp\" android:text=\"C.E.S\" android:textAlignment=\"center\" android:textSize=\"50sp\" app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintHorizontal_bias=\"0.498\" app:layout_constraintLeft_toLeftOf=\"parent\" app:layout_constraintRight_toRightOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:layout_constraintVertical_bias=\"0.057\" /> <TextView android:id=\"@+id/ces2\" android:layout_width=\"366dp\" android:layout_height=\"111dp\" android:layout_marginStart=\"20dp\" android:layout_marginTop=\"104dp\" android:text=\"Control d'Estoc amb Sensors\" android:textAlignment=\"center\" android:textSize=\"30sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/maquines\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"24dp\" android:layout_marginTop=\"544dp\" android:text=\"M\u00e0quines\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/productes\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"252dp\" android:layout_marginTop=\"544dp\" android:text=\"Productes\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/quisom\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"148dp\" android:layout_marginTop=\"604dp\" android:text=\"Qui som?\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginTop=\"68dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/maquina_expenedora\" /> </androidx.constraintlayout.widget.ConstraintLayout> package com.example.appces; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.os.Bundle; import android.view.View; import android.widget.Button; public class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); //navegacio a maquines Button maquines = (Button) findViewById(R.id.maquines); maquines.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), maquines.class); startActivityForResult(intent, 0); } }); //navegacio a qui som Button quisom = (Button) findViewById(R.id.quisom); quisom.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), quisom.class); startActivityForResult(intent, 0); } }); //navegacio a productes Button productes = (Button) findViewById(R.id.productes); productes.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View p) { Intent intent = new Intent (p.getContext(), productes.class); startActivityForResult(intent, 0); } }); } } Qui som? <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".quisom\"> <TextView android:id=\"@+id/titol\" android:layout_width=\"179dp\" android:layout_height=\"53dp\" android:layout_marginStart=\"116dp\" android:layout_marginTop=\"63dp\" android:text=\"QUI SOM?\" android:textAlignment=\"center\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/text_quisom\" android:layout_width=\"305dp\" android:layout_height=\"65dp\" android:layout_marginStart=\"52dp\" android:layout_marginTop=\"176dp\" android:gravity=\"center\" android:text=\"Som tres alumnes de 2n d'ASIX, Pau Emili Mestres, Ferran Bertomeu i Oriol Morera, que hem desenvolupat el projecte C.E.S\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/text2_quisom\" android:layout_width=\"304dp\" android:layout_height=\"181dp\" android:layout_marginStart=\"52dp\" android:layout_marginTop=\"284dp\" android:gravity=\"center\" android:text=\"Aquest projecte consisteix en la instal\u00b7laci\u00f3 de sensors a les m\u00e0quines expenedores i quan quedin pocs productes enviar\u00e0 un av\u00eds al responsable per a reposar l\u2019estoc. Tota aquesta informaci\u00f3 quedar\u00e0 registrada en un base de dades. Es podr\u00e0 consultar l\u2019estoc disponible a la nostra p\u00e0gina web\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/atras\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"155dp\" android:layout_marginTop=\"531dp\" android:text=\"Enrere\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> </androidx.constraintlayout.widget.ConstraintLayout> package com.example.appces; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.os.Bundle; import android.view.View; import android.widget.Button; public class quisom extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_quisom); //navegacio atras Button atras = (Button) findViewById(R.id.atras); atras.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), MainActivity.class); startActivityForResult(intent, 0); } }); } } Maquines <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".maquines\"> <TextView android:id=\"@+id/titolmaquines\" android:layout_width=\"375dp\" android:layout_height=\"87dp\" android:layout_marginStart=\"16dp\" android:layout_marginTop=\"80dp\" android:text=\"On estan les nostres m\u00e0quines?\" android:textAlignment=\"center\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/tortosa\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"44dp\" android:layout_marginTop=\"360dp\" android:text=\"Tortosa\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/roquetes\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"140dp\" android:layout_marginTop=\"572dp\" android:text=\"Roquetes\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/jesus\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"252dp\" android:layout_marginTop=\"360dp\" android:text=\"Jes\u00fas\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imgTortosa\" android:layout_width=\"157dp\" android:layout_height=\"138dp\" android:layout_marginStart=\"24dp\" android:layout_marginTop=\"208dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/tortosa\" /> <ImageView android:id=\"@+id/imgRoquetes\" android:layout_width=\"174dp\" android:layout_height=\"135dp\" android:layout_marginStart=\"104dp\" android:layout_marginTop=\"440dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/roquetes\" /> <ImageView android:id=\"@+id/imgJesus\" android:layout_width=\"164dp\" android:layout_height=\"135dp\" android:layout_marginStart=\"212dp\" android:layout_marginTop=\"208dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/jesus\" /> <Button android:id=\"@+id/atrasmaquines\" android:layout_width=\"99dp\" android:layout_height=\"40dp\" android:layout_marginStart=\"16dp\" android:layout_marginTop=\"16dp\" android:text=\"Enrere\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> </androidx.constraintlayout.widget.ConstraintLayout> package com.example.appces; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.net.Uri; import android.os.Bundle; import android.view.View; import android.widget.Button; public class maquines extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_maquines); //ubicacio tortosa (INS Ebre) Button tortosa = findViewById(R.id.tortosa); String ubitortosa = \"https://www.google.es/maps/place/Institut+de+L'Ebre/@40.8148269,0.513078,17z/data=!3m1!4b1!4m5!3m4!1s0x12a0e4bd4079a9d1:0x253c0ed9489c50f8!8m2!3d40.8148269!4d0.5152667\"; tortosa.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Uri uri = Uri.parse(ubitortosa); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); } }); //ubicacio roquetes Button roquetes = findViewById(R.id.roquetes); String ubiroquetes = \"https://www.google.com/maps/place/Roquetes,+Tarragona/@40.8216415,0.4975453,16z/data=!3m1!4b1!4m5!3m4!1s0x12a0e4eea8dc9235:0xd9fd9c286a33d8c6!8m2!3d40.8198735!4d0.5009781\"; roquetes.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Uri uri = Uri.parse(ubiroquetes); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); } }); //ubicacio jesus Button jesus = findViewById(R.id.jesus); String ubijesus = \"https://www.google.com/maps/place/43590+Jes%C3%BAs,+Tarragona/@40.8275406,0.4982545,15z/data=!3m1!4b1!4m5!3m4!1s0x12a0e48d350eb805:0xed6e5390564f796e!8m2!3d40.8270019!4d0.5079905\"; jesus.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Uri uri = Uri.parse(ubijesus); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); } }); //navegacio atras Button atrasmaquines = (Button) findViewById(R.id.atrasmaquines); atrasmaquines.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), MainActivity.class); startActivityForResult(intent, 0); } }); } } <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".quisom\"> <TextView android:id=\"@+id/titol\" android:layout_width=\"179dp\" android:layout_height=\"53dp\" android:layout_marginStart=\"116dp\" android:layout_marginTop=\"63dp\" android:text=\"QUI SOM?\" android:textAlignment=\"center\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/text_quisom\" android:layout_width=\"305dp\" android:layout_height=\"65dp\" android:layout_marginStart=\"52dp\" android:layout_marginTop=\"176dp\" android:gravity=\"center\" android:text=\"Som tres alumnes de 2n d'ASIX, Pau Emili Mestres, Ferran Bertomeu i Oriol Morera, que hem desenvolupat el projecte C.E.S\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/text2_quisom\" android:layout_width=\"304dp\" android:layout_height=\"181dp\" android:layout_marginStart=\"52dp\" android:layout_marginTop=\"284dp\" android:gravity=\"center\" android:text=\"Aquest projecte consisteix en la instal\u00b7laci\u00f3 de sensors a les m\u00e0quines expenedores i quan quedin pocs productes enviar\u00e0 un av\u00eds al responsable per a reposar l\u2019estoc. Tota aquesta informaci\u00f3 quedar\u00e0 registrada en un base de dades. Es podr\u00e0 consultar l\u2019estoc disponible a la nostra p\u00e0gina web\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <Button android:id=\"@+id/atras\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"155dp\" android:layout_marginTop=\"531dp\" android:text=\"Enrere\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> </androidx.constraintlayout.widget.ConstraintLayout> package com.example.appces; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.os.Bundle; import android.view.View; import android.widget.Button; public class quisom extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_quisom); //navegacio atras Button atras = (Button) findViewById(R.id.atras); atras.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), MainActivity.class); startActivityForResult(intent, 0); } }); } } Productes <?xml version=\"1.0\" encoding=\"utf-8\"?><RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"> <ScrollView android:layout_marginTop=\"30dp\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:id=\"@+id/scrollView\"> <LinearLayout android:layout_width=\"fill_parent\" android:layout_height=\"fill_parent\" android:orientation=\"vertical\"> <TextView android:id=\"@+id/titol_productes\" android:layout_width=\"360dp\" android:layout_height=\"80dp\" android:layout_gravity=\"center_horizontal\" android:text=\"Els nostres productes\" android:textAppearance=\"?android:attr/textAppearanceMedium\" android:textSize=\"36sp\" /> <ImageView android:id=\"@+id/img_aigua_petita\" android:layout_width=\"wrap_content\" android:layout_height=\"192dp\" android:src=\"@drawable/aigua_petita\" android:textAlignment=\"center\" /> <Button android:id=\"@+id/aigua_petita1\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"aigua petita\" /> <ImageView android:id=\"@+id/imageView8\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:src=\"@drawable/aigua_gran\" /> <Button android:id=\"@+id/aigua_gran\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"aigua gran\" /> <ImageView android:id=\"@+id/imageView7\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:src=\"@drawable/cocacola\" /> <Button android:id=\"@+id/cocacola\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"Coca-cola\" /> <ImageView android:id=\"@+id/imageView4\" android:layout_width=\"match_parent\" android:layout_height=\"166dp\" app:srcCompat=\"@drawable/fanta_taronja\" /> <Button android:id=\"@+id/fantataronja\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"Fanta de Taronja\" /> <ImageView android:id=\"@+id/imageView5\" android:layout_width=\"match_parent\" android:layout_height=\"188dp\" app:srcCompat=\"@drawable/fanta_llima\" /> <Button android:id=\"@+id/fantallima\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"Fanta de Llima\" /> <ImageView android:id=\"@+id/imageView13\" android:layout_width=\"match_parent\" android:layout_height=\"75dp\" app:srcCompat=\"@drawable/filipinos_blancs\" /> <Button android:id=\"@+id/filipinosblancs\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"filipinos blancs\" /> <ImageView android:id=\"@+id/imageView14\" android:layout_width=\"match_parent\" android:layout_height=\"76dp\" app:srcCompat=\"@drawable/filipinos_negres\" /> <Button android:id=\"@+id/filipinosnegres\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"Filipinos negres\" /> <ImageView android:id=\"@+id/imageView9\" android:layout_width=\"match_parent\" android:layout_height=\"176dp\" app:srcCompat=\"@drawable/ruffles_jamon\" /> <Button android:id=\"@+id/ruffles\" android:layout_width=\"fill_parent\" android:layout_height=\"wrap_content\" android:text=\"ruffles jam\u00f3n\" /> <ImageView android:id=\"@+id/imageView15\" android:layout_width=\"match_parent\" android:layout_height=\"53dp\" app:srcCompat=\"@drawable/back\" /> <Button android:id=\"@+id/enrere\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:text=\"enrere\" /> </LinearLayout> </ScrollView></RelativeLayout> package com.example.appces;import androidx.appcompat.app.AppCompatActivity;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.widget.Button;public class productes extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_productes); //navegacio a aigua petita Button aigua_petita1 = (Button) findViewById(R.id.aigua_petita1); aigua_petita1.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), botella.class); startActivityForResult(intent, 0); } }); //navegacio a aigua gran Button aigua_gran = (Button) findViewById(R.id.aigua_gran); aigua_gran.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), aiguagran.class); startActivityForResult(intent, 0); } }); //navegacio a cocacola Button cocacola = (Button) findViewById(R.id.cocacola); cocacola.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), cocacola.class); startActivityForResult(intent, 0); } }); //navegacio a fanta de taronja Button fantataronja = (Button) findViewById(R.id.fantataronja); fantataronja.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), fantataronja.class); startActivityForResult(intent, 0); } }); //navegacio a fanta de llima Button fantallima = (Button) findViewById(R.id.fantallima); fantallima.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), fantallima.class); startActivityForResult(intent, 0); } }); //navegacio a filipinos blancs Button filipinosblancs = (Button) findViewById(R.id.filipinosblancs); filipinosblancs.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), filipinosblancs.class); startActivityForResult(intent, 0); } }); //navegacio a filipinos negres Button filipinosnegres = (Button) findViewById(R.id.filipinosnegres); filipinosnegres.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), filipinosnegres.class); startActivityForResult(intent, 0); } }); //navegacio a ruffles Button ruffles = (Button) findViewById(R.id.ruffles); ruffles.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent(v.getContext(), ruffles.class); startActivityForResult(intent, 0); } }); //navegacio atras Button enrere = (Button) findViewById(R.id.enrere); enrere.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Intent intent = new Intent (v.getContext(), MainActivity.class); startActivityForResult(intent, 0); } }); }} Aigua petita <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".botella\"> <TextView android:id=\"@+id/aiguapetita\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"88dp\" android:layout_marginTop=\"60dp\" android:text=\"AIGUA PETITA\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusAP\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingAP\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"211dp\" android:text=\"Ingredients: Aigua\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descAP\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"268dp\" android:text=\"Descripci\u00f3: Ampolla d'aigua de 0,5L fresca\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/preuAP\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"320dp\" android:text=\"Preu: 0,6\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView2\" android:layout_width=\"223dp\" android:layout_height=\"262dp\" android:layout_marginStart=\"94dp\" android:layout_marginTop=\"359dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/aigua_petita\" /> <Button android:id=\"@+id/atrasbotella\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"160dp\" android:layout_marginTop=\"629dp\" android:text=\"enrere\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /></androidx.constraintlayout.widget.ConstraintLayout> Aigua gran <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".aiguagran\"> <TextView android:id=\"@+id/preuAP2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"320dp\" android:text=\"Preu: 1\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descAG\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"268dp\" android:text=\"Descripci\u00f3: Ampolla d'aigua de 1,5L fresca\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingAG2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"211dp\" android:text=\"Ingredients: Aigua\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusAG\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/titolAG\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"100dp\" android:layout_marginTop=\"60dp\" android:text=\"AIGUA GRAN\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView3\" android:layout_width=\"227dp\" android:layout_height=\"205dp\" android:layout_marginStart=\"92dp\" android:layout_marginTop=\"388dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/aigua_gran\" /></androidx.constraintlayout.widget.ConstraintLayout> Fanta de llima <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".fantallima\"> <TextView android:id=\"@+id/preuFLL\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"412dp\" android:text=\"Preu: 1,6\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descFLL\" android:layout_width=\"332dp\" android:layout_height=\"48dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"340dp\" android:text=\"Descripci\u00f3: Beguda refrescant de suc de llima, amb sucres i edulcorants.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFLL\" android:layout_width=\"331dp\" android:layout_height=\"112dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"211dp\" android:text=\"Ingredients: Aigua carbonatada, sucres, 6% de suc de llimona, aromes, acidulant E330, conservant E211, antioxidant E300, estabilitzant E414, estabilitzant E445 i colorant E104.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusFLL\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/textView4\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"64dp\" android:layout_marginTop=\"60dp\" android:text=\"FANTA DE LLIMA\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView10\" android:layout_width=\"240dp\" android:layout_height=\"213dp\" android:layout_marginStart=\"85dp\" android:layout_marginTop=\"436dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/fanta_llima\" /></androidx.constraintlayout.widget.ConstraintLayout> Fanta de taronja <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".fantataronja\"> <TextView android:id=\"@+id/preuAP3\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"472dp\" android:text=\"Preu: 1,6\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descAP2\" android:layout_width=\"341dp\" android:layout_height=\"47dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"404dp\" android:text=\"Descripci\u00f3: Beguda refrescant de suc de taronja, amb sucres i edulcorants.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFT\" android:layout_width=\"336dp\" android:layout_height=\"200dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"192dp\" android:text=\"Ingredients: Aigua carbonatada, 8% de suc de taronja a partir de concentrat, sucre, acidulants: \u00e0cid c\u00edtric i \u00e0cid m\u00e0lic, estabilitzants: E-414, E-444 i E-445, conservador: E-202, edulcorants: E-950 i aspartam, antioxidant: \u00e0cid asc\u00f2rbic, aromes naturals de taronja i altres aromes naturals i colorant: E-160a. Cont\u00e9 una font de fenilalanina.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusAP2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/fantat\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"60dp\" android:text=\"FANTA DE TARONJA\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView11\" android:layout_width=\"212dp\" android:layout_height=\"196dp\" android:layout_marginStart=\"99dp\" android:layout_marginTop=\"505dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/fanta_taronja\" /></androidx.constraintlayout.widget.ConstraintLayout> Fanta de taronja <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".fantataronja\"> <TextView android:id=\"@+id/preuAP3\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"472dp\" android:text=\"Preu: 1,6\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descAP2\" android:layout_width=\"341dp\" android:layout_height=\"47dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"404dp\" android:text=\"Descripci\u00f3: Beguda refrescant de suc de taronja, amb sucres i edulcorants.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFT\" android:layout_width=\"336dp\" android:layout_height=\"200dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"192dp\" android:text=\"Ingredients: Aigua carbonatada, 8% de suc de taronja a partir de concentrat, sucre, acidulants: \u00e0cid c\u00edtric i \u00e0cid m\u00e0lic, estabilitzants: E-414, E-444 i E-445, conservador: E-202, edulcorants: E-950 i aspartam, antioxidant: \u00e0cid asc\u00f2rbic, aromes naturals de taronja i altres aromes naturals i colorant: E-160a. Cont\u00e9 una font de fenilalanina.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusAP2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Beguda\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/fantat\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"60dp\" android:text=\"FANTA DE TARONJA\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView11\" android:layout_width=\"212dp\" android:layout_height=\"196dp\" android:layout_marginStart=\"99dp\" android:layout_marginTop=\"505dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/fanta_taronja\" /></androidx.constraintlayout.widget.ConstraintLayout> Filipinos blancs <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".filipinosblancs\"> <TextView android:id=\"@+id/preuFB\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"532dp\" android:text=\"Preu: 1\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descFB\" android:layout_width=\"327dp\" android:layout_height=\"84dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"432dp\" android:text=\"Descripci\u00f3: Galetes en forma d'aro, recobertes de xocolata blanca, d'aproximadament uns 4 cm de di\u00e0metre.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/fb\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"48dp\" android:layout_marginTop=\"56dp\" android:text=\"FILIPINOS BLANCS\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFB\" android:layout_width=\"332dp\" android:layout_height=\"215dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"196dp\" android:text=\"Ingredients: Xocolata blanca 45% (sucre, mantega de cacau, llet desnatada en pols, lactosa, s\u00e8rum de llet en pols, greix lacti, emulgent: lecitina de gira-sol, aroma), farina de blat, sucre, oli de palma, cacau desgreixat en pols 3%, xarop de glucosa i fructosa, gasificants (bicarbonats am\u00f2nic i s\u00f2dic), sal, s\u00e8rum de llet en pols, emulgent (lecitina de soja), antioxidants (e 304, e 306), aroma.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusFB\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Galletes\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView12\" android:layout_width=\"316dp\" android:layout_height=\"147dp\" android:layout_marginStart=\"48dp\" android:layout_marginTop=\"556dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/filipinos_blancs\" /></androidx.constraintlayout.widget.ConstraintLayout> Filipinos negres <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".filipinosnegres\"> <TextView android:id=\"@+id/preuFN\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"508dp\" android:text=\"Preu: 1\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descFN\" android:layout_width=\"337dp\" android:layout_height=\"67dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"412dp\" android:text=\"Descripci\u00f3: Galetes en forma d'aro, recobertes de xocolata negra, d'aproximadament uns 4 cm de di\u00e0metre.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingFN\" android:layout_width=\"335dp\" android:layout_height=\"192dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"196dp\" android:text=\"Ingredients: Farina de BLAT, xocolata el 39% (sucre, pasta de cacau, mantega de cacau, LACTOSA, greix L\u00c0CTIA, emulgent: lecitina de gira-sol, aroma), oli de palma, sucre, mid\u00f3 de BLAT, LLET en pols, gasificants (carbonats de amoni i sodi, tartrat monopot\u00e0ssic), xarop de glucosa i fructosa, sal, antioxidants (e 304, e 306), aromes. Pot contenir SOJA, OUS.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusFN\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Galletes\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/FN\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"48dp\" android:layout_marginTop=\"60dp\" android:text=\"FILIPINOS NEGRES\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView16\" android:layout_width=\"267dp\" android:layout_height=\"89dp\" android:layout_marginStart=\"72dp\" android:layout_marginTop=\"555dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/filipinos_negres\" /></androidx.constraintlayout.widget.ConstraintLayout> Ruffles jam\u00f3n <?xml version=\"1.0\" encoding=\"utf-8\"?><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\".ruffles\"> <TextView android:id=\"@+id/preuAP4\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"436dp\" android:text=\"Preu: 1,2\u20ac\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/descRF\" android:layout_width=\"337dp\" android:layout_height=\"46dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"368dp\" android:text=\"Descripci\u00f3: Patates fregides ondulades amb un sabor intens a pernil\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/ingRF\" android:layout_width=\"338dp\" android:layout_height=\"139dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"211dp\" android:text=\"Ingredients: Patates, greix vegetal, aroma de pernil (lactosa, potenciadors de sabor (glutamat monos\u00f2dic, inosinato i guanilat dis\u00f3dicos), subst\u00e0ncies aromatitzants, prote\u00efna de soja hidrolitzada, formatge en pols, aroma de fum), sal. Sense gluten.\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/tipusRF\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"155dp\" android:text=\"Tipus: Patates fregides\" android:textSize=\"18sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <TextView android:id=\"@+id/RF\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginStart=\"64dp\" android:layout_marginTop=\"60dp\" android:text=\"RUFFLES JAM\u00d3N\" android:textSize=\"36sp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" /> <ImageView android:id=\"@+id/imageView17\" android:layout_width=\"196dp\" android:layout_height=\"204dp\" android:layout_marginStart=\"104dp\" android:layout_marginTop=\"472dp\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:srcCompat=\"@drawable/ruffles_jamon\" /></androidx.constraintlayout.widget.ConstraintLayout>","title":"14.4. Aplicaci\u00f3 web"},{"location":"Documentaci%C3%B3/#145-copies-de-seguretat","text":"Script muntar directori autom\u00e0ticament #!/bin/bash #Munta la carpeta del drive per a poder afegir o descarregar fitxers rclone mount gdrive: $HOME/mnt/gdrive Script c\u00f2pia de seguretat sistema operatiu #!/bin/bash cd /home/mnt/gdrive/backup dd if=/dev/sda of=/home/pi/mnt/gdrive/backup Script c\u00f2pia de seguretat MySQL #!/bin/bash cd /home/pi/mnt/gdrive/backup mysqldump -hlocalhost -ularavel -palumne projectedb > backup_projecte_`date +%Y-%m-%d`.sql Script c\u00f2pia de seguretat Laravel #!/bin/bash cd /var/www/paginalaravel/webprojecte php artisan backup:run sleep 2m cd /var/www/paginalaravel/webprojecte/storage/app/Laravel cp *.zip /home/pi/mnt/gdrive/backup cd /var/www/paginalaravel/webprojecte/storage/app/Laravel rm *.zip","title":"14.5. C\u00f2pies de seguretat"}]}